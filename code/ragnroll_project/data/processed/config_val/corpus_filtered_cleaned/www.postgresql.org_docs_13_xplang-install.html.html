<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 41.1. Installing Procedural Languages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/xplang-install.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="41.1. Installing Procedural Languages" />
  <meta property="og:description" content="41.1.&amp;nbsp;Installing Procedural Languages A procedural language must be “installed” into each database where it is to be used. But procedural …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/xplang-install.html" title="PostgreSQL 17 - 41.1. Installing Procedural Languages" >Current</a>
                          (<a href="/docs/17/xplang-install.html" title="PostgreSQL 17 - 41.1. Installing Procedural Languages" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/xplang-install.html" title="PostgreSQL 16 - 41.1. Installing Procedural Languages" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/xplang-install.html" title="PostgreSQL 15 - 41.1. Installing Procedural Languages" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/xplang-install.html" title="PostgreSQL 14 - 41.1. Installing Procedural Languages" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/xplang-install.html" title="PostgreSQL 13 - 41.1. Installing Procedural Languages" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/xplang-install.html" title="PostgreSQL devel - 41.1. Installing Procedural Languages"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/xplang-install.html" title="PostgreSQL 12 - 41.1. Installing Procedural Languages"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/xplang-install.html" title="PostgreSQL 11 - 41.1. Installing Procedural Languages"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/xplang-install.html" title="PostgreSQL 10 - 41.1. Installing Procedural Languages"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/xplang-install.html" title="PostgreSQL 9.6 - 41.1. Installing Procedural Languages"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/xplang-install.html" title="PostgreSQL 9.5 - 41.1. Installing Procedural Languages"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/xplang-install.html" title="PostgreSQL 9.4 - 41.1. Installing Procedural Languages"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/xplang-install.html" title="PostgreSQL 9.3 - 41.1. Installing Procedural Languages"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/xplang-install.html" title="PostgreSQL 9.2 - 41.1. Installing Procedural Languages"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/xplang-install.html" title="PostgreSQL 9.1 - 41.1. Installing Procedural Languages"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/xplang-install.html" title="PostgreSQL 9.0 - 41.1. Installing Procedural Languages"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/xplang-install.html" title="PostgreSQL 8.4 - 41.1. Installing Procedural Languages"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/xplang-install.html" title="PostgreSQL 8.3 - 41.1. Installing Procedural Languages"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/xplang-install.html" title="PostgreSQL 8.2 - 41.1. Installing Procedural Languages"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/7.3/xplang-install.html" title="PostgreSQL 7.3 - 41.1. Installing Procedural Languages"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/xplang-install.html" title="PostgreSQL 7.2 - 41.1. Installing Procedural Languages"  rel="nofollow">7.2</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">41.1.&nbsp;Installing Procedural Languages</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="xplang.html" title="Chapter&nbsp;41.&nbsp;Procedural Languages">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="xplang.html" title="Chapter&nbsp;41.&nbsp;Procedural Languages">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;41.&nbsp;Procedural Languages</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="plpgsql.html" title="Chapter&nbsp;42.&nbsp;PL/pgSQL — SQL Procedural Language">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="XPLANG-INSTALL">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">41.1.&nbsp;Installing Procedural Languages</h2>
      </div>
    </div>
  </div>
  <p>A procedural language must be <span class="quote">“<span class="quote">installed</span>”</span> into each database where it is to be used. But procedural languages installed in the database <code class="literal">template1</code> are automatically available in all subsequently created databases, since their entries in <code class="literal">template1</code> will be copied by <code class="command">CREATE DATABASE</code>. So the database administrator can decide which languages are available in which databases and can make some languages available by default if desired.</p>
  <p>For the languages supplied with the standard distribution, it is only necessary to execute <code class="command">CREATE EXTENSION</code> <em class="replaceable"><code>language_name</code></em> to install the language into the current database. The manual procedure described below is only recommended for installing languages that have not been packaged as extensions.</p>
  <div class="procedure" id="id-1.8.7.5.4">
    <p class="title"><strong>Manual Procedural Language Installation</strong></p>
    <p>A procedural language is installed in a database in five steps, which must be carried out by a database superuser. In most cases the required SQL commands should be packaged as the installation script of an <span class="quote">“<span class="quote">extension</span>”</span>, so that <code class="command">CREATE EXTENSION</code> can be used to execute them.</p>
    <ol class="procedure" type="1">
      <li class="step" id="XPLANG-INSTALL-CR1">
        <p>The shared object for the language handler must be compiled and installed into an appropriate library directory. This works in the same way as building and installing modules with regular user-defined C functions does; see <a class="xref" href="xfunc-c.html#DFUNC" title="37.10.5.&nbsp;Compiling and Linking Dynamically-Loaded Functions">Section&nbsp;37.10.5</a>. Often, the language handler will depend on an external library that provides the actual programming language engine; if so, that must be installed as well.</p>
      </li>
      <li class="step" id="XPLANG-INSTALL-CR2">
        <p>The handler must be declared with the command</p>
        <pre class="synopsis">
CREATE FUNCTION <em class="replaceable"><code>handler_function_name</code></em>()
    RETURNS language_handler
    AS '<em class="replaceable"><code>path-to-shared-object</code></em>'
    LANGUAGE C;
</pre>
        <p>The special return type of <code class="type">language_handler</code> tells the database system that this function does not return one of the defined <acronym class="acronym">SQL</acronym> data types and is not directly usable in <acronym class="acronym">SQL</acronym> statements.</p>
      </li>
      <li class="step" id="XPLANG-INSTALL-CR3">
        <p>Optionally, the language handler can provide an <span class="quote">“<span class="quote">inline</span>”</span> handler function that executes anonymous code blocks (<a class="xref" href="sql-do.html" title="DO"><span class="refentrytitle">DO</span></a> commands) written in this language. If an inline handler function is provided by the language, declare it with a command like</p>
        <pre class="synopsis">
CREATE FUNCTION <em class="replaceable"><code>inline_function_name</code></em>(internal)
    RETURNS void
    AS '<em class="replaceable"><code>path-to-shared-object</code></em>'
    LANGUAGE C;
</pre>
      </li>
      <li class="step" id="XPLANG-INSTALL-CR4">
        <p>Optionally, the language handler can provide a <span class="quote">“<span class="quote">validator</span>”</span> function that checks a function definition for correctness without actually executing it. The validator function is called by <code class="command">CREATE FUNCTION</code> if it exists. If a validator function is provided by the language, declare it with a command like</p>
        <pre class="synopsis">
CREATE FUNCTION <em class="replaceable"><code>validator_function_name</code></em>(oid)
    RETURNS void
    AS '<em class="replaceable"><code>path-to-shared-object</code></em>'
    LANGUAGE C STRICT;
</pre>
      </li>
      <li class="step" id="XPLANG-INSTALL-CR5">
        <p>Finally, the PL must be declared with the command</p>
        <pre class="synopsis">
CREATE [<span class="optional">TRUSTED</span>] LANGUAGE <em class="replaceable"><code>language_name</code></em>
    HANDLER <em class="replaceable"><code>handler_function_name</code></em>
    [<span class="optional">INLINE <em class="replaceable"><code>inline_function_name</code></em></span>]
    [<span class="optional">VALIDATOR <em class="replaceable"><code>validator_function_name</code></em></span>] ;
</pre>
        <p>The optional key word <code class="literal">TRUSTED</code> specifies that the language does not grant access to data that the user would not otherwise have. Trusted languages are designed for ordinary database users (those without superuser privilege) and allows them to safely create functions and procedures. Since PL functions are executed inside the database server, the <code class="literal">TRUSTED</code> flag should only be given for languages that do not allow access to database server internals or the file system. The languages <span class="application">PL/pgSQL</span>, <span class="application">PL/Tcl</span>, and <span class="application">PL/Perl</span> are considered trusted; the languages <span class="application">PL/TclU</span>, <span class="application">PL/PerlU</span>, and <span class="application">PL/PythonU</span> are designed to provide unlimited functionality and should <span class="emphasis"><em>not</em></span> be marked trusted.</p>
      </li>
    </ol>
  </div>
  <p><a class="xref" href="xplang-install.html#XPLANG-INSTALL-EXAMPLE" title="Example&nbsp;41.1.&nbsp;Manual Installation of PL/Perl">Example&nbsp;41.1</a> shows how the manual installation procedure would work with the language <span class="application">PL/Perl</span>.</p>
  <div class="example" id="XPLANG-INSTALL-EXAMPLE">
    <p class="title"><strong>Example&nbsp;41.1.&nbsp;Manual Installation of <span class="application">PL/Perl</span></strong></p>
    <div class="example-contents">
      <p>The following command tells the database server where to find the shared object for the <span class="application">PL/Perl</span> language's call handler function:</p>
      <pre class="programlisting">
CREATE FUNCTION plperl_call_handler() RETURNS language_handler AS
    '$libdir/plperl' LANGUAGE C;
</pre>
      <p><span class="application">PL/Perl</span> has an inline handler function and a validator function, so we declare those too:</p>
      <pre class="programlisting">
CREATE FUNCTION plperl_inline_handler(internal) RETURNS void AS
    '$libdir/plperl' LANGUAGE C STRICT;

CREATE FUNCTION plperl_validator(oid) RETURNS void AS
    '$libdir/plperl' LANGUAGE C STRICT;
</pre>
      <p>The command:</p>
      <pre class="programlisting">
CREATE TRUSTED LANGUAGE plperl
    HANDLER plperl_call_handler
    INLINE plperl_inline_handler
    VALIDATOR plperl_validator;
</pre>
      <p>then defines that the previously declared functions should be invoked for functions and procedures where the language attribute is <code class="literal">plperl</code>.</p>
    </div>
  </div><br class="example-break" />
  <p>In a default <span class="productname">PostgreSQL</span> installation, the handler for the <span class="application">PL/pgSQL</span> language is built and installed into the <span class="quote">“<span class="quote">library</span>”</span> directory; furthermore, the <span class="application">PL/pgSQL</span> language itself is installed in all databases. If <span class="application">Tcl</span> support is configured in, the handlers for <span class="application">PL/Tcl</span> and <span class="application">PL/TclU</span> are built and installed in the library directory, but the language itself is not installed in any database by default. Likewise, the <span class="application">PL/Perl</span> and <span class="application">PL/PerlU</span> handlers are built and installed if Perl support is configured, and the <span class="application">PL/PythonU</span> handler is installed if Python support is configured, but these languages are not installed by default.</p>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="xplang.html" title="Chapter&nbsp;41.&nbsp;Procedural Languages">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="xplang.html" title="Chapter&nbsp;41.&nbsp;Procedural Languages">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="plpgsql.html" title="Chapter&nbsp;42.&nbsp;PL/pgSQL — SQL Procedural Language">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">Chapter&nbsp;41.&nbsp;Procedural Languages&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;42.&nbsp;<span xmlns="http://www.w3.org/1999/xhtml" class="application">PL/pgSQL</span> — <acronym xmlns="http://www.w3.org/1999/xhtml" class="acronym">SQL</acronym> Procedural Language</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/xplang-install.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
