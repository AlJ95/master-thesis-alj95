<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: SPI_execute_with_args</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/spi-spi-execute-with-args.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="SPI_execute_with_args" />
  <meta property="og:description" content="SPI_execute_with_args SPI_execute_with_args — execute a command with out-of-line parameters Synopsis int SPI_execute_with_args(const char *command, int nargs, Oid *argtypes, Datum *values, …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/spi-spi-execute-with-args.html" title="PostgreSQL 17 - SPI_execute_with_args" >Current</a>
                          (<a href="/docs/17/spi-spi-execute-with-args.html" title="PostgreSQL 17 - SPI_execute_with_args" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/spi-spi-execute-with-args.html" title="PostgreSQL 16 - SPI_execute_with_args" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/spi-spi-execute-with-args.html" title="PostgreSQL 15 - SPI_execute_with_args" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/spi-spi-execute-with-args.html" title="PostgreSQL 14 - SPI_execute_with_args" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/spi-spi-execute-with-args.html" title="PostgreSQL 13 - SPI_execute_with_args" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/spi-spi-execute-with-args.html" title="PostgreSQL devel - SPI_execute_with_args"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/spi-spi-execute-with-args.html" title="PostgreSQL 12 - SPI_execute_with_args"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/spi-spi-execute-with-args.html" title="PostgreSQL 11 - SPI_execute_with_args"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/spi-spi-execute-with-args.html" title="PostgreSQL 10 - SPI_execute_with_args"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/spi-spi-execute-with-args.html" title="PostgreSQL 9.6 - SPI_execute_with_args"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/spi-spi-execute-with-args.html" title="PostgreSQL 9.5 - SPI_execute_with_args"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/spi-spi-execute-with-args.html" title="PostgreSQL 9.4 - SPI_execute_with_args"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/spi-spi-execute-with-args.html" title="PostgreSQL 9.3 - SPI_execute_with_args"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/spi-spi-execute-with-args.html" title="PostgreSQL 9.2 - SPI_execute_with_args"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/spi-spi-execute-with-args.html" title="PostgreSQL 9.1 - SPI_execute_with_args"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/spi-spi-execute-with-args.html" title="PostgreSQL 9.0 - SPI_execute_with_args"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/spi-spi-execute-with-args.html" title="PostgreSQL 8.4 - SPI_execute_with_args"  rel="nofollow">8.4</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">SPI_execute_with_args</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="spi-spi-exec.html" title="SPI_exec">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="spi-interface.html" title="46.1.&nbsp;Interface Functions">Up</a></td>
      <th width="60%" align="center">46.1.&nbsp;Interface Functions</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="spi-spi-prepare.html" title="SPI_prepare">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SPI-SPI-EXECUTE-WITH-ARGS">
  <div class="titlepage"></div><a id="id-1.8.12.8.6.1" class="indexterm" name="id-1.8.12.8.6.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">SPI_execute_with_args</span></h2>
    <p>SPI_execute_with_args — execute a command with out-of-line parameters</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
int SPI_execute_with_args(const char *<em class="parameter"><code>command</code></em>,
                          int <em class="parameter"><code>nargs</code></em>, Oid *<em class="parameter"><code>argtypes</code></em>,
                          Datum *<em class="parameter"><code>values</code></em>, const char *<em class="parameter"><code>nulls</code></em>,
                          bool <em class="parameter"><code>read_only</code></em>, long <em class="parameter"><code>count</code></em>)
</pre>
  </div>
  <div class="refsect1" id="id-1.8.12.8.6.5">
    <h2>Description</h2>
    <p><code class="function">SPI_execute_with_args</code> executes a command that might include references to externally supplied parameters. The command text refers to a parameter as <code class="literal">$<em class="replaceable"><code>n</code></em></code>, and the call specifies data types and values for each such symbol. <em class="parameter"><code>read_only</code></em> and <em class="parameter"><code>count</code></em> have the same interpretation as in <code class="function">SPI_execute</code>.</p>
    <p>The main advantage of this routine compared to <code class="function">SPI_execute</code> is that data values can be inserted into the command without tedious quoting/escaping, and thus with much less risk of SQL-injection attacks.</p>
    <p>Similar results can be achieved with <code class="function">SPI_prepare</code> followed by <code class="function">SPI_execute_plan</code>; however, when using this function the query plan is always customized to the specific parameter values provided. For one-time query execution, this function should be preferred. If the same command is to be executed with many different parameters, either method might be faster, depending on the cost of re-planning versus the benefit of custom plans.</p>
  </div>
  <div class="refsect1" id="id-1.8.12.8.6.6">
    <h2>Arguments</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><code class="literal">const char * <em class="parameter"><code>command</code></em></code></span></dt>
        <dd>
          <p>command string</p>
        </dd>
        <dt><span class="term"><code class="literal">int <em class="parameter"><code>nargs</code></em></code></span></dt>
        <dd>
          <p>number of input parameters (<code class="literal">$1</code>, <code class="literal">$2</code>, etc.)</p>
        </dd>
        <dt><span class="term"><code class="literal">Oid * <em class="parameter"><code>argtypes</code></em></code></span></dt>
        <dd>
          <p>an array of length <em class="parameter"><code>nargs</code></em>, containing the <acronym class="acronym">OID</acronym>s of the data types of the parameters</p>
        </dd>
        <dt><span class="term"><code class="literal">Datum * <em class="parameter"><code>values</code></em></code></span></dt>
        <dd>
          <p>an array of length <em class="parameter"><code>nargs</code></em>, containing the actual parameter values</p>
        </dd>
        <dt><span class="term"><code class="literal">const char * <em class="parameter"><code>nulls</code></em></code></span></dt>
        <dd>
          <p>an array of length <em class="parameter"><code>nargs</code></em>, describing which parameters are null</p>
          <p>If <em class="parameter"><code>nulls</code></em> is <code class="symbol">NULL</code> then <code class="function">SPI_execute_with_args</code> assumes that no parameters are null. Otherwise, each entry of the <em class="parameter"><code>nulls</code></em> array should be <code class="literal">'&nbsp;'</code> if the corresponding parameter value is non-null, or <code class="literal">'n'</code> if the corresponding parameter value is null. (In the latter case, the actual value in the corresponding <em class="parameter"><code>values</code></em> entry doesn't matter.) Note that <em class="parameter"><code>nulls</code></em> is not a text string, just an array: it does not need a <code class="literal">'\0'</code> terminator.</p>
        </dd>
        <dt><span class="term"><code class="literal">bool <em class="parameter"><code>read_only</code></em></code></span></dt>
        <dd>
          <p><code class="literal">true</code> for read-only execution</p>
        </dd>
        <dt><span class="term"><code class="literal">long <em class="parameter"><code>count</code></em></code></span></dt>
        <dd>
          <p>maximum number of rows to return, or <code class="literal">0</code> for no limit</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.8.12.8.6.7">
    <h2>Return Value</h2>
    <p>The return value is the same as for <code class="function">SPI_execute</code>.</p>
    <p><code class="varname">SPI_processed</code> and <code class="varname">SPI_tuptable</code> are set as in <code class="function">SPI_execute</code> if successful.</p>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="spi-spi-exec.html" title="SPI_exec">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="spi-interface.html" title="46.1.&nbsp;Interface Functions">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="spi-spi-prepare.html" title="SPI_prepare">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">SPI_exec&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;SPI_prepare</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/spi-spi-execute-with-args.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
