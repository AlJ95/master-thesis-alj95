<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 8.11. Text Search Types</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/datatype-textsearch.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="8.11. Text Search Types" />
  <meta property="og:description" content="8.11.&amp;nbsp;Text Search Types 8.11.1. tsvector 8.11.2. tsquery PostgreSQL provides two data types that are designed to support full text search, …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/datatype-textsearch.html" title="PostgreSQL 17 - 8.11. Text Search Types" >Current</a>
                          (<a href="/docs/17/datatype-textsearch.html" title="PostgreSQL 17 - 8.11. Text Search Types" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/datatype-textsearch.html" title="PostgreSQL 16 - 8.11. Text Search Types" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/datatype-textsearch.html" title="PostgreSQL 15 - 8.11. Text Search Types" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/datatype-textsearch.html" title="PostgreSQL 14 - 8.11. Text Search Types" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/datatype-textsearch.html" title="PostgreSQL 13 - 8.11. Text Search Types" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/datatype-textsearch.html" title="PostgreSQL devel - 8.11. Text Search Types"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/datatype-textsearch.html" title="PostgreSQL 12 - 8.11. Text Search Types"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/datatype-textsearch.html" title="PostgreSQL 11 - 8.11. Text Search Types"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/datatype-textsearch.html" title="PostgreSQL 10 - 8.11. Text Search Types"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/datatype-textsearch.html" title="PostgreSQL 9.6 - 8.11. Text Search Types"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/datatype-textsearch.html" title="PostgreSQL 9.5 - 8.11. Text Search Types"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/datatype-textsearch.html" title="PostgreSQL 9.4 - 8.11. Text Search Types"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/datatype-textsearch.html" title="PostgreSQL 9.3 - 8.11. Text Search Types"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/datatype-textsearch.html" title="PostgreSQL 9.2 - 8.11. Text Search Types"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/datatype-textsearch.html" title="PostgreSQL 9.1 - 8.11. Text Search Types"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/datatype-textsearch.html" title="PostgreSQL 9.0 - 8.11. Text Search Types"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/datatype-textsearch.html" title="PostgreSQL 8.4 - 8.11. Text Search Types"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/datatype-textsearch.html" title="PostgreSQL 8.3 - 8.11. Text Search Types"  rel="nofollow">8.3</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">8.11.&nbsp;Text Search Types</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="datatype-bit.html" title="8.10.&nbsp;Bit String Types">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="datatype.html" title="Chapter&nbsp;8.&nbsp;Data Types">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;8.&nbsp;Data Types</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="datatype-uuid.html" title="8.12.&nbsp;UUID Type">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="DATATYPE-TEXTSEARCH">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">8.11.&nbsp;Text Search Types</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="datatype-textsearch.html#DATATYPE-TSVECTOR">8.11.1. <code class="type">tsvector</code></a></span></dt>
      <dt><span class="sect2"><a href="datatype-textsearch.html#DATATYPE-TSQUERY">8.11.2. <code class="type">tsquery</code></a></span></dt>
    </dl>
  </div><a id="id-1.5.7.19.2" class="indexterm" name="id-1.5.7.19.2"></a><a id="id-1.5.7.19.3" class="indexterm" name="id-1.5.7.19.3"></a>
  <p><span class="productname">PostgreSQL</span> provides two data types that are designed to support full text search, which is the activity of searching through a collection of natural-language <em class="firstterm">documents</em> to locate those that best match a <em class="firstterm">query</em>. The <code class="type">tsvector</code> type represents a document in a form optimized for text search; the <code class="type">tsquery</code> type similarly represents a text query. <a class="xref" href="textsearch.html" title="Chapter&nbsp;12.&nbsp;Full Text Search">Chapter&nbsp;12</a> provides a detailed explanation of this facility, and <a class="xref" href="functions-textsearch.html" title="9.13.&nbsp;Text Search Functions and Operators">Section&nbsp;9.13</a> summarizes the related functions and operators.</p>
  <div class="sect2" id="DATATYPE-TSVECTOR">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">8.11.1.&nbsp;<code class="type">tsvector</code></h3>
        </div>
      </div>
    </div><a id="id-1.5.7.19.5.2" class="indexterm" name="id-1.5.7.19.5.2"></a>
    <p>A <code class="type">tsvector</code> value is a sorted list of distinct <em class="firstterm">lexemes</em>, which are words that have been <em class="firstterm">normalized</em> to merge different variants of the same word (see <a class="xref" href="textsearch.html" title="Chapter&nbsp;12.&nbsp;Full Text Search">Chapter&nbsp;12</a> for details). Sorting and duplicate-elimination are done automatically during input, as shown in this example:</p>
    <pre class="programlisting">
SELECT 'a fat cat sat on a mat and ate a fat rat'::tsvector;
                      tsvector
----------------------------------------------------
 'a' 'and' 'ate' 'cat' 'fat' 'mat' 'on' 'rat' 'sat'
</pre>
    <p>To represent lexemes containing whitespace or punctuation, surround them with quotes:</p>
    <pre class="programlisting">
SELECT $$the lexeme '    ' contains spaces$$::tsvector;
                 tsvector                  
-------------------------------------------
 '    ' 'contains' 'lexeme' 'spaces' 'the'
</pre>
    <p>(We use dollar-quoted string literals in this example and the next one to avoid the confusion of having to double quote marks within the literals.) Embedded quotes and backslashes must be doubled:</p>
    <pre class="programlisting">
SELECT $$the lexeme 'Joe''s' contains a quote$$::tsvector;
                    tsvector                    
------------------------------------------------
 'Joe''s' 'a' 'contains' 'lexeme' 'quote' 'the'
</pre>
    <p>Optionally, integer <em class="firstterm">positions</em> can be attached to lexemes:</p>
    <pre class="programlisting">
SELECT 'a:1 fat:2 cat:3 sat:4 on:5 a:6 mat:7 and:8 ate:9 a:10 fat:11 rat:12'::tsvector;
                                  tsvector
-------------------------------------------------------------------​------------
 'a':1,6,10 'and':8 'ate':9 'cat':3 'fat':2,11 'mat':7 'on':5 'rat':12 'sat':4
</pre>
    <p>A position normally indicates the source word's location in the document. Positional information can be used for <em class="firstterm">proximity ranking</em>. Position values can range from 1 to 16383; larger numbers are silently set to 16383. Duplicate positions for the same lexeme are discarded.</p>
    <p>Lexemes that have positions can further be labeled with a <em class="firstterm">weight</em>, which can be <code class="literal">A</code>, <code class="literal">B</code>, <code class="literal">C</code>, or <code class="literal">D</code>. <code class="literal">D</code> is the default and hence is not shown on output:</p>
    <pre class="programlisting">
SELECT 'a:1A fat:2B,4C cat:5D'::tsvector;
          tsvector          
----------------------------
 'a':1A 'cat':5 'fat':2B,4C
</pre>
    <p>Weights are typically used to reflect document structure, for example by marking title words differently from body words. Text search ranking functions can assign different priorities to the different weight markers.</p>
    <p>It is important to understand that the <code class="type">tsvector</code> type itself does not perform any word normalization; it assumes the words it is given are normalized appropriately for the application. For example,</p>
    <pre class="programlisting">
SELECT 'The Fat Rats'::tsvector;
      tsvector      
--------------------
 'Fat' 'Rats' 'The'
</pre>
    <p>For most English-text-searching applications the above words would be considered non-normalized, but <code class="type">tsvector</code> doesn't care. Raw document text should usually be passed through <code class="function">to_tsvector</code> to normalize the words appropriately for searching:</p>
    <pre class="programlisting">
SELECT to_tsvector('english', 'The Fat Rats');
   to_tsvector   
-----------------
 'fat':2 'rat':3
</pre>
    <p>Again, see <a class="xref" href="textsearch.html" title="Chapter&nbsp;12.&nbsp;Full Text Search">Chapter&nbsp;12</a> for more detail.</p>
  </div>
  <div class="sect2" id="DATATYPE-TSQUERY">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">8.11.2.&nbsp;<code class="type">tsquery</code></h3>
        </div>
      </div>
    </div><a id="id-1.5.7.19.6.2" class="indexterm" name="id-1.5.7.19.6.2"></a>
    <p>A <code class="type">tsquery</code> value stores lexemes that are to be searched for, and can combine them using the Boolean operators <code class="literal">&amp;</code> (AND), <code class="literal">|</code> (OR), and <code class="literal">!</code> (NOT), as well as the phrase search operator <code class="literal">&lt;-&gt;</code> (FOLLOWED BY). There is also a variant <code class="literal">&lt;<em class="replaceable"><code>N</code></em>&gt;</code> of the FOLLOWED BY operator, where <em class="replaceable"><code>N</code></em> is an integer constant that specifies the distance between the two lexemes being searched for. <code class="literal">&lt;-&gt;</code> is equivalent to <code class="literal">&lt;1&gt;</code>.</p>
    <p>Parentheses can be used to enforce grouping of these operators. In the absence of parentheses, <code class="literal">!</code> (NOT) binds most tightly, <code class="literal">&lt;-&gt;</code> (FOLLOWED BY) next most tightly, then <code class="literal">&amp;</code> (AND), with <code class="literal">|</code> (OR) binding the least tightly.</p>
    <p>Here are some examples:</p>
    <pre class="programlisting">
SELECT 'fat &amp; rat'::tsquery;
    tsquery    
---------------
 'fat' &amp; 'rat'

SELECT 'fat &amp; (rat | cat)'::tsquery;
          tsquery          
---------------------------
 'fat' &amp; ( 'rat' | 'cat' )

SELECT 'fat &amp; rat &amp; ! cat'::tsquery;
        tsquery         
------------------------
 'fat' &amp; 'rat' &amp; !'cat'
</pre>
    <p>Optionally, lexemes in a <code class="type">tsquery</code> can be labeled with one or more weight letters, which restricts them to match only <code class="type">tsvector</code> lexemes with one of those weights:</p>
    <pre class="programlisting">
SELECT 'fat:ab &amp; cat'::tsquery;
    tsquery
------------------
 'fat':AB &amp; 'cat'
</pre>
    <p>Also, lexemes in a <code class="type">tsquery</code> can be labeled with <code class="literal">*</code> to specify prefix matching:</p>
    <pre class="programlisting">
SELECT 'super:*'::tsquery;
  tsquery  
-----------
 'super':*
</pre>
    <p>This query will match any word in a <code class="type">tsvector</code> that begins with <span class="quote">“<span class="quote">super</span>”</span>.</p>
    <p>Quoting rules for lexemes are the same as described previously for lexemes in <code class="type">tsvector</code>; and, as with <code class="type">tsvector</code>, any required normalization of words must be done before converting to the <code class="type">tsquery</code> type. The <code class="function">to_tsquery</code> function is convenient for performing such normalization:</p>
    <pre class="programlisting">
SELECT to_tsquery('Fat:ab &amp; Cats');
    to_tsquery    
------------------
 'fat':AB &amp; 'cat'
</pre>
    <p>Note that <code class="function">to_tsquery</code> will process prefixes in the same way as other words, which means this comparison returns true:</p>
    <pre class="programlisting">
SELECT to_tsvector( 'postgraduate' ) @@ to_tsquery( 'postgres:*' );
 ?column?
----------
 t
</pre>
    <p>because <code class="literal">postgres</code> gets stemmed to <code class="literal">postgr</code>:</p>
    <pre class="programlisting">
SELECT to_tsvector( 'postgraduate' ), to_tsquery( 'postgres:*' );
  to_tsvector  | to_tsquery
---------------+------------
 'postgradu':1 | 'postgr':*
</pre>
    <p>which will match the stemmed form of <code class="literal">postgraduate</code>.</p>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="datatype-bit.html" title="8.10.&nbsp;Bit String Types">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="datatype.html" title="Chapter&nbsp;8.&nbsp;Data Types">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="datatype-uuid.html" title="8.12.&nbsp;UUID Type">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">8.10.&nbsp;Bit String Types&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;8.12.&nbsp;<acronym xmlns="http://www.w3.org/1999/xhtml" class="acronym">UUID</acronym> Type</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/datatype-textsearch.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
