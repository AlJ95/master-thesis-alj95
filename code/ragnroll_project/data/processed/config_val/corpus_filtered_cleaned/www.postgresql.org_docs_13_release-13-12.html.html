<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: E.9. Release 13.12</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/release-13-12.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="E.9. Release 13.12" />
  <meta property="og:description" content="E.9.&amp;nbsp;Release 13.12 E.9.1. Migration to Version 13.12 E.9.2. Changes Release date:&amp;nbsp;2023-08-10 This release contains a variety of fixes from 13.11. …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/13/release-13-12.html" title="PostgreSQL 13 - E.9. Release 13.12" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">E.9.&nbsp;Release 13.12</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="release-13-13.html" title="E.8.&nbsp;Release 13.13">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <th width="60%" align="center">Appendix&nbsp;E.&nbsp;Release Notes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="release-13-11.html" title="E.10.&nbsp;Release 13.11">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="RELEASE-13-12">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">E.9.&nbsp;Release 13.12</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="release-13-12.html#id-1.11.6.14.4">E.9.1. Migration to Version 13.12</a></span></dt>
      <dt><span class="sect2"><a href="release-13-12.html#id-1.11.6.14.5">E.9.2. Changes</a></span></dt>
    </dl>
  </div>
  <p><strong>Release date:&nbsp;</strong>2023-08-10</p>
  <p>This release contains a variety of fixes from 13.11. For information about new features in major release 13, see <a class="xref" href="release-13.html" title="E.21.&nbsp;Release 13">Section&nbsp;E.21</a>.</p>
  <div class="sect2" id="id-1.11.6.14.4">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.9.1.&nbsp;Migration to Version 13.12</h3>
        </div>
      </div>
    </div>
    <p>A dump/restore is not required for those running 13.X.</p>
    <p>However, if you use BRIN indexes, it may be advisable to reindex them; see the second changelog entry below.</p>
    <p>Also, if you are upgrading from a version earlier than 13.7, see <a class="xref" href="release-13-7.html" title="E.14.&nbsp;Release 13.7">Section&nbsp;E.14</a>.</p>
  </div>
  <div class="sect2" id="id-1.11.6.14.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">E.9.2.&nbsp;Changes</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Disallow substituting a schema or owner name into an extension script if the name contains a quote, backslash, or dollar sign (Noah Misch) <a class="ulink" href="https://postgr.es/c/b1b585e0f" target="_top">§</a></p>
          <p>This restriction guards against SQL-injection hazards for trusted extensions.</p>
          <p>The <span class="productname">PostgreSQL</span> Project thanks Micah Gates, Valerie Woolard, Tim Carey-Smith, and Christoph Berg for reporting this problem. (CVE-2023-39417)</p>
        </li>
        <li class="listitem">
          <p>Fix confusion between empty (no rows) ranges and all-NULL ranges in BRIN indexes, as well as incorrect merging of all-NULL summaries (Tomas Vondra) <a class="ulink" href="https://postgr.es/c/6c512fc6e" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/2b1ab28b9" target="_top">§</a></p>
          <p>Each of these oversights could result in forgetting that a BRIN index range contains any NULL values, potentially allowing subsequent queries that should return NULL values to miss doing so.</p>
          <p>This fix will not in itself correct faulty BRIN entries. It's recommended to <code class="command">REINDEX</code> any BRIN indexes that may be used to search for nulls.</p>
        </li>
        <li class="listitem">
          <p>Avoid leaving a corrupted database behind when <code class="command">DROP DATABASE</code> is interrupted (Andres Freund) <a class="ulink" href="https://postgr.es/c/81ce00006" target="_top">§</a></p>
          <p>If <code class="command">DROP DATABASE</code> was interrupted after it had already begun taking irreversible steps, the target database remained accessible (because the removal of its <code class="structname">pg_database</code> row would roll back), but it would have corrupt contents. Fix by marking the database as inaccessible before we begin to perform irreversible operations. A failure after that will leave the database still partially present, but nothing can be done with it except to issue another <code class="command">DROP DATABASE</code>.</p>
        </li>
        <li class="listitem">
          <p>Ensure that partitioned indexes are correctly marked as valid or not at creation (Michael Paquier) <a class="ulink" href="https://postgr.es/c/537b70b82" target="_top">§</a></p>
          <p>If a new partitioned index matches an existing but invalid index on one of the partitions, the partitioned index could end up being marked valid prematurely. This could lead to misbehavior or assertion failures in subsequent queries on the partitioned table.</p>
        </li>
        <li class="listitem">
          <p>Ignore invalid child indexes when matching partitioned indexes to child indexes during <code class="command">ALTER TABLE ATTACH PARTITION</code> (Michael Paquier) <a class="ulink" href="https://postgr.es/c/f42844069" target="_top">§</a></p>
          <p>Such an index will now be ignored, and a new child index created instead.</p>
        </li>
        <li class="listitem">
          <p>Fix possible failure when marking a partitioned index valid after all of its partitions have been attached (Michael Paquier) <a class="ulink" href="https://postgr.es/c/c89d74c18" target="_top">§</a></p>
          <p>The update of the index's <code class="structname">pg_index</code> entry could use stale data for other columns. One reported symptom is an <span class="quote">“<span class="quote">attempted to update invisible tuple</span>”</span> error.</p>
        </li>
        <li class="listitem">
          <p>Fix <code class="command">ALTER EXTENSION SET SCHEMA</code> to complain if the extension contains any objects outside the extension's schema (Michael Paquier, Heikki Linnakangas) <a class="ulink" href="https://postgr.es/c/f5b075adc" target="_top">§</a></p>
          <p>Erroring out if the extension contains objects in multiple schemas was always intended; but the check was mis-coded so that it would fail to detect some cases, leading to surprising behavior.</p>
        </li>
        <li class="listitem">
          <p>Don't use partial unique indexes for uniqueness proofs in the planner (David Rowley) <a class="ulink" href="https://postgr.es/c/06286f8a2" target="_top">§</a></p>
          <p>This could give rise to incorrect plans, since the presumed uniqueness of rows read from a table might not hold if the index in question isn't used to scan the table.</p>
        </li>
        <li class="listitem">
          <p>Avoid producing incorrect plans for foreign joins with pseudoconstant join clauses (Etsuro Fujita) <a class="ulink" href="https://postgr.es/c/730f983ef" target="_top">§</a></p>
          <p>The planner currently lacks support for attaching pseudoconstant join clauses to a pushed-down remote join, so disable generation of remote joins in such cases. (A better solution will require ABI-breaking changes of planner data structures, so it will have to wait for a future major release.)</p>
        </li>
        <li class="listitem">
          <p>Correctly handle sub-SELECTs in RLS policy expressions and security-barrier views when expanding rule actions (Tom Lane) <a class="ulink" href="https://postgr.es/c/a36d0014f" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix race conditions in conflict detection for <code class="literal">SERIALIZABLE</code> isolation mode (Thomas Munro) <a class="ulink" href="https://postgr.es/c/fc1547384" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/8976ac5c5" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/8f705d7b9" target="_top">§</a></p>
          <p>Conflicts could be missed when using bitmap heap scans, when using GIN indexes, and when examining an initially-empty btree index. All these cases could lead to serializability failures due to improperly allowing conflicting transactions to commit.</p>
        </li>
        <li class="listitem">
          <p>Fix hash join with an inner-side hash key that contains Params coming from an outer nested loop (Tom Lane) <a class="ulink" href="https://postgr.es/c/2f97105e9" target="_top">§</a></p>
          <p>When rescanning the join after the values of such Params have changed, we must rebuild the hash table, but neglected to do so. This could result in missing join output rows.</p>
        </li>
        <li class="listitem">
          <p>Fix intermittent failures when trying to update a field of a composite column (Tom Lane) <a class="ulink" href="https://postgr.es/c/d0ab203bc" target="_top">§</a></p>
          <p>If the overall value of the composite column is wide enough to require out-of-line toasting, then an unluckily-timed cache flush could cause errors or server crashes.</p>
        </li>
        <li class="listitem">
          <p>Prevent query-lifespan memory leaks in some <code class="command">UPDATE</code> queries with triggers (Tomas Vondra) <a class="ulink" href="https://postgr.es/c/c504aa857" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/984c23f6f" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Prevent query-lifespan memory leaks when an Incremental Sort plan node is rescanned (James Coleman, Laurenz Albe, Tom Lane) <a class="ulink" href="https://postgr.es/c/3ce761d5c" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Accept fractional seconds in the input to <code class="type">jsonpath</code>'s <code class="function">datetime()</code> method (Tom Lane) <a class="ulink" href="https://postgr.es/c/6f23b5f74" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Prevent stack-overflow crashes with very complex text search patterns (Tom Lane) <a class="ulink" href="https://postgr.es/c/b6ab18a99" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Allow tokens up to 10240 bytes long in <code class="filename">pg_hba.conf</code> and <code class="filename">pg_ident.conf</code> (Tom Lane) <a class="ulink" href="https://postgr.es/c/288b4288c" target="_top">§</a></p>
          <p>The previous limit of 256 bytes has been found insufficient for some use-cases.</p>
        </li>
        <li class="listitem">
          <p>Fix mishandling of C++ out-of-memory conditions (Heikki Linnakangas) <a class="ulink" href="https://postgr.es/c/59c2a6fe9" target="_top">§</a></p>
          <p>If JIT is in use, running out of memory in a C++ <code class="function">new</code> call would lead to a <span class="productname">PostgreSQL</span> FATAL error, instead of the expected C++ exception.</p>
        </li>
        <li class="listitem">
          <p>Fix rare null-pointer crash in <code class="filename">plancache.c</code> (Tom Lane) <a class="ulink" href="https://postgr.es/c/291c02540" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Avoid losing track of possibly-useful shared memory segments when a page free results in coalescing ranges of free space (Dongming Liu) <a class="ulink" href="https://postgr.es/c/a0003572f" target="_top">§</a></p>
          <p>Ensure that the segment is moved into the appropriate <span class="quote">“<span class="quote">bin</span>”</span> for its new amount of free space, so that it will be found by subsequent searches.</p>
        </li>
        <li class="listitem">
          <p>Allow <code class="command">VACUUM</code> to continue after detecting certain types of b-tree index corruption (Peter Geoghegan) <a class="ulink" href="https://postgr.es/c/b6311824f" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/8f876d15c" target="_top">§</a></p>
          <p>If an invalid sibling-page link is detected, log the issue and press on, rather than throwing an error as before. Nothing short of <code class="command">REINDEX</code> will fix the broken index, but preventing <code class="command">VACUUM</code> from completing until that is done risks making matters far worse.</p>
        </li>
        <li class="listitem">
          <p>Ensure that <code class="varname">WrapLimitsVacuumLock</code> is released after <code class="command">VACUUM</code> detects invalid data in <code class="structname">pg_database</code>.<code class="structfield">datfrozenxid</code> or <code class="structname">pg_database</code>.<code class="structfield">datminmxid</code> (Andres Freund) <a class="ulink" href="https://postgr.es/c/53336e8f6" target="_top">§</a></p>
          <p>Failure to release this lock could lead to a deadlock later, although the lock would be cleaned up if the session exits or encounters some other error.</p>
        </li>
        <li class="listitem">
          <p>Avoid double replay of prepared transactions during crash recovery (suyu.cmj, Michael Paquier) <a class="ulink" href="https://postgr.es/c/db59108a2" target="_top">§</a> <a class="ulink" href="https://postgr.es/c/b3ca4f0a5" target="_top">§</a></p>
          <p>After a crash partway through a checkpoint with some two-phase transaction state data already flushed to disk by this checkpoint, crash recovery could attempt to replay the prepared transaction(s) twice, leading to a fatal error such as <span class="quote">“<span class="quote">lock is already held</span>”</span> in the startup process.</p>
        </li>
        <li class="listitem">
          <p>Fix possible failure while promoting a standby server, if archiving is enabled and two-phase transactions need to be recovered (Julian Markwort) <a class="ulink" href="https://postgr.es/c/896012b88" target="_top">§</a></p>
          <p>If any required two-phase transactions were logged in the most recent (partial) log segment, promotion would fail with an incorrect complaint about <span class="quote">“<span class="quote">requested WAL segment has already been removed</span>”</span>.</p>
        </li>
        <li class="listitem">
          <p>Ensure that a newly created, but still empty table is <code class="function">fsync</code>'ed at the next checkpoint (Heikki Linnakangas) <a class="ulink" href="https://postgr.es/c/acc8cdff4" target="_top">§</a></p>
          <p>Without this, if there is an operating system crash causing the empty file to disappear, subsequent operations on the table might fail with <span class="quote">“<span class="quote">could not open file</span>”</span> errors.</p>
        </li>
        <li class="listitem">
          <p>Ensure that creation of the init fork of an unlogged index is WAL-logged (Heikki Linnakangas) <a class="ulink" href="https://postgr.es/c/c50b869ed" target="_top">§</a></p>
          <p>While an unlogged index's main data fork is not WAL-logged, its init fork should be, to ensure that we have a consistent state to restore the index to after a crash. This step was missed if the init fork contains no data, which is a case not used by any standard index AM; but perhaps some extension behaves that way.</p>
        </li>
        <li class="listitem">
          <p>Fix missing reinitializations of delay-checkpoint-end flags (suyu.cmj) <a class="ulink" href="https://postgr.es/c/37236ca06" target="_top">§</a></p>
          <p>This could result in unnecessary delays of checkpoints, or in assertion failures in assert-enabled builds.</p>
        </li>
        <li class="listitem">
          <p>Fix overly strict assertion in <code class="type">jsonpath</code> code (David Rowley) <a class="ulink" href="https://postgr.es/c/74a5bf1b6" target="_top">§</a></p>
          <p>This assertion failed if a query applied the <code class="literal">.type()</code> operator to a <code class="literal">like_regex</code> result. There was no bug in non-assert builds.</p>
        </li>
        <li class="listitem">
          <p>Avoid assertion failure when processing an empty statement via the extended query protocol in an already-aborted transaction (Tom Lane) <a class="ulink" href="https://postgr.es/c/d1fc0f382" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Fix <code class="filename">contrib/fuzzystrmatch</code>'s Soundex <code class="function">difference()</code> function to handle empty input sanely (Alexander Lakhin, Tom Lane) <a class="ulink" href="https://postgr.es/c/0409c7fc7" target="_top">§</a></p>
          <p>An input string containing no alphabetic characters resulted in unpredictable output.</p>
        </li>
        <li class="listitem">
          <p>Tighten whitespace checks in <code class="filename">contrib/hstore</code> input (Evan Jones) <a class="ulink" href="https://postgr.es/c/78bf0a256" target="_top">§</a></p>
          <p>In some cases, characters would be falsely recognized as whitespace and hence discarded.</p>
        </li>
        <li class="listitem">
          <p>Disallow oversize input arrays with <code class="filename">contrib/intarray</code>'s <code class="literal">gist__int_ops</code> index opclass (Ankit Kumar Pandey, Alexander Lakhin) <a class="ulink" href="https://postgr.es/c/ae9aac64a" target="_top">§</a></p>
          <p>Previously this code would report a <code class="literal">NOTICE</code> but press on anyway, creating an invalid index entry that presents a risk of crashes when the index is read.</p>
        </li>
        <li class="listitem">
          <p>Avoid useless double decompression of GiST index entries in <code class="filename">contrib/intarray</code> (Konstantin Knizhnik, Matthias van de Meent, Tom Lane) <a class="ulink" href="https://postgr.es/c/7fffcc2ee" target="_top">§</a></p>
        </li>
        <li class="listitem">
          <p>Ensure that <code class="structname">pg_index</code>.<code class="structfield">indisreplident</code> is kept up-to-date in relation cache entries (Shruthi Gowda) <a class="ulink" href="https://postgr.es/c/bdaaf1bf1" target="_top">§</a></p>
          <p>This value could be stale in some cases. There is no core code that relies on the relation cache's copy, so this is only a latent bug as far as Postgres itself is concerned; but there may be extensions for which it is a live bug.</p>
        </li>
        <li class="listitem">
          <p>Silence deprecation warnings when compiling with OpenSSL 3.0.0 or later (Peter Eisentraut) <a class="ulink" href="https://postgr.es/c/8aa9a2623" target="_top">§</a></p>
        </li>
      </ul>
    </div>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="release-13-13.html" title="E.8.&nbsp;Release 13.13">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="release.html" title="Appendix&nbsp;E.&nbsp;Release Notes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="release-13-11.html" title="E.10.&nbsp;Release 13.11">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">E.8.&nbsp;Release 13.13&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;E.10.&nbsp;Release 13.11</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/release-13-12.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
