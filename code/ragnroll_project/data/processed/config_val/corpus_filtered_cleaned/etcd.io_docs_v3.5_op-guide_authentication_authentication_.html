<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Authentication | etcd</title>
<meta name=description content="Guide to authenticating an etcd cluster"><meta property="og:url" content="https://etcd.io/docs/v3.5/op-guide/authentication/authentication/"><meta property="og:site_name" content="etcd"><meta property="og:title" content="Authentication"><meta property="og:description" content="Guide to authenticating an etcd cluster"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-11-19T08:50:11+05:30"><meta itemprop=name content="Authentication"><meta itemprop=description content="Guide to authenticating an etcd cluster"><meta itemprop=dateModified content="2021-11-19T08:50:11+05:30"><meta itemprop=wordCount content="136"><meta name=twitter:card content="summary"><meta name=twitter:title content="Authentication"><meta name=twitter:description content="Guide to authenticating an etcd cluster"></head><body class=td-page><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><h1>Authentication</h1><div class=lead>Guide to authenticating an etcd cluster</div><p><code>auth</code>,<code>user</code>,<code>role</code> for authentication:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>ETCDCTL_API</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span><span style=color:#000>ENDPOINTS</span><span style=color:#ce5c00;font-weight:700>=</span>localhost:2379
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> role add root
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> role get root
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> user add root
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> user grant-role root root
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> user get root
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> role add role0
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> role grant-permission role0 readwrite foo
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> user add user0
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> user grant-role user0 role0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> auth <span style=color:#204a87>enable</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># now all client requests go through auth</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> --user<span style=color:#ce5c00;font-weight:700>=</span>user0:123 put foo bar
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> get foo
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># permission denied, user name is empty because the request does not issue an authentication request</span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> --user<span style=color:#ce5c00;font-weight:700>=</span>user0:123 get foo
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># user0 can read the key foo</span>
</span></span><span style=display:flex><span>etcdctl --endpoints<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>ENDPOINTS</span><span style=color:#4e9a06>}</span> --user<span style=color:#ce5c00;font-weight:700>=</span>user0:123 get foo1
</span></span></code></pre></div><h3 id=note>Note:</h3><p>This is just a stub which needs to be filled and updated with more information on authentication. The text above is just a code example.</p><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/etcd-io/website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/etcd-io/website/issues/new>tell us how we can improve</a>.</p></div><br><div class=td-page-meta__lastmod>Last modified November 19, 2021: <a href=https://github.com/etcd-io/website/commit/ab234d4cee0002b64527f5c47fba60bd302c1f31>Made changes in the page hierarchy for Authentication and updated the redirect page accordingly (ab234d4)</a></div></div></main></div></div></div></body></html>