<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Benchmarking etcd v2.2.0-rc-memory | etcd</title>
<meta name=description content="Performance measures for etcd v2.2.0-rc-memory"><meta property="og:url" content="https://etcd.io/docs/v3.5/benchmarks/etcd-2-2-0-rc-memory-benchmarks/"><meta property="og:site_name" content="etcd"><meta property="og:title" content="Benchmarking etcd v2.2.0-rc-memory"><meta property="og:description" content="Performance measures for etcd v2.2.0-rc-memory"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-06-14T17:16:50+00:00"><meta itemprop=name content="Benchmarking etcd v2.2.0-rc-memory"><meta itemprop=description content="Performance measures for etcd v2.2.0-rc-memory"><meta itemprop=dateModified content="2021-06-14T17:16:50+00:00"><meta itemprop=wordCount content="207"><meta name=twitter:card content="summary"><meta name=twitter:title content="Benchmarking etcd v2.2.0-rc-memory"><meta name=twitter:description content="Performance measures for etcd v2.2.0-rc-memory"></head><body class=td-page><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><h1>Benchmarking etcd v2.2.0-rc-memory</h1><div class=lead>Performance measures for etcd v2.2.0-rc-memory</div><h2 id=physical-machine>Physical machine</h2><p>GCE n1-standard-2 machine type</p><ul><li>1x dedicated local SSD mounted under /var/lib/etcd</li><li>1x dedicated slow disk for the OS</li><li>7.5 GB memory</li><li>2x CPUs</li></ul><h2 id=etcd>etcd</h2><pre tabindex=0><code>etcd Version: 2.2.0-rc.0+git
Git SHA: 103cb5c
Go Version: go1.5
Go OS/Arch: linux/amd64
</code></pre><h2 id=testing>Testing</h2><p>Start 3-member etcd cluster, each of which uses 2 cores.</p><p>The length of key name is always 64 bytes, which is a reasonable length of average key bytes.</p><h2 id=memory-maximal-usage>Memory Maximal Usage</h2><ul><li>etcd may use maximal memory if one follower is dead and the leader keeps sending snapshots.</li><li><code>max RSS</code> is the maximal memory usage recorded in 3 runs.</li></ul><table><thead><tr><th>value bytes</th><th>key number</th><th>data size(MB)</th><th>max RSS(MB)</th><th>max RSS/data rate on leader</th></tr></thead><tbody><tr><td>128</td><td>50000</td><td>6</td><td>433</td><td>72x</td></tr><tr><td>128</td><td>100000</td><td>12</td><td>659</td><td>54x</td></tr><tr><td>128</td><td>200000</td><td>24</td><td>1466</td><td>61x</td></tr><tr><td>1024</td><td>50000</td><td>48</td><td>1253</td><td>26x</td></tr><tr><td>1024</td><td>100000</td><td>96</td><td>2344</td><td>24x</td></tr><tr><td>1024</td><td>200000</td><td>192</td><td>4361</td><td>22x</td></tr></tbody></table><h2 id=data-size-threshold>Data Size Threshold</h2><ul><li>When etcd reaches data size threshold, it may trigger leader election easily and drop part of proposals.</li><li>For most cases, the etcd cluster should work smoothly if it doesn&rsquo;t hit the threshold. If it doesn&rsquo;t work well due to insufficient resources, decrease its data size.</li></ul><table><thead><tr><th>value bytes</th><th>key number limitation</th><th>suggested data size threshold(MB)</th><th>consumed RSS(MB)</th></tr></thead><tbody><tr><td>128</td><td>400K</td><td>48</td><td>2400</td></tr><tr><td>1024</td><td>300K</td><td>292</td><td>6500</td></tr></tbody></table><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/etcd-io/website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/etcd-io/website/issues/new>tell us how we can improve</a>.</p></div><br><div class=td-page-meta__lastmod>Last modified June 14, 2021: <a href=https://github.com/etcd-io/website/commit/138926b5de44b5116fdbe63830eeaf73596e4c2c>Renaming content/en/next folder to content/en/v3.5. Updating redirects, links, and config as needed. (#363) (138926b)</a></div></div></main></div></div></div></body></html>