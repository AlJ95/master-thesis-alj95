<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 48.2. Logical Decoding Concepts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/logicaldecoding-explanation.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="48.2. Logical Decoding Concepts" />
  <meta property="og:description" content="48.2.&amp;nbsp;Logical Decoding Concepts 48.2.1. Logical Decoding 48.2.2. Replication Slots 48.2.3. Output Plugins 48.2.4. Exported Snapshots 48.2.1.&amp;nbsp;Logical Decoding Logical decoding is …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/logicaldecoding-explanation.html" title="PostgreSQL 17 - 48.2. Logical Decoding Concepts" >Current</a>
                          (<a href="/docs/17/logicaldecoding-explanation.html" title="PostgreSQL 17 - 48.2. Logical Decoding Concepts" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/logicaldecoding-explanation.html" title="PostgreSQL 16 - 48.2. Logical Decoding Concepts" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/logicaldecoding-explanation.html" title="PostgreSQL 15 - 48.2. Logical Decoding Concepts" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/logicaldecoding-explanation.html" title="PostgreSQL 14 - 48.2. Logical Decoding Concepts" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/logicaldecoding-explanation.html" title="PostgreSQL 13 - 48.2. Logical Decoding Concepts" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/logicaldecoding-explanation.html" title="PostgreSQL devel - 48.2. Logical Decoding Concepts"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/logicaldecoding-explanation.html" title="PostgreSQL 12 - 48.2. Logical Decoding Concepts"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/logicaldecoding-explanation.html" title="PostgreSQL 11 - 48.2. Logical Decoding Concepts"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/logicaldecoding-explanation.html" title="PostgreSQL 10 - 48.2. Logical Decoding Concepts"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/logicaldecoding-explanation.html" title="PostgreSQL 9.6 - 48.2. Logical Decoding Concepts"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/logicaldecoding-explanation.html" title="PostgreSQL 9.5 - 48.2. Logical Decoding Concepts"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/logicaldecoding-explanation.html" title="PostgreSQL 9.4 - 48.2. Logical Decoding Concepts"  rel="nofollow">9.4</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">48.2.&nbsp;Logical Decoding Concepts</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="logicaldecoding-example.html" title="48.1.&nbsp;Logical Decoding Examples">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="logicaldecoding.html" title="Chapter&nbsp;48.&nbsp;Logical Decoding">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;48.&nbsp;Logical Decoding</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="logicaldecoding-walsender.html" title="48.3.&nbsp;Streaming Replication Protocol Interface">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="LOGICALDECODING-EXPLANATION">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">48.2.&nbsp;Logical Decoding Concepts</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="logicaldecoding-explanation.html#id-1.8.14.8.2">48.2.1. Logical Decoding</a></span></dt>
      <dt><span class="sect2"><a href="logicaldecoding-explanation.html#LOGICALDECODING-REPLICATION-SLOTS">48.2.2. Replication Slots</a></span></dt>
      <dt><span class="sect2"><a href="logicaldecoding-explanation.html#id-1.8.14.8.4">48.2.3. Output Plugins</a></span></dt>
      <dt><span class="sect2"><a href="logicaldecoding-explanation.html#id-1.8.14.8.5">48.2.4. Exported Snapshots</a></span></dt>
    </dl>
  </div>
  <div class="sect2" id="id-1.8.14.8.2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">48.2.1.&nbsp;Logical Decoding</h3>
        </div>
      </div>
    </div><a id="id-1.8.14.8.2.2" class="indexterm" name="id-1.8.14.8.2.2"></a>
    <p>Logical decoding is the process of extracting all persistent changes to a database's tables into a coherent, easy to understand format which can be interpreted without detailed knowledge of the database's internal state.</p>
    <p>In <span class="productname">PostgreSQL</span>, logical decoding is implemented by decoding the contents of the <a class="link" href="wal.html" title="Chapter&nbsp;29.&nbsp;Reliability and the Write-Ahead Log">write-ahead log</a>, which describe changes on a storage level, into an application-specific form such as a stream of tuples or SQL statements.</p>
  </div>
  <div class="sect2" id="LOGICALDECODING-REPLICATION-SLOTS">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">48.2.2.&nbsp;Replication Slots</h3>
        </div>
      </div>
    </div><a id="id-1.8.14.8.3.2" class="indexterm" name="id-1.8.14.8.3.2"></a>
    <p>In the context of logical replication, a slot represents a stream of changes that can be replayed to a client in the order they were made on the origin server. Each slot streams a sequence of changes from a single database.</p>
    <div class="note">
      <h3 class="title">Note</h3>
      <p><span class="productname">PostgreSQL</span> also has streaming replication slots (see <a class="xref" href="warm-standby.html#STREAMING-REPLICATION" title="26.2.5.&nbsp;Streaming Replication">Section&nbsp;26.2.5</a>), but they are used somewhat differently there.</p>
    </div>
    <p>A replication slot has an identifier that is unique across all databases in a <span class="productname">PostgreSQL</span> cluster. Slots persist independently of the connection using them and are crash-safe.</p>
    <p>A logical slot will emit each change just once in normal operation. The current position of each slot is persisted only at checkpoint, so in the case of a crash the slot may return to an earlier LSN, which will then cause recent changes to be sent again when the server restarts. Logical decoding clients are responsible for avoiding ill effects from handling the same message more than once. Clients may wish to record the last LSN they saw when decoding and skip over any repeated data or (when using the replication protocol) request that decoding start from that LSN rather than letting the server determine the start point. The Replication Progress Tracking feature is designed for this purpose, refer to <a class="link" href="replication-origins.html" title="Chapter&nbsp;49.&nbsp;Replication Progress Tracking">replication origins</a>.</p>
    <p>Multiple independent slots may exist for a single database. Each slot has its own state, allowing different consumers to receive changes from different points in the database change stream. For most applications, a separate slot will be required for each consumer.</p>
    <p>A logical replication slot knows nothing about the state of the receiver(s). It's even possible to have multiple different receivers using the same slot at different times; they'll just get the changes following on from when the last receiver stopped consuming them. Only one receiver may consume changes from a slot at any given time.</p>
    <div class="caution">
      <h3 class="title">Caution</h3>
      <p>Replication slots persist across crashes and know nothing about the state of their consumer(s). They will prevent removal of required resources even when there is no connection using them. This consumes storage because neither required WAL nor required rows from the system catalogs can be removed by <code class="command">VACUUM</code> as long as they are required by a replication slot. In extreme cases this could cause the database to shut down to prevent transaction ID wraparound (see <a class="xref" href="routine-vacuuming.html#VACUUM-FOR-WRAPAROUND" title="24.1.5.&nbsp;Preventing Transaction ID Wraparound Failures">Section&nbsp;24.1.5</a>). So if a slot is no longer required it should be dropped.</p>
    </div>
  </div>
  <div class="sect2" id="id-1.8.14.8.4">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">48.2.3.&nbsp;Output Plugins</h3>
        </div>
      </div>
    </div>
    <p>Output plugins transform the data from the write-ahead log's internal representation into the format the consumer of a replication slot desires.</p>
  </div>
  <div class="sect2" id="id-1.8.14.8.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">48.2.4.&nbsp;Exported Snapshots</h3>
        </div>
      </div>
    </div>
    <p>When a new replication slot is created using the streaming replication interface (see <a class="xref" href="protocol-replication.html#PROTOCOL-REPLICATION-CREATE-SLOT">CREATE_REPLICATION_SLOT</a>), a snapshot is exported (see <a class="xref" href="functions-admin.html#FUNCTIONS-SNAPSHOT-SYNCHRONIZATION" title="9.27.5.&nbsp;Snapshot Synchronization Functions">Section&nbsp;9.27.5</a>), which will show exactly the state of the database after which all changes will be included in the change stream. This can be used to create a new replica by using <a class="link" href="sql-set-transaction.html" title="SET TRANSACTION"><code class="literal">SET TRANSACTION SNAPSHOT</code></a> to read the state of the database at the moment the slot was created. This transaction can then be used to dump the database's state at that point in time, which afterwards can be updated using the slot's contents without losing any changes.</p>
    <p>Creation of a snapshot is not always possible. In particular, it will fail when connected to a hot standby. Applications that do not require snapshot export may suppress it with the <code class="literal">NOEXPORT_SNAPSHOT</code> option.</p>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="logicaldecoding-example.html" title="48.1.&nbsp;Logical Decoding Examples">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="logicaldecoding.html" title="Chapter&nbsp;48.&nbsp;Logical Decoding">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="logicaldecoding-walsender.html" title="48.3.&nbsp;Streaming Replication Protocol Interface">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">48.1.&nbsp;Logical Decoding Examples&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;48.3.&nbsp;Streaming Replication Protocol Interface</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/logicaldecoding-explanation.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
