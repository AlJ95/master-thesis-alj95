<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 11.10. Operator Classes and Operator Families</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/indexes-opclass.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="11.10. Operator Classes and Operator Families" />
  <meta property="og:description" content="11.10.&amp;nbsp;Operator Classes and Operator Families An index definition can specify an operator class for each column of an index. CREATE …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/indexes-opclass.html" title="PostgreSQL 17 - 11.10. Operator Classes and Operator Families" >Current</a>
                          (<a href="/docs/17/indexes-opclass.html" title="PostgreSQL 17 - 11.10. Operator Classes and Operator Families" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/indexes-opclass.html" title="PostgreSQL 16 - 11.10. Operator Classes and Operator Families" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/indexes-opclass.html" title="PostgreSQL 15 - 11.10. Operator Classes and Operator Families" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/indexes-opclass.html" title="PostgreSQL 14 - 11.10. Operator Classes and Operator Families" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/indexes-opclass.html" title="PostgreSQL 13 - 11.10. Operator Classes and Operator Families" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/indexes-opclass.html" title="PostgreSQL devel - 11.10. Operator Classes and Operator Families"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/indexes-opclass.html" title="PostgreSQL 12 - 11.10. Operator Classes and Operator Families"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/indexes-opclass.html" title="PostgreSQL 11 - 11.10. Operator Classes and Operator Families"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/indexes-opclass.html" title="PostgreSQL 10 - 11.10. Operator Classes and Operator Families"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/indexes-opclass.html" title="PostgreSQL 9.6 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/indexes-opclass.html" title="PostgreSQL 9.5 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/indexes-opclass.html" title="PostgreSQL 9.4 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/indexes-opclass.html" title="PostgreSQL 9.3 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/indexes-opclass.html" title="PostgreSQL 9.2 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/indexes-opclass.html" title="PostgreSQL 9.1 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/indexes-opclass.html" title="PostgreSQL 9.0 - 11.10. Operator Classes and Operator Families"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/indexes-opclass.html" title="PostgreSQL 8.4 - 11.10. Operator Classes and Operator Families"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/indexes-opclass.html" title="PostgreSQL 8.3 - 11.10. Operator Classes and Operator Families"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/indexes-opclass.html" title="PostgreSQL 8.2 - 11.10. Operator Classes and Operator Families"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/indexes-opclass.html" title="PostgreSQL 8.1 - 11.10. Operator Classes and Operator Families"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/indexes-opclass.html" title="PostgreSQL 8.0 - 11.10. Operator Classes and Operator Families"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/indexes-opclass.html" title="PostgreSQL 7.4 - 11.10. Operator Classes and Operator Families"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/indexes-opclass.html" title="PostgreSQL 7.3 - 11.10. Operator Classes and Operator Families"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/indexes-opclass.html" title="PostgreSQL 7.2 - 11.10. Operator Classes and Operator Families"  rel="nofollow">7.2</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">11.10.&nbsp;Operator Classes and Operator Families</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="indexes-index-only-scans.html" title="11.9.&nbsp;Index-Only Scans and Covering Indexes">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="indexes.html" title="Chapter&nbsp;11.&nbsp;Indexes">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;11.&nbsp;Indexes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="indexes-collations.html" title="11.11.&nbsp;Indexes and Collations">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="INDEXES-OPCLASS">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">11.10.&nbsp;Operator Classes and Operator Families</h2>
      </div>
    </div>
  </div><a id="id-1.5.10.13.2" class="indexterm" name="id-1.5.10.13.2"></a><a id="id-1.5.10.13.3" class="indexterm" name="id-1.5.10.13.3"></a>
  <p>An index definition can specify an <em class="firstterm">operator class</em> for each column of an index.</p>
  <pre class="synopsis">
CREATE INDEX <em class="replaceable"><code>name</code></em> ON <em class="replaceable"><code>table</code></em> (<em class="replaceable"><code>column</code></em> <em class="replaceable"><code>opclass</code></em> [ ( <em class="replaceable"><code>opclass_options</code></em> ) ] [<span class="optional"><em class="replaceable"><code>sort options</code></em></span>] [<span class="optional">, ...</span>]);
</pre>
  <p>The operator class identifies the operators to be used by the index for that column. For example, a B-tree index on the type <code class="type">int4</code> would use the <code class="literal">int4_ops</code> class; this operator class includes comparison functions for values of type <code class="type">int4</code>. In practice the default operator class for the column's data type is usually sufficient. The main reason for having operator classes is that for some data types, there could be more than one meaningful index behavior. For example, we might want to sort a complex-number data type either by absolute value or by real part. We could do this by defining two operator classes for the data type and then selecting the proper class when making an index. The operator class determines the basic sort ordering (which can then be modified by adding sort options <code class="literal">COLLATE</code>, <code class="literal">ASC</code>/<code class="literal">DESC</code> and/or <code class="literal">NULLS FIRST</code>/<code class="literal">NULLS LAST</code>).</p>
  <p>There are also some built-in operator classes besides the default ones:</p>
  <div class="itemizedlist">
    <ul class="itemizedlist" style="list-style-type: disc;">
      <li class="listitem">
        <p>The operator classes <code class="literal">text_pattern_ops</code>, <code class="literal">varchar_pattern_ops</code>, and <code class="literal">bpchar_pattern_ops</code> support B-tree indexes on the types <code class="type">text</code>, <code class="type">varchar</code>, and <code class="type">char</code> respectively. The difference from the default operator classes is that the values are compared strictly character by character rather than according to the locale-specific collation rules. This makes these operator classes suitable for use by queries involving pattern matching expressions (<code class="literal">LIKE</code> or POSIX regular expressions) when the database does not use the standard <span class="quote">“<span class="quote">C</span>”</span> locale. As an example, you might index a <code class="type">varchar</code> column like this:</p>
        <pre class="programlisting">
CREATE INDEX test_index ON test_table (col varchar_pattern_ops);
</pre>
        <p>Note that you should also create an index with the default operator class if you want queries involving ordinary <code class="literal">&lt;</code>, <code class="literal">&lt;=</code>, <code class="literal">&gt;</code>, or <code class="literal">&gt;=</code> comparisons to use an index. Such queries cannot use the <code class="literal"><em class="replaceable"><code>xxx</code></em>_pattern_ops</code> operator classes. (Ordinary equality comparisons can use these operator classes, however.) It is possible to create multiple indexes on the same column with different operator classes. If you do use the C locale, you do not need the <code class="literal"><em class="replaceable"><code>xxx</code></em>_pattern_ops</code> operator classes, because an index with the default operator class is usable for pattern-matching queries in the C locale.</p>
      </li>
    </ul>
  </div>
  <p>The following query shows all defined operator classes:</p>
  <pre class="programlisting">
SELECT am.amname AS index_method,
       opc.opcname AS opclass_name,
       opc.opcintype::regtype AS indexed_type,
       opc.opcdefault AS is_default
    FROM pg_am am, pg_opclass opc
    WHERE opc.opcmethod = am.oid
    ORDER BY index_method, opclass_name;
</pre>
  <p>An operator class is actually just a subset of a larger structure called an <em class="firstterm">operator family</em>. In cases where several data types have similar behaviors, it is frequently useful to define cross-data-type operators and allow these to work with indexes. To do this, the operator classes for each of the types must be grouped into the same operator family. The cross-type operators are members of the family, but are not associated with any single class within the family.</p>
  <p>This expanded version of the previous query shows the operator family each operator class belongs to:</p>
  <pre class="programlisting">
SELECT am.amname AS index_method,
       opc.opcname AS opclass_name,
       opf.opfname AS opfamily_name,
       opc.opcintype::regtype AS indexed_type,
       opc.opcdefault AS is_default
    FROM pg_am am, pg_opclass opc, pg_opfamily opf
    WHERE opc.opcmethod = am.oid AND
          opc.opcfamily = opf.oid
    ORDER BY index_method, opclass_name;
</pre>
  <p>This query shows all defined operator families and all the operators included in each family:</p>
  <pre class="programlisting">
SELECT am.amname AS index_method,
       opf.opfname AS opfamily_name,
       amop.amopopr::regoperator AS opfamily_operator
    FROM pg_am am, pg_opfamily opf, pg_amop amop
    WHERE opf.opfmethod = am.oid AND
          amop.amopfamily = opf.oid
    ORDER BY index_method, opfamily_name, opfamily_operator;
</pre>
  <div class="tip">
    <h3 class="title">Tip</h3>
    <p><a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a> has commands <code class="command">\dAc</code>, <code class="command">\dAf</code>, and <code class="command">\dAo</code>, which provide slightly more sophisticated versions of these queries.</p>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="indexes-index-only-scans.html" title="11.9.&nbsp;Index-Only Scans and Covering Indexes">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="indexes.html" title="Chapter&nbsp;11.&nbsp;Indexes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="indexes-collations.html" title="11.11.&nbsp;Indexes and Collations">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">11.9.&nbsp;Index-Only Scans and Covering Indexes&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;11.11.&nbsp;Indexes and Collations</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/indexes-opclass.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
