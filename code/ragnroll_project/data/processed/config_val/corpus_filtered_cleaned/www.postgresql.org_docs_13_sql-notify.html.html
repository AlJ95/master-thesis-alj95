<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: NOTIFY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/sql-notify.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="NOTIFY" />
  <meta property="og:description" content="NOTIFY NOTIFY — generate a notification Synopsis NOTIFY channel [ , payload ] Description The NOTIFY command sends a notification …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/sql-notify.html" title="PostgreSQL 17 - NOTIFY" >Current</a>
                          (<a href="/docs/17/sql-notify.html" title="PostgreSQL 17 - NOTIFY" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/sql-notify.html" title="PostgreSQL 16 - NOTIFY" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/sql-notify.html" title="PostgreSQL 15 - NOTIFY" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/sql-notify.html" title="PostgreSQL 14 - NOTIFY" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/sql-notify.html" title="PostgreSQL 13 - NOTIFY" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/sql-notify.html" title="PostgreSQL devel - NOTIFY"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/sql-notify.html" title="PostgreSQL 12 - NOTIFY"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/sql-notify.html" title="PostgreSQL 11 - NOTIFY"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/sql-notify.html" title="PostgreSQL 10 - NOTIFY"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/sql-notify.html" title="PostgreSQL 9.6 - NOTIFY"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/sql-notify.html" title="PostgreSQL 9.5 - NOTIFY"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/sql-notify.html" title="PostgreSQL 9.4 - NOTIFY"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/sql-notify.html" title="PostgreSQL 9.3 - NOTIFY"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/sql-notify.html" title="PostgreSQL 9.2 - NOTIFY"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/sql-notify.html" title="PostgreSQL 9.1 - NOTIFY"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/sql-notify.html" title="PostgreSQL 9.0 - NOTIFY"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/sql-notify.html" title="PostgreSQL 8.4 - NOTIFY"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/sql-notify.html" title="PostgreSQL 8.3 - NOTIFY"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/sql-notify.html" title="PostgreSQL 8.2 - NOTIFY"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/sql-notify.html" title="PostgreSQL 8.1 - NOTIFY"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/sql-notify.html" title="PostgreSQL 8.0 - NOTIFY"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/sql-notify.html" title="PostgreSQL 7.4 - NOTIFY"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/sql-notify.html" title="PostgreSQL 7.3 - NOTIFY"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/sql-notify.html" title="PostgreSQL 7.2 - NOTIFY"  rel="nofollow">7.2</a>
                    
                       / 
                      <a href="/docs/7.1/sql-notify.html" title="PostgreSQL 7.1 - NOTIFY"  rel="nofollow">7.1</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">NOTIFY</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="sql-move.html" title="MOVE">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <th width="60%" align="center">SQL Commands</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="sql-prepare.html" title="PREPARE">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SQL-NOTIFY">
  <div class="titlepage"></div><a id="id-1.9.3.157.1" class="indexterm" name="id-1.9.3.157.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">NOTIFY</span></h2>
    <p>NOTIFY — generate a notification</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
NOTIFY <em class="replaceable"><code>channel</code></em> [ , <em class="replaceable"><code>payload</code></em> ]
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.157.5">
    <h2>Description</h2>
    <p>The <code class="command">NOTIFY</code> command sends a notification event together with an optional <span class="quote">“<span class="quote">payload</span>”</span> string to each client application that has previously executed <code class="command">LISTEN <em class="replaceable"><code>channel</code></em></code> for the specified channel name in the current database. Notifications are visible to all users.</p>
    <p><code class="command">NOTIFY</code> provides a simple interprocess communication mechanism for a collection of processes accessing the same <span class="productname">PostgreSQL</span> database. A payload string can be sent along with the notification, and higher-level mechanisms for passing structured data can be built by using tables in the database to pass additional data from notifier to listener(s).</p>
    <p>The information passed to the client for a notification event includes the notification channel name, the notifying session's server process <acronym class="acronym">PID</acronym>, and the payload string, which is an empty string if it has not been specified.</p>
    <p>It is up to the database designer to define the channel names that will be used in a given database and what each one means. Commonly, the channel name is the same as the name of some table in the database, and the notify event essentially means, <span class="quote">“<span class="quote">I changed this table, take a look at it to see what's new</span>”</span>. But no such association is enforced by the <code class="command">NOTIFY</code> and <code class="command">LISTEN</code> commands. For example, a database designer could use several different channel names to signal different sorts of changes to a single table. Alternatively, the payload string could be used to differentiate various cases.</p>
    <p>When <code class="command">NOTIFY</code> is used to signal the occurrence of changes to a particular table, a useful programming technique is to put the <code class="command">NOTIFY</code> in a statement trigger that is triggered by table updates. In this way, notification happens automatically when the table is changed, and the application programmer cannot accidentally forget to do it.</p>
    <p><code class="command">NOTIFY</code> interacts with SQL transactions in some important ways. Firstly, if a <code class="command">NOTIFY</code> is executed inside a transaction, the notify events are not delivered until and unless the transaction is committed. This is appropriate, since if the transaction is aborted, all the commands within it have had no effect, including <code class="command">NOTIFY</code>. But it can be disconcerting if one is expecting the notification events to be delivered immediately. Secondly, if a listening session receives a notification signal while it is within a transaction, the notification event will not be delivered to its connected client until just after the transaction is completed (either committed or aborted). Again, the reasoning is that if a notification were delivered within a transaction that was later aborted, one would want the notification to be undone somehow — but the server cannot <span class="quote">“<span class="quote">take back</span>”</span> a notification once it has sent it to the client. So notification events are only delivered between transactions. The upshot of this is that applications using <code class="command">NOTIFY</code> for real-time signaling should try to keep their transactions short.</p>
    <p>If the same channel name is signaled multiple times with identical payload strings within the same transaction, only one instance of the notification event is delivered to listeners. On the other hand, notifications with distinct payload strings will always be delivered as distinct notifications. Similarly, notifications from different transactions will never get folded into one notification. Except for dropping later instances of duplicate notifications, <code class="command">NOTIFY</code> guarantees that notifications from the same transaction get delivered in the order they were sent. It is also guaranteed that messages from different transactions are delivered in the order in which the transactions committed.</p>
    <p>It is common for a client that executes <code class="command">NOTIFY</code> to be listening on the same notification channel itself. In that case it will get back a notification event, just like all the other listening sessions. Depending on the application logic, this could result in useless work, for example, reading a database table to find the same updates that that session just wrote out. It is possible to avoid such extra work by noticing whether the notifying session's server process <acronym class="acronym">PID</acronym> (supplied in the notification event message) is the same as one's own session's <acronym class="acronym">PID</acronym> (available from <span class="application">libpq</span>). When they are the same, the notification event is one's own work bouncing back, and can be ignored.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.157.6">
    <h2>Parameters</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="replaceable"><code>channel</code></em></span></dt>
        <dd>
          <p>Name of the notification channel to be signaled (any identifier).</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>payload</code></em></span></dt>
        <dd>
          <p>The <span class="quote">“<span class="quote">payload</span>”</span> string to be communicated along with the notification. This must be specified as a simple string literal. In the default configuration it must be shorter than 8000 bytes. (If binary data or large amounts of information need to be communicated, it's best to put it in a database table and send the key of the record.)</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.9.3.157.7">
    <h2>Notes</h2>
    <p>There is a queue that holds notifications that have been sent but not yet processed by all listening sessions. If this queue becomes full, transactions calling <code class="command">NOTIFY</code> will fail at commit. The queue is quite large (8GB in a standard installation) and should be sufficiently sized for almost every use case. However, no cleanup can take place if a session executes <code class="command">LISTEN</code> and then enters a transaction for a very long time. Once the queue is half full you will see warnings in the log file pointing you to the session that is preventing cleanup. In this case you should make sure that this session ends its current transaction so that cleanup can proceed.</p>
    <p>The function <code class="function">pg_notification_queue_usage</code> returns the fraction of the queue that is currently occupied by pending notifications. See <a class="xref" href="functions-info.html" title="9.26.&nbsp;System Information Functions and Operators">Section&nbsp;9.26</a> for more information.</p>
    <p>A transaction that has executed <code class="command">NOTIFY</code> cannot be prepared for two-phase commit.</p>
    <div class="refsect2" id="id-1.9.3.157.7.5">
      <h3>pg_notify</h3><a id="id-1.9.3.157.7.5.2" class="indexterm" name="id-1.9.3.157.7.5.2"></a>
      <p>To send a notification you can also use the function <code class="literal"><code class="function">pg_notify</code>(<code class="type">text</code>, <code class="type">text</code>)</code>. The function takes the channel name as the first argument and the payload as the second. The function is much easier to use than the <code class="command">NOTIFY</code> command if you need to work with non-constant channel names and payloads.</p>
    </div>
  </div>
  <div class="refsect1" id="id-1.9.3.157.8">
    <h2>Examples</h2>
    <p>Configure and execute a listen/notify sequence from <span class="application">psql</span>:</p>
    <pre class="programlisting">
LISTEN virtual;
NOTIFY virtual;
Asynchronous notification "virtual" received from server process with PID 8448.
NOTIFY virtual, 'This is the payload';
Asynchronous notification "virtual" with payload "This is the payload" received from server process with PID 8448.

LISTEN foo;
SELECT pg_notify('fo' || 'o', 'pay' || 'load');
Asynchronous notification "foo" with payload "payload" received from server process with PID 14728.
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.157.9">
    <h2>Compatibility</h2>
    <p>There is no <code class="command">NOTIFY</code> statement in the SQL standard.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.157.10">
    <h2>See Also</h2><span class="simplelist"><a class="xref" href="sql-listen.html" title="LISTEN"><span class="refentrytitle">LISTEN</span></a>, <a class="xref" href="sql-unlisten.html" title="UNLISTEN"><span class="refentrytitle">UNLISTEN</span></a></span>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="sql-move.html" title="MOVE">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="sql-prepare.html" title="PREPARE">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">MOVE&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;PREPARE</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/sql-notify.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
