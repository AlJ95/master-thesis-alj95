<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: CREATE TABLE AS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/sql-createtableas.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="CREATE TABLE AS" />
  <meta property="og:description" content="CREATE TABLE AS CREATE TABLE AS — define a new table from the results of a query Synopsis CREATE [ …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/sql-createtableas.html" title="PostgreSQL 17 - CREATE TABLE AS" >Current</a>
                          (<a href="/docs/17/sql-createtableas.html" title="PostgreSQL 17 - CREATE TABLE AS" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/sql-createtableas.html" title="PostgreSQL 16 - CREATE TABLE AS" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/sql-createtableas.html" title="PostgreSQL 15 - CREATE TABLE AS" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/sql-createtableas.html" title="PostgreSQL 14 - CREATE TABLE AS" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/sql-createtableas.html" title="PostgreSQL 13 - CREATE TABLE AS" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/sql-createtableas.html" title="PostgreSQL devel - CREATE TABLE AS"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/sql-createtableas.html" title="PostgreSQL 12 - CREATE TABLE AS"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/sql-createtableas.html" title="PostgreSQL 11 - CREATE TABLE AS"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/sql-createtableas.html" title="PostgreSQL 10 - CREATE TABLE AS"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/sql-createtableas.html" title="PostgreSQL 9.6 - CREATE TABLE AS"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/sql-createtableas.html" title="PostgreSQL 9.5 - CREATE TABLE AS"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/sql-createtableas.html" title="PostgreSQL 9.4 - CREATE TABLE AS"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/sql-createtableas.html" title="PostgreSQL 9.3 - CREATE TABLE AS"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/sql-createtableas.html" title="PostgreSQL 9.2 - CREATE TABLE AS"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/sql-createtableas.html" title="PostgreSQL 9.1 - CREATE TABLE AS"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/sql-createtableas.html" title="PostgreSQL 9.0 - CREATE TABLE AS"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/sql-createtableas.html" title="PostgreSQL 8.4 - CREATE TABLE AS"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/sql-createtableas.html" title="PostgreSQL 8.3 - CREATE TABLE AS"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/sql-createtableas.html" title="PostgreSQL 8.2 - CREATE TABLE AS"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/sql-createtableas.html" title="PostgreSQL 8.1 - CREATE TABLE AS"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/sql-createtableas.html" title="PostgreSQL 8.0 - CREATE TABLE AS"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/sql-createtableas.html" title="PostgreSQL 7.4 - CREATE TABLE AS"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/sql-createtableas.html" title="PostgreSQL 7.3 - CREATE TABLE AS"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/sql-createtableas.html" title="PostgreSQL 7.2 - CREATE TABLE AS"  rel="nofollow">7.2</a>
                    
                       / 
                      <a href="/docs/7.1/sql-createtableas.html" title="PostgreSQL 7.1 - CREATE TABLE AS"  rel="nofollow">7.1</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">CREATE TABLE AS</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="sql-createtable.html" title="CREATE TABLE">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <th width="60%" align="center">SQL Commands</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="sql-createtablespace.html" title="CREATE TABLESPACE">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SQL-CREATETABLEAS">
  <div class="titlepage"></div><a id="id-1.9.3.86.1" class="indexterm" name="id-1.9.3.86.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">CREATE TABLE AS</span></h2>
    <p>CREATE TABLE AS — define a new table from the results of a query</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] <em class="replaceable"><code>table_name</code></em>
    [ (<em class="replaceable"><code>column_name</code></em> [, ...] ) ]
    [ USING <em class="replaceable"><code>method</code></em> ]
    [ WITH ( <em class="replaceable"><code>storage_parameter</code></em> [= <em class="replaceable"><code>value</code></em>] [, ... ] ) | WITHOUT OIDS ]
    [ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
    [ TABLESPACE <em class="replaceable"><code>tablespace_name</code></em> ]
    AS <em class="replaceable"><code>query</code></em>
    [ WITH [ NO ] DATA ]
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.86.5">
    <h2>Description</h2>
    <p><code class="command">CREATE TABLE AS</code> creates a table and fills it with data computed by a <code class="command">SELECT</code> command. The table columns have the names and data types associated with the output columns of the <code class="command">SELECT</code> (except that you can override the column names by giving an explicit list of new column names).</p>
    <p><code class="command">CREATE TABLE AS</code> bears some resemblance to creating a view, but it is really quite different: it creates a new table and evaluates the query just once to fill the new table initially. The new table will not track subsequent changes to the source tables of the query. In contrast, a view re-evaluates its defining <code class="command">SELECT</code> statement whenever it is queried.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.86.6">
    <h2>Parameters</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><code class="literal">GLOBAL</code> or <code class="literal">LOCAL</code></span></dt>
        <dd>
          <p>Ignored for compatibility. Use of these keywords is deprecated; refer to <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a> for details.</p>
        </dd>
      </dl>
    </div>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><code class="literal">TEMPORARY</code> or <code class="literal">TEMP</code></span></dt>
        <dd>
          <p>If specified, the table is created as a temporary table. Refer to <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a> for details.</p>
        </dd>
        <dt><span class="term"><code class="literal">UNLOGGED</code></span></dt>
        <dd>
          <p>If specified, the table is created as an unlogged table. Refer to <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a> for details.</p>
        </dd>
        <dt><span class="term"><code class="literal">IF NOT EXISTS</code></span></dt>
        <dd>
          <p>Do not throw an error if a relation with the same name already exists; simply issue a notice and leave the table unmodified.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>table_name</code></em></span></dt>
        <dd>
          <p>The name (optionally schema-qualified) of the table to be created.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>column_name</code></em></span></dt>
        <dd>
          <p>The name of a column in the new table. If column names are not provided, they are taken from the output column names of the query.</p>
        </dd>
        <dt><span class="term"><code class="literal">USING <em class="replaceable"><code>method</code></em></code></span></dt>
        <dd>
          <p>This optional clause specifies the table access method to use to store the contents for the new table; the method needs be an access method of type <code class="literal">TABLE</code>. See <a class="xref" href="tableam.html" title="Chapter&nbsp;60.&nbsp;Table Access Method Interface Definition">Chapter&nbsp;60</a> for more information. If this option is not specified, the default table access method is chosen for the new table. See <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLE-ACCESS-METHOD">default_table_access_method</a> for more information.</p>
        </dd>
        <dt><span class="term"><code class="literal">WITH ( <em class="replaceable"><code>storage_parameter</code></em> [= <em class="replaceable"><code>value</code></em>] [, ... ] )</code></span></dt>
        <dd>
          <p>This clause specifies optional storage parameters for the new table; see <a class="xref" href="sql-createtable.html#SQL-CREATETABLE-STORAGE-PARAMETERS" title="Storage Parameters">Storage Parameters</a> in the <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a> documentation for more information. For backward-compatibility the <code class="literal">WITH</code> clause for a table can also include <code class="literal">OIDS=FALSE</code> to specify that rows of the new table should contain no OIDs (object identifiers), <code class="literal">OIDS=TRUE</code> is not supported anymore.</p>
        </dd>
        <dt><span class="term"><code class="literal">WITHOUT OIDS</code></span></dt>
        <dd>
          <p>This is backward-compatible syntax for declaring a table <code class="literal">WITHOUT OIDS</code>, creating a table <code class="literal">WITH OIDS</code> is not supported anymore.</p>
        </dd>
        <dt><span class="term"><code class="literal">ON COMMIT</code></span></dt>
        <dd>
          <p>The behavior of temporary tables at the end of a transaction block can be controlled using <code class="literal">ON COMMIT</code>. The three options are:</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><span class="term"><code class="literal">PRESERVE ROWS</code></span></dt>
              <dd>
                <p>No special action is taken at the ends of transactions. This is the default behavior.</p>
              </dd>
              <dt><span class="term"><code class="literal">DELETE ROWS</code></span></dt>
              <dd>
                <p>All rows in the temporary table will be deleted at the end of each transaction block. Essentially, an automatic <a class="xref" href="sql-truncate.html" title="TRUNCATE"><span class="refentrytitle">TRUNCATE</span></a> is done at each commit.</p>
              </dd>
              <dt><span class="term"><code class="literal">DROP</code></span></dt>
              <dd>
                <p>The temporary table will be dropped at the end of the current transaction block.</p>
              </dd>
            </dl>
          </div>
        </dd>
        <dt><span class="term"><code class="literal">TABLESPACE <em class="replaceable"><code>tablespace_name</code></em></code></span></dt>
        <dd>
          <p>The <em class="replaceable"><code>tablespace_name</code></em> is the name of the tablespace in which the new table is to be created. If not specified, <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLESPACE">default_tablespace</a> is consulted, or <a class="xref" href="runtime-config-client.html#GUC-TEMP-TABLESPACES">temp_tablespaces</a> if the table is temporary.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>query</code></em></span></dt>
        <dd>
          <p>A <a class="xref" href="sql-select.html" title="SELECT"><span class="refentrytitle">SELECT</span></a>, <a class="link" href="sql-select.html#SQL-TABLE" title="TABLE Command">TABLE</a>, or <a class="xref" href="sql-values.html" title="VALUES"><span class="refentrytitle">VALUES</span></a> command, or an <a class="xref" href="sql-execute.html" title="EXECUTE"><span class="refentrytitle">EXECUTE</span></a> command that runs a prepared <code class="command">SELECT</code>, <code class="command">TABLE</code>, or <code class="command">VALUES</code> query.</p>
        </dd>
        <dt><span class="term"><code class="literal">WITH [ NO ] DATA</code></span></dt>
        <dd>
          <p>This clause specifies whether or not the data produced by the query should be copied into the new table. If not, only the table structure is copied. The default is to copy the data.</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.9.3.86.7">
    <h2>Notes</h2>
    <p>This command is functionally similar to <a class="xref" href="sql-selectinto.html" title="SELECT INTO"><span class="refentrytitle">SELECT INTO</span></a>, but it is preferred since it is less likely to be confused with other uses of the <code class="command">SELECT INTO</code> syntax. Furthermore, <code class="command">CREATE TABLE AS</code> offers a superset of the functionality offered by <code class="command">SELECT INTO</code>.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.86.8">
    <h2>Examples</h2>
    <p>Create a new table <code class="literal">films_recent</code> consisting of only recent entries from the table <code class="literal">films</code>:</p>
    <pre class="programlisting">
CREATE TABLE films_recent AS
  SELECT * FROM films WHERE date_prod &gt;= '2002-01-01';
</pre>
    <p>To copy a table completely, the short form using the <code class="literal">TABLE</code> command can also be used:</p>
    <pre class="programlisting">
CREATE TABLE films2 AS
  TABLE films;
</pre>
    <p>Create a new temporary table <code class="literal">films_recent</code>, consisting of only recent entries from the table <code class="literal">films</code>, using a prepared statement. The new table will be dropped at commit:</p>
    <pre class="programlisting">
PREPARE recentfilms(date) AS
  SELECT * FROM films WHERE date_prod &gt; $1;
CREATE TEMP TABLE films_recent ON COMMIT DROP AS
  EXECUTE recentfilms('2002-01-01');
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.86.9">
    <h2>Compatibility</h2>
    <p><code class="command">CREATE TABLE AS</code> conforms to the <acronym class="acronym">SQL</acronym> standard. The following are nonstandard extensions:</p>
    <div class="itemizedlist">
      <ul class="itemizedlist compact" style="list-style-type: disc;">
        <li class="listitem">
          <p>The standard requires parentheses around the subquery clause; in <span class="productname">PostgreSQL</span>, these parentheses are optional.</p>
        </li>
        <li class="listitem">
          <p>In the standard, the <code class="literal">WITH [ NO ] DATA</code> clause is required; in PostgreSQL it is optional.</p>
        </li>
        <li class="listitem">
          <p><span class="productname">PostgreSQL</span> handles temporary tables in a way rather different from the standard; see <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a> for details.</p>
        </li>
        <li class="listitem">
          <p>The <code class="literal">WITH</code> clause is a <span class="productname">PostgreSQL</span> extension; storage parameters are not in the standard.</p>
        </li>
        <li class="listitem">
          <p>The <span class="productname">PostgreSQL</span> concept of tablespaces is not part of the standard. Hence, the clause <code class="literal">TABLESPACE</code> is an extension.</p>
        </li>
      </ul>
    </div>
  </div>
  <div class="refsect1" id="id-1.9.3.86.10">
    <h2>See Also</h2><span class="simplelist"><a class="xref" href="sql-creatematerializedview.html" title="CREATE MATERIALIZED VIEW"><span class="refentrytitle">CREATE MATERIALIZED VIEW</span></a>, <a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a>, <a class="xref" href="sql-execute.html" title="EXECUTE"><span class="refentrytitle">EXECUTE</span></a>, <a class="xref" href="sql-select.html" title="SELECT"><span class="refentrytitle">SELECT</span></a>, <a class="xref" href="sql-selectinto.html" title="SELECT INTO"><span class="refentrytitle">SELECT INTO</span></a>, <a class="xref" href="sql-values.html" title="VALUES"><span class="refentrytitle">VALUES</span></a></span>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="sql-createtable.html" title="CREATE TABLE">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="sql-createtablespace.html" title="CREATE TABLESPACE">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">CREATE TABLE&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;CREATE TABLESPACE</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/sql-createtableas.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
