<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: CREATE OPERATOR CLASS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/sql-createopclass.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="CREATE OPERATOR CLASS" />
  <meta property="og:description" content="CREATE OPERATOR CLASS CREATE OPERATOR CLASS — define a new operator class Synopsis CREATE OPERATOR CLASS name [ DEFAULT ] …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/sql-createopclass.html" title="PostgreSQL 17 - CREATE OPERATOR CLASS" >Current</a>
                          (<a href="/docs/17/sql-createopclass.html" title="PostgreSQL 17 - CREATE OPERATOR CLASS" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/sql-createopclass.html" title="PostgreSQL 16 - CREATE OPERATOR CLASS" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/sql-createopclass.html" title="PostgreSQL 15 - CREATE OPERATOR CLASS" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/sql-createopclass.html" title="PostgreSQL 14 - CREATE OPERATOR CLASS" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/sql-createopclass.html" title="PostgreSQL 13 - CREATE OPERATOR CLASS" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/sql-createopclass.html" title="PostgreSQL devel - CREATE OPERATOR CLASS"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/sql-createopclass.html" title="PostgreSQL 12 - CREATE OPERATOR CLASS"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/sql-createopclass.html" title="PostgreSQL 11 - CREATE OPERATOR CLASS"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/sql-createopclass.html" title="PostgreSQL 10 - CREATE OPERATOR CLASS"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/sql-createopclass.html" title="PostgreSQL 9.6 - CREATE OPERATOR CLASS"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/sql-createopclass.html" title="PostgreSQL 9.5 - CREATE OPERATOR CLASS"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/sql-createopclass.html" title="PostgreSQL 9.4 - CREATE OPERATOR CLASS"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/sql-createopclass.html" title="PostgreSQL 9.3 - CREATE OPERATOR CLASS"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/sql-createopclass.html" title="PostgreSQL 9.2 - CREATE OPERATOR CLASS"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/sql-createopclass.html" title="PostgreSQL 9.1 - CREATE OPERATOR CLASS"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/sql-createopclass.html" title="PostgreSQL 9.0 - CREATE OPERATOR CLASS"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/sql-createopclass.html" title="PostgreSQL 8.4 - CREATE OPERATOR CLASS"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/sql-createopclass.html" title="PostgreSQL 8.3 - CREATE OPERATOR CLASS"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/sql-createopclass.html" title="PostgreSQL 8.2 - CREATE OPERATOR CLASS"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/sql-createopclass.html" title="PostgreSQL 8.1 - CREATE OPERATOR CLASS"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/sql-createopclass.html" title="PostgreSQL 8.0 - CREATE OPERATOR CLASS"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/sql-createopclass.html" title="PostgreSQL 7.4 - CREATE OPERATOR CLASS"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/sql-createopclass.html" title="PostgreSQL 7.3 - CREATE OPERATOR CLASS"  rel="nofollow">7.3</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">CREATE OPERATOR CLASS</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="sql-createoperator.html" title="CREATE OPERATOR">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <th width="60%" align="center">SQL Commands</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="sql-createopfamily.html" title="CREATE OPERATOR FAMILY">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SQL-CREATEOPCLASS">
  <div class="titlepage"></div><a id="id-1.9.3.73.1" class="indexterm" name="id-1.9.3.73.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">CREATE OPERATOR CLASS</span></h2>
    <p>CREATE OPERATOR CLASS — define a new operator class</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
CREATE OPERATOR CLASS <em class="replaceable"><code>name</code></em> [ DEFAULT ] FOR TYPE <em class="replaceable"><code>data_type</code></em>
  USING <em class="replaceable"><code>index_method</code></em> [ FAMILY <em class="replaceable"><code>family_name</code></em> ] AS
  {  OPERATOR <em class="replaceable"><code>strategy_number</code></em> <em class="replaceable"><code>operator_name</code></em> [ ( <em class="replaceable"><code>op_type</code></em>, <em class="replaceable"><code>op_type</code></em> ) ] [ FOR SEARCH | FOR ORDER BY <em class="replaceable"><code>sort_family_name</code></em> ]
   | FUNCTION <em class="replaceable"><code>support_number</code></em> [ ( <em class="replaceable"><code>op_type</code></em> [ , <em class="replaceable"><code>op_type</code></em> ] ) ] <em class="replaceable"><code>function_name</code></em> ( <em class="replaceable"><code>argument_type</code></em> [, ...] )
   | STORAGE <em class="replaceable"><code>storage_type</code></em>
  } [, ... ]
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.73.5">
    <h2>Description</h2>
    <p><code class="command">CREATE OPERATOR CLASS</code> creates a new operator class. An operator class defines how a particular data type can be used with an index. The operator class specifies that certain operators will fill particular roles or <span class="quote">“<span class="quote">strategies</span>”</span> for this data type and this index method. The operator class also specifies the support functions to be used by the index method when the operator class is selected for an index column. All the operators and functions used by an operator class must be defined before the operator class can be created.</p>
    <p>If a schema name is given then the operator class is created in the specified schema. Otherwise it is created in the current schema. Two operator classes in the same schema can have the same name only if they are for different index methods.</p>
    <p>The user who defines an operator class becomes its owner. Presently, the creating user must be a superuser. (This restriction is made because an erroneous operator class definition could confuse or even crash the server.)</p>
    <p><code class="command">CREATE OPERATOR CLASS</code> does not presently check whether the operator class definition includes all the operators and functions required by the index method, nor whether the operators and functions form a self-consistent set. It is the user's responsibility to define a valid operator class.</p>
    <p>Related operator classes can be grouped into <em class="firstterm">operator families</em>. To add a new operator class to an existing family, specify the <code class="literal">FAMILY</code> option in <code class="command">CREATE OPERATOR CLASS</code>. Without this option, the new class is placed into a family named the same as the new class (creating that family if it doesn't already exist).</p>
    <p>Refer to <a class="xref" href="xindex.html" title="37.16.&nbsp;Interfacing Extensions to Indexes">Section&nbsp;37.16</a> for further information.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.73.6">
    <h2>Parameters</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="replaceable"><code>name</code></em></span></dt>
        <dd>
          <p>The name of the operator class to be created. The name can be schema-qualified.</p>
        </dd>
        <dt><span class="term"><code class="literal">DEFAULT</code></span></dt>
        <dd>
          <p>If present, the operator class will become the default operator class for its data type. At most one operator class can be the default for a specific data type and index method.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>data_type</code></em></span></dt>
        <dd>
          <p>The column data type that this operator class is for.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>index_method</code></em></span></dt>
        <dd>
          <p>The name of the index method this operator class is for.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>family_name</code></em></span></dt>
        <dd>
          <p>The name of the existing operator family to add this operator class to. If not specified, a family named the same as the operator class is used (creating it, if it doesn't already exist).</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>strategy_number</code></em></span></dt>
        <dd>
          <p>The index method's strategy number for an operator associated with the operator class.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>operator_name</code></em></span></dt>
        <dd>
          <p>The name (optionally schema-qualified) of an operator associated with the operator class.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>op_type</code></em></span></dt>
        <dd>
          <p>In an <code class="literal">OPERATOR</code> clause, the operand data type(s) of the operator, or <code class="literal">NONE</code> to signify a left-unary or right-unary operator. The operand data types can be omitted in the normal case where they are the same as the operator class's data type.</p>
          <p>In a <code class="literal">FUNCTION</code> clause, the operand data type(s) the function is intended to support, if different from the input data type(s) of the function (for B-tree comparison functions and hash functions) or the class's data type (for B-tree sort support functions, B-tree equal image functions, and all functions in GiST, SP-GiST, GIN and BRIN operator classes). These defaults are correct, and so <em class="replaceable"><code>op_type</code></em> need not be specified in <code class="literal">FUNCTION</code> clauses, except for the case of a B-tree sort support function that is meant to support cross-data-type comparisons.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>sort_family_name</code></em></span></dt>
        <dd>
          <p>The name (optionally schema-qualified) of an existing <code class="literal">btree</code> operator family that describes the sort ordering associated with an ordering operator.</p>
          <p>If neither <code class="literal">FOR SEARCH</code> nor <code class="literal">FOR ORDER BY</code> is specified, <code class="literal">FOR SEARCH</code> is the default.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>support_number</code></em></span></dt>
        <dd>
          <p>The index method's support function number for a function associated with the operator class.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>function_name</code></em></span></dt>
        <dd>
          <p>The name (optionally schema-qualified) of a function that is an index method support function for the operator class.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>argument_type</code></em></span></dt>
        <dd>
          <p>The parameter data type(s) of the function.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>storage_type</code></em></span></dt>
        <dd>
          <p>The data type actually stored in the index. Normally this is the same as the column data type, but some index methods (currently GiST, GIN and BRIN) allow it to be different. The <code class="literal">STORAGE</code> clause must be omitted unless the index method allows a different type to be used. If the column <em class="replaceable"><code>data_type</code></em> is specified as <code class="type">anyarray</code>, the <em class="replaceable"><code>storage_type</code></em> can be declared as <code class="type">anyelement</code> to indicate that the index entries are members of the element type belonging to the actual array type that each particular index is created for.</p>
        </dd>
      </dl>
    </div>
    <p>The <code class="literal">OPERATOR</code>, <code class="literal">FUNCTION</code>, and <code class="literal">STORAGE</code> clauses can appear in any order.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.73.7">
    <h2>Notes</h2>
    <p>Because the index machinery does not check access permissions on functions before using them, including a function or operator in an operator class is tantamount to granting public execute permission on it. This is usually not an issue for the sorts of functions that are useful in an operator class.</p>
    <p>The operators should not be defined by SQL functions. A SQL function is likely to be inlined into the calling query, which will prevent the optimizer from recognizing that the query matches an index.</p>
    <p>Before <span class="productname">PostgreSQL</span> 8.4, the <code class="literal">OPERATOR</code> clause could include a <code class="literal">RECHECK</code> option. This is no longer supported because whether an index operator is <span class="quote">“<span class="quote">lossy</span>”</span> is now determined on-the-fly at run time. This allows efficient handling of cases where an operator might or might not be lossy.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.73.8">
    <h2>Examples</h2>
    <p>The following example command defines a GiST index operator class for the data type <code class="literal">_int4</code> (array of <code class="type">int4</code>). See the <a class="xref" href="intarray.html" title="F.18.&nbsp;intarray">intarray</a> module for the complete example.</p>
    <pre class="programlisting">
CREATE OPERATOR CLASS gist__int_ops
    DEFAULT FOR TYPE _int4 USING gist AS
        OPERATOR        3       &amp;&amp;,
        OPERATOR        6       = (anyarray, anyarray),
        OPERATOR        7       @&gt;,
        OPERATOR        8       &lt;@,
        OPERATOR        20      @@ (_int4, query_int),
        FUNCTION        1       g_int_consistent (internal, _int4, smallint, oid, internal),
        FUNCTION        2       g_int_union (internal, internal),
        FUNCTION        3       g_int_compress (internal),
        FUNCTION        4       g_int_decompress (internal),
        FUNCTION        5       g_int_penalty (internal, internal, internal),
        FUNCTION        6       g_int_picksplit (internal, internal),
        FUNCTION        7       g_int_same (_int4, _int4, internal);
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.73.9">
    <h2>Compatibility</h2>
    <p><code class="command">CREATE OPERATOR CLASS</code> is a <span class="productname">PostgreSQL</span> extension. There is no <code class="command">CREATE OPERATOR CLASS</code> statement in the SQL standard.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.73.10">
    <h2>See Also</h2><span class="simplelist"><a class="xref" href="sql-alteropclass.html" title="ALTER OPERATOR CLASS"><span class="refentrytitle">ALTER OPERATOR CLASS</span></a>, <a class="xref" href="sql-dropopclass.html" title="DROP OPERATOR CLASS"><span class="refentrytitle">DROP OPERATOR CLASS</span></a>, <a class="xref" href="sql-createopfamily.html" title="CREATE OPERATOR FAMILY"><span class="refentrytitle">CREATE OPERATOR FAMILY</span></a>, <a class="xref" href="sql-alteropfamily.html" title="ALTER OPERATOR FAMILY"><span class="refentrytitle">ALTER OPERATOR FAMILY</span></a></span>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="sql-createoperator.html" title="CREATE OPERATOR">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="sql-createopfamily.html" title="CREATE OPERATOR FAMILY">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">CREATE OPERATOR&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;CREATE OPERATOR FAMILY</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/sql-createopclass.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
