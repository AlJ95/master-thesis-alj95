<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Benchmarking etcd v2.2.0 | etcd</title>
<meta name=description content="Performance measures for etcd v2.2.0"><meta property="og:url" content="https://etcd.io/docs/v3.5/benchmarks/etcd-2-2-0-benchmarks/"><meta property="og:site_name" content="etcd"><meta property="og:title" content="Benchmarking etcd v2.2.0"><meta property="og:description" content="Performance measures for etcd v2.2.0"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-06-14T17:16:50+00:00"><meta itemprop=name content="Benchmarking etcd v2.2.0"><meta itemprop=description content="Performance measures for etcd v2.2.0"><meta itemprop=dateModified content="2021-06-14T17:16:50+00:00"><meta itemprop=wordCount content="424"><meta name=twitter:card content="summary"><meta name=twitter:title content="Benchmarking etcd v2.2.0"><meta name=twitter:description content="Performance measures for etcd v2.2.0"></head><body class=td-page><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><h1>Benchmarking etcd v2.2.0</h1><div class=lead>Performance measures for etcd v2.2.0</div><h2 id=physical-machines>Physical Machines</h2><p>GCE n1-highcpu-2 machine type</p><ul><li>1x dedicated local SSD mounted as etcd data directory</li><li>1x dedicated slow disk for the OS</li><li>1.8 GB memory</li><li>2x CPUs</li></ul><h2 id=etcd-cluster>etcd Cluster</h2><p>3 etcd 2.2.0 members, each runs on a single machine.</p><p>Detailed versions:</p><pre tabindex=0><code>etcd Version: 2.2.0
Git SHA: e4561dd
Go Version: go1.5
Go OS/Arch: linux/amd64
</code></pre><h2 id=testing>Testing</h2><p>Bootstrap another machine, outside of the etcd cluster, and run the <a href=https://github.com/rakyll/hey target=_blank rel=noopener><code>hey</code> HTTP benchmark tool</a> with a connection reuse patch to send requests to each etcd cluster member. See the <a href=https://github.com/etcd-io/etcd/tree/v2.3.8/hack/benchmark target=_blank rel=noopener>benchmark instructions</a> for the patch and the steps to reproduce our procedures.</p><p>The performance is calculated through results of 100 benchmark rounds.</p><h2 id=performance>Performance</h2><h3 id=single-key-read-performance>Single Key Read Performance</h3><table><thead><tr><th>key size in bytes</th><th>number of clients</th><th>target etcd server</th><th>average read QPS</th><th>read QPS stddev</th><th>average 90th Percentile Latency (ms)</th><th>latency stddev</th></tr></thead><tbody><tr><td>64</td><td>1</td><td>leader only</td><td>2303</td><td>200</td><td>0.49</td><td>0.06</td></tr><tr><td>64</td><td>64</td><td>leader only</td><td>15048</td><td>685</td><td>7.60</td><td>0.46</td></tr><tr><td>64</td><td>256</td><td>leader only</td><td>14508</td><td>434</td><td>29.76</td><td>1.05</td></tr><tr><td>256</td><td>1</td><td>leader only</td><td>2162</td><td>214</td><td>0.52</td><td>0.06</td></tr><tr><td>256</td><td>64</td><td>leader only</td><td>14789</td><td>792</td><td>7.69</td><td>0.48</td></tr><tr><td>256</td><td>256</td><td>leader only</td><td>14424</td><td>512</td><td>29.92</td><td>1.42</td></tr><tr><td>64</td><td>64</td><td>all servers</td><td>45752</td><td>2048</td><td>2.47</td><td>0.14</td></tr><tr><td>64</td><td>256</td><td>all servers</td><td>46592</td><td>1273</td><td>10.14</td><td>0.59</td></tr><tr><td>256</td><td>64</td><td>all servers</td><td>45332</td><td>1847</td><td>2.48</td><td>0.12</td></tr><tr><td>256</td><td>256</td><td>all servers</td><td>46485</td><td>1340</td><td>10.18</td><td>0.74</td></tr></tbody></table><h3 id=single-key-write-performance>Single Key Write Performance</h3><table><thead><tr><th>key size in bytes</th><th>number of clients</th><th>target etcd server</th><th>average write QPS</th><th>write QPS stddev</th><th>average 90th Percentile Latency (ms)</th><th>latency stddev</th></tr></thead><tbody><tr><td>64</td><td>1</td><td>leader only</td><td>55</td><td>4</td><td>24.51</td><td>13.26</td></tr><tr><td>64</td><td>64</td><td>leader only</td><td>2139</td><td>125</td><td>35.23</td><td>3.40</td></tr><tr><td>64</td><td>256</td><td>leader only</td><td>4581</td><td>581</td><td>70.53</td><td>10.22</td></tr><tr><td>256</td><td>1</td><td>leader only</td><td>56</td><td>4</td><td>22.37</td><td>4.33</td></tr><tr><td>256</td><td>64</td><td>leader only</td><td>2052</td><td>151</td><td>36.83</td><td>4.20</td></tr><tr><td>256</td><td>256</td><td>leader only</td><td>4442</td><td>560</td><td>71.59</td><td>10.03</td></tr><tr><td>64</td><td>64</td><td>all servers</td><td>1625</td><td>85</td><td>58.51</td><td>5.14</td></tr><tr><td>64</td><td>256</td><td>all servers</td><td>4461</td><td>298</td><td>89.47</td><td>36.48</td></tr><tr><td>256</td><td>64</td><td>all servers</td><td>1599</td><td>94</td><td>60.11</td><td>6.43</td></tr><tr><td>256</td><td>256</td><td>all servers</td><td>4315</td><td>193</td><td>88.98</td><td>7.01</td></tr></tbody></table><h2 id=performance-changes>Performance Changes</h2><ul><li><p>Because etcd now records metrics for each API call, read QPS performance seems to see a minor decrease in most scenarios. This minimal performance impact was judged a reasonable investment for the breadth of monitoring and debugging information returned.</p></li><li><p>Write QPS to cluster leaders seems to be increased by a small margin. This is because the main loop and entry apply loops were decoupled in the etcd raft logic, eliminating several blocks between them.</p></li><li><p>Write QPS to all members seems to be increased by a significant margin, because followers now receive the latest commit index sooner, and commit proposals more quickly.</p></li></ul><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/etcd-io/website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/etcd-io/website/issues/new>tell us how we can improve</a>.</p></div><br><div class=td-page-meta__lastmod>Last modified June 14, 2021: <a href=https://github.com/etcd-io/website/commit/138926b5de44b5116fdbe63830eeaf73596e4c2c>Renaming content/en/next folder to content/en/v3.5. Updating redirects, links, and config as needed. (#363) (138926b)</a></div></div></main></div></div></div></body></html>