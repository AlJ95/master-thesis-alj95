<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: dblink_get_result</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/contrib-dblink-get-result.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="dblink_get_result" />
  <meta property="og:description" content="dblink_get_result dblink_get_result — gets an async query result Synopsis dblink_get_result(text connname [, bool fail_on_error]) returns setof record Description dblink_get_result collects …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/contrib-dblink-get-result.html" title="PostgreSQL 17 - dblink_get_result" >Current</a>
                          (<a href="/docs/17/contrib-dblink-get-result.html" title="PostgreSQL 17 - dblink_get_result" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/contrib-dblink-get-result.html" title="PostgreSQL 16 - dblink_get_result" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/contrib-dblink-get-result.html" title="PostgreSQL 15 - dblink_get_result" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/contrib-dblink-get-result.html" title="PostgreSQL 14 - dblink_get_result" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/contrib-dblink-get-result.html" title="PostgreSQL 13 - dblink_get_result" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/contrib-dblink-get-result.html" title="PostgreSQL devel - dblink_get_result"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/contrib-dblink-get-result.html" title="PostgreSQL 12 - dblink_get_result"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/contrib-dblink-get-result.html" title="PostgreSQL 11 - dblink_get_result"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/contrib-dblink-get-result.html" title="PostgreSQL 10 - dblink_get_result"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/contrib-dblink-get-result.html" title="PostgreSQL 9.6 - dblink_get_result"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/contrib-dblink-get-result.html" title="PostgreSQL 9.5 - dblink_get_result"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/contrib-dblink-get-result.html" title="PostgreSQL 9.4 - dblink_get_result"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/contrib-dblink-get-result.html" title="PostgreSQL 9.3 - dblink_get_result"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/contrib-dblink-get-result.html" title="PostgreSQL 9.2 - dblink_get_result"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/contrib-dblink-get-result.html" title="PostgreSQL 9.1 - dblink_get_result"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/contrib-dblink-get-result.html" title="PostgreSQL 9.0 - dblink_get_result"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/contrib-dblink-get-result.html" title="PostgreSQL 8.4 - dblink_get_result"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/contrib-dblink-get-result.html" title="PostgreSQL 8.3 - dblink_get_result"  rel="nofollow">8.3</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">dblink_get_result</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="contrib-dblink-get-notify.html" title="dblink_get_notify">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="dblink.html" title="F.10.&nbsp;dblink">Up</a></td>
      <th width="60%" align="center">F.10.&nbsp;dblink</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="contrib-dblink-cancel-query.html" title="dblink_cancel_query">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="CONTRIB-DBLINK-GET-RESULT">
  <div class="titlepage"></div><a id="id-1.11.7.19.18.1" class="indexterm" name="id-1.11.7.19.18.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">dblink_get_result</span></h2>
    <p>dblink_get_result — gets an async query result</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
dblink_get_result(text connname [, bool fail_on_error]) returns setof record
</pre>
  </div>
  <div class="refsect1" id="id-1.11.7.19.18.5">
    <h2>Description</h2>
    <p><code class="function">dblink_get_result</code> collects the results of an asynchronous query previously sent with <code class="function">dblink_send_query</code>. If the query is not already completed, <code class="function">dblink_get_result</code> will wait until it is.</p>
  </div>
  <div class="refsect1" id="id-1.11.7.19.18.6">
    <h2>Arguments</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="parameter"><code>connname</code></em></span></dt>
        <dd>
          <p>Name of the connection to use.</p>
        </dd>
        <dt><span class="term"><em class="parameter"><code>fail_on_error</code></em></span></dt>
        <dd>
          <p>If true (the default when omitted) then an error thrown on the remote side of the connection causes an error to also be thrown locally. If false, the remote error is locally reported as a NOTICE, and the function returns no rows.</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.11.7.19.18.7">
    <h2>Return Value</h2>
    <p>For an async query (that is, a SQL statement returning rows), the function returns the row(s) produced by the query. To use this function, you will need to specify the expected set of columns, as previously discussed for <code class="function">dblink</code>.</p>
    <p>For an async command (that is, a SQL statement not returning rows), the function returns a single row with a single text column containing the command's status string. It is still necessary to specify that the result will have a single text column in the calling <code class="literal">FROM</code> clause.</p>
  </div>
  <div class="refsect1" id="id-1.11.7.19.18.8">
    <h2>Notes</h2>
    <p>This function <span class="emphasis"><em>must</em></span> be called if <code class="function">dblink_send_query</code> returned 1. It must be called once for each query sent, and one additional time to obtain an empty set result, before the connection can be used again.</p>
    <p>When using <code class="function">dblink_send_query</code> and <code class="function">dblink_get_result</code>, <span class="application">dblink</span> fetches the entire remote query result before returning any of it to the local query processor. If the query returns a large number of rows, this can result in transient memory bloat in the local session. It may be better to open such a query as a cursor with <code class="function">dblink_open</code> and then fetch a manageable number of rows at a time. Alternatively, use plain <code class="function">dblink()</code>, which avoids memory bloat by spooling large result sets to disk.</p>
  </div>
  <div class="refsect1" id="id-1.11.7.19.18.9">
    <h2>Examples</h2>
    <pre class="screen">
contrib_regression=# SELECT dblink_connect('dtest1', 'dbname=contrib_regression');
 dblink_connect
----------------
 OK
(1 row)

contrib_regression=# SELECT * FROM
contrib_regression-# dblink_send_query('dtest1', 'select * from foo where f1 &lt; 3') AS t1;
 t1
----
  1
(1 row)

contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
 f1 | f2 |     f3
----+----+------------
  0 | a  | {a0,b0,c0}
  1 | b  | {a1,b1,c1}
  2 | c  | {a2,b2,c2}
(3 rows)

contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
 f1 | f2 | f3
----+----+----
(0 rows)

contrib_regression=# SELECT * FROM
contrib_regression-# dblink_send_query('dtest1', 'select * from foo where f1 &lt; 3; select * from foo where f1 &gt; 6') AS t1;
 t1
----
  1
(1 row)

contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
 f1 | f2 |     f3
----+----+------------
  0 | a  | {a0,b0,c0}
  1 | b  | {a1,b1,c1}
  2 | c  | {a2,b2,c2}
(3 rows)

contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
 f1 | f2 |      f3
----+----+---------------
  7 | h  | {a7,b7,c7}
  8 | i  | {a8,b8,c8}
  9 | j  | {a9,b9,c9}
 10 | k  | {a10,b10,c10}
(4 rows)

contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
 f1 | f2 | f3
----+----+----
(0 rows)
</pre>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="contrib-dblink-get-notify.html" title="dblink_get_notify">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="dblink.html" title="F.10.&nbsp;dblink">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="contrib-dblink-cancel-query.html" title="dblink_cancel_query">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">dblink_get_notify&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;dblink_cancel_query</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/contrib-dblink-get-result.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
