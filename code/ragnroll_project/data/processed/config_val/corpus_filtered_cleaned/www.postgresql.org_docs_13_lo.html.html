<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: F.20. lo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/lo.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="F.20. lo" />
  <meta property="og:description" content="F.20.&amp;nbsp;lo F.20.1. Rationale F.20.2. How to Use It F.20.3. Limitations F.20.4. Author The lo module provides support for managing Large …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/lo.html" title="PostgreSQL 17 - F.20. lo" >Current</a>
                          (<a href="/docs/17/lo.html" title="PostgreSQL 17 - F.20. lo" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/lo.html" title="PostgreSQL 16 - F.20. lo" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/lo.html" title="PostgreSQL 15 - F.20. lo" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/lo.html" title="PostgreSQL 14 - F.20. lo" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/lo.html" title="PostgreSQL 13 - F.20. lo" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/lo.html" title="PostgreSQL devel - F.20. lo"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/lo.html" title="PostgreSQL 12 - F.20. lo"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/lo.html" title="PostgreSQL 11 - F.20. lo"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/lo.html" title="PostgreSQL 10 - F.20. lo"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/lo.html" title="PostgreSQL 9.6 - F.20. lo"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/lo.html" title="PostgreSQL 9.5 - F.20. lo"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/lo.html" title="PostgreSQL 9.4 - F.20. lo"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/lo.html" title="PostgreSQL 9.3 - F.20. lo"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/lo.html" title="PostgreSQL 9.2 - F.20. lo"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/lo.html" title="PostgreSQL 9.1 - F.20. lo"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/lo.html" title="PostgreSQL 9.0 - F.20. lo"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/lo.html" title="PostgreSQL 8.4 - F.20. lo"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/lo.html" title="PostgreSQL 8.3 - F.20. lo"  rel="nofollow">8.3</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">F.20.&nbsp;lo</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="isn.html" title="F.19.&nbsp;isn">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="contrib.html" title="Appendix&nbsp;F.&nbsp;Additional Supplied Modules">Up</a></td>
      <th width="60%" align="center">Appendix&nbsp;F.&nbsp;Additional Supplied Modules</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="ltree.html" title="F.21.&nbsp;ltree">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="LO">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">F.20.&nbsp;lo</h2>
      </div>
    </div>
  </div>
  <div class="toc">
    <dl class="toc">
      <dt><span class="sect2"><a href="lo.html#id-1.11.7.29.5">F.20.1. Rationale</a></span></dt>
      <dt><span class="sect2"><a href="lo.html#id-1.11.7.29.6">F.20.2. How to Use It</a></span></dt>
      <dt><span class="sect2"><a href="lo.html#id-1.11.7.29.7">F.20.3. Limitations</a></span></dt>
      <dt><span class="sect2"><a href="lo.html#id-1.11.7.29.8">F.20.4. Author</a></span></dt>
    </dl>
  </div><a id="id-1.11.7.29.2" class="indexterm" name="id-1.11.7.29.2"></a>
  <p>The <code class="filename">lo</code> module provides support for managing Large Objects (also called LOs or BLOBs). This includes a data type <code class="type">lo</code> and a trigger <code class="function">lo_manage</code>.</p>
  <p>This module is considered <span class="quote">“<span class="quote">trusted</span>”</span>, that is, it can be installed by non-superusers who have <code class="literal">CREATE</code> privilege on the current database.</p>
  <div class="sect2" id="id-1.11.7.29.5">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">F.20.1.&nbsp;Rationale</h3>
        </div>
      </div>
    </div>
    <p>One of the problems with the JDBC driver (and this affects the ODBC driver also), is that the specification assumes that references to BLOBs (Binary Large OBjects) are stored within a table, and if that entry is changed, the associated BLOB is deleted from the database.</p>
    <p>As <span class="productname">PostgreSQL</span> stands, this doesn't occur. Large objects are treated as objects in their own right; a table entry can reference a large object by OID, but there can be multiple table entries referencing the same large object OID, so the system doesn't delete the large object just because you change or remove one such entry.</p>
    <p>Now this is fine for <span class="productname">PostgreSQL</span>-specific applications, but standard code using JDBC or ODBC won't delete the objects, resulting in orphan objects — objects that are not referenced by anything, and simply occupy disk space.</p>
    <p>The <code class="filename">lo</code> module allows fixing this by attaching a trigger to tables that contain LO reference columns. The trigger essentially just does a <code class="function">lo_unlink</code> whenever you delete or modify a value referencing a large object. When you use this trigger, you are assuming that there is only one database reference to any large object that is referenced in a trigger-controlled column!</p>
    <p>The module also provides a data type <code class="type">lo</code>, which is really just a domain of the <code class="type">oid</code> type. This is useful for differentiating database columns that hold large object references from those that are OIDs of other things. You don't have to use the <code class="type">lo</code> type to use the trigger, but it may be convenient to use it to keep track of which columns in your database represent large objects that you are managing with the trigger. It is also rumored that the ODBC driver gets confused if you don't use <code class="type">lo</code> for BLOB columns.</p>
  </div>
  <div class="sect2" id="id-1.11.7.29.6">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">F.20.2.&nbsp;How to Use It</h3>
        </div>
      </div>
    </div>
    <p>Here's a simple example of usage:</p>
    <pre class="programlisting">
CREATE TABLE image (title text, raster lo);

CREATE TRIGGER t_raster BEFORE UPDATE OR DELETE ON image
    FOR EACH ROW EXECUTE FUNCTION lo_manage(raster);
</pre>
    <p>For each column that will contain unique references to large objects, create a <code class="literal">BEFORE UPDATE OR DELETE</code> trigger, and give the column name as the sole trigger argument. You can also restrict the trigger to only execute on updates to the column by using <code class="literal">BEFORE UPDATE OF</code> <em class="replaceable"><code>column_name</code></em>. If you need multiple <code class="type">lo</code> columns in the same table, create a separate trigger for each one, remembering to give a different name to each trigger on the same table.</p>
  </div>
  <div class="sect2" id="id-1.11.7.29.7">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">F.20.3.&nbsp;Limitations</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Dropping a table will still orphan any objects it contains, as the trigger is not executed. You can avoid this by preceding the <code class="command">DROP TABLE</code> with <code class="command">DELETE FROM <em class="replaceable"><code>table</code></em></code>.</p>
          <p><code class="command">TRUNCATE</code> has the same hazard.</p>
          <p>If you already have, or suspect you have, orphaned large objects, see the <a class="xref" href="vacuumlo.html" title="vacuumlo"><span class="refentrytitle"><span class="application">vacuumlo</span></span></a> module to help you clean them up. It's a good idea to run <span class="application">vacuumlo</span> occasionally as a back-stop to the <code class="function">lo_manage</code> trigger.</p>
        </li>
        <li class="listitem">
          <p>Some frontends may create their own tables, and will not create the associated trigger(s). Also, users may not remember (or know) to create the triggers.</p>
        </li>
      </ul>
    </div>
  </div>
  <div class="sect2" id="id-1.11.7.29.8">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">F.20.4.&nbsp;Author</h3>
        </div>
      </div>
    </div>
    <p>Peter Mount <code class="email">&lt;<a class="email" href="mailto:peter@retep.org.uk">peter@retep.org.uk</a>&gt;</code></p>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="isn.html" title="F.19.&nbsp;isn">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="contrib.html" title="Appendix&nbsp;F.&nbsp;Additional Supplied Modules">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="ltree.html" title="F.21.&nbsp;ltree">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">F.19.&nbsp;isn&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;F.21.&nbsp;ltree</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/lo.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
