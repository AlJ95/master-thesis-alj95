<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Copyright" content="Django Software Foundation" />
    <meta name="keywords" content="Python, Django, framework, open-source" />
    <meta name="description" content="" />

    
  
    
      
    
  
  
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  
    
      
    
    
  

  

    
    
    
    
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="https://static.djangoproject.com/img/icon-tile.b01ac0ef9f67.png">
    <meta name="theme-color" content="#0C4B33">

    
      <meta property="og:title" content="Django’s cache framework | Django documentation" />
      <meta property="og:description" content="The web framework for perfectionists with deadlines." />
      <meta property="og:image" content="https://static.djangoproject.com/img/logos/django-logo-negative.1d528e2cb5fb.png" />
      <meta property="og:image:alt" content="Django logo" />
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="546" />
      <meta property="og:image:type" content="image/png" />
      <meta property="og:url" content="https://docs.djangoproject.com/en/4.0/topics/cache/" />
      <meta property="og:site_name" content="Django Project" />

      <meta property="twitter:creator" content="djangoproject" />
      <meta property="twitter:site" content="djangoproject" />
      <meta property="twitter:card" content="summary">
    

    <title>Django’s cache framework | Django documentation | Django</title>

    

    
    
  </head>

  <body id="generic" class="">

    


    <section class="copy-banner">
      <div class="container 
  container--flex container--flex--wrap--mobile
">
        
  <p><a href="https://docs.djangoproject.com/en/4.0/">Documentation</a></p>
  
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/4.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search 4.0 documentation</label>
    <input type="search" name="q" placeholder="Search 4.0 documentation" id="id_q">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>


      </div>
    </section>

    

    <div id="billboard"></div>

    <div class="container sidebar-right">
      <main>

        
          
        

        
  <div id="version-switcher">
    <ul id="faq-link">
      
    </ul>
    <ul id="doc-languages" class="language-switcher doc-switcher">
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
      <li class="current"
          title="Click on the links on the left to switch to another language.">
        <span>Language: <strong>en</strong></span>
      </li>
    </ul>

    
    <ul id="doc-versions" class="version-switcher doc-switcher">
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
      <li class="current"
          title="This document describes Django 4.0. Click on the links on the left to see other versions.">
        <span>Documentation version:
          <strong>4.0</strong>
        </span>
      </li>
    </ul>
    <ul id="backtotop-link">
      
    </ul>
  </div>

  
    <article id="docs-content">
      <div class="section" id="s-django-s-cache-framework">
<span id="django-s-cache-framework"></span><h1>Django’s cache framework<a class="headerlink" href="#django-s-cache-framework" title="Permalink to this headline">¶</a></h1>
<p>A fundamental trade-off in dynamic websites is, well, they’re dynamic. Each
time a user requests a page, the web server makes all sorts of calculations –
from database queries to template rendering to business logic – to create the
page that your site’s visitor sees. This is a lot more expensive, from a
processing-overhead perspective, than your standard
read-a-file-off-the-filesystem server arrangement.</p>
<p>For most web applications, this overhead isn’t a big deal. Most web
applications aren’t <code class="docutils literal notranslate"><span class="pre">washingtonpost.com</span></code> or <code class="docutils literal notranslate"><span class="pre">slashdot.org</span></code>; they’re small-
to medium-sized sites with so-so traffic. But for medium- to high-traffic
sites, it’s essential to cut as much overhead as possible.</p>
<p>That’s where caching comes in.</p>
<p>To cache something is to save the result of an expensive calculation so that
you don’t have to perform the calculation next time. Here’s some pseudocode
explaining how this would work for a dynamically generated web page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">given</span> <span class="n">a</span> <span class="n">URL</span><span class="p">,</span> <span class="k">try</span> <span class="n">finding</span> <span class="n">that</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">cache</span>
<span class="k">if</span> <span class="n">the</span> <span class="n">page</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">cache</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">the</span> <span class="n">cached</span> <span class="n">page</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">generate</span> <span class="n">the</span> <span class="n">page</span>
    <span class="n">save</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">cache</span> <span class="p">(</span><span class="k">for</span> <span class="nb">next</span> <span class="n">time</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">page</span>
</pre></div>
</div>
<p>Django comes with a robust cache system that lets you save dynamic pages so
they don’t have to be calculated for each request. For convenience, Django
offers different levels of cache granularity: You can cache the output of
specific views, you can cache only the pieces that are difficult to produce,
or you can cache your entire site.</p>
<p>Django also works well with “downstream” caches, such as <a class="reference external" href="http://www.squid-cache.org/">Squid</a> and browser-based caches. These are the types
of caches that you don’t directly control but to which you can provide hints
(via HTTP headers) about which parts of your site should be cached, and how.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">The <a class="reference internal" href="../../misc/design-philosophies/#cache-design-philosophy"><span class="std std-ref">Cache Framework design philosophy</span></a>
explains a few of the design decisions of the framework.</p>
</div>
<div class="section" id="s-setting-up-the-cache">
<span id="s-id1"></span><span id="setting-up-the-cache"></span><span id="id1"></span><h2>Setting up the cache<a class="headerlink" href="#setting-up-the-cache" title="Permalink to this headline">¶</a></h2>
<p>The cache system requires a small amount of setup. Namely, you have to tell it
where your cached data should live – whether in a database, on the filesystem
or directly in memory. This is an important decision that affects your cache’s
performance; yes, some cache types are faster than others.</p>
<p>Your cache preference goes in the <a class="reference internal" href="../../ref/settings/#std-setting-CACHES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CACHES</span></code></a> setting in your
settings file. Here’s an explanation of all available values for
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CACHES</span></code></a>.</p>
<div class="section" id="s-memcached">
<span id="s-id2"></span><span id="memcached"></span><span id="id2"></span><h3>Memcached<a class="headerlink" href="#memcached" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://memcached.org/">Memcached</a> is an entirely memory-based cache server, originally developed
to handle high loads at LiveJournal.com and subsequently open-sourced by
Danga Interactive. It is used by sites such as Facebook and Wikipedia to
reduce database access and dramatically increase site performance.</p>
<p>Memcached runs as a daemon and is allotted a specified amount of RAM. All it
does is provide a fast interface for adding, retrieving and deleting data in
the cache. All data is stored directly in memory, so there’s no overhead of
database or filesystem usage.</p>
<p>After installing Memcached itself, you’ll need to install a Memcached
binding. There are several Python Memcached bindings available; the
two supported by Django are <a class="reference external" href="https://pypi.org/project/pylibmc/">pylibmc</a> and <a class="reference external" href="https://pypi.org/project/pymemcache/">pymemcache</a>.</p>
<p>To use Memcached with Django:</p>
<ul class="simple">
<li>Set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> to
<code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.memcached.PyMemcacheCache</span></code> or
<code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.memcached.PyLibMCCache</span></code> (depending on your
chosen memcached binding)</li>
<li>Set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a> to <code class="docutils literal notranslate"><span class="pre">ip:port</span></code> values,
where <code class="docutils literal notranslate"><span class="pre">ip</span></code> is the IP address of the Memcached daemon and <code class="docutils literal notranslate"><span class="pre">port</span></code> is the
port on which Memcached is running, or to a <code class="docutils literal notranslate"><span class="pre">unix:path</span></code> value, where
<code class="docutils literal notranslate"><span class="pre">path</span></code> is the path to a Memcached Unix socket file.</li>
</ul>
<p>In this example, Memcached is running on localhost (127.0.0.1) port 11211, using
the <code class="docutils literal notranslate"><span class="pre">pymemcache</span></code> binding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.memcached.PyMemcacheCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1:11211&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example, Memcached is available through a local Unix socket file
<code class="file docutils literal notranslate"><span class="pre">/tmp/memcached.sock</span></code> using the <code class="docutils literal notranslate"><span class="pre">pymemcache</span></code> binding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.memcached.PyMemcacheCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;unix:/tmp/memcached.sock&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>One excellent feature of Memcached is its ability to share a cache over
multiple servers. This means you can run Memcached daemons on multiple
machines, and the program will treat the group of machines as a <em>single</em>
cache, without the need to duplicate cache values on each machine. To take
advantage of this feature, include all server addresses in
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a>, either as a semicolon or comma
delimited string, or as a list.</p>
<p>In this example, the cache is shared over Memcached instances running on IP
address 172.19.26.240 and 172.19.26.242, both on port 11211:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.memcached.PyMemcacheCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;172.19.26.240:11211&#39;</span><span class="p">,</span>
            <span class="s1">&#39;172.19.26.242:11211&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the following example, the cache is shared over Memcached instances running
on the IP addresses 172.19.26.240 (port 11211), 172.19.26.242 (port 11212), and
172.19.26.244 (port 11213):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.memcached.PyMemcacheCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;172.19.26.240:11211&#39;</span><span class="p">,</span>
            <span class="s1">&#39;172.19.26.242:11212&#39;</span><span class="p">,</span>
            <span class="s1">&#39;172.19.26.244:11213&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A final point about Memcached is that memory-based caching has a
disadvantage: because the cached data is stored in memory, the data will be
lost if your server crashes. Clearly, memory isn’t intended for permanent data
storage, so don’t rely on memory-based caching as your only data storage.
Without a doubt, <em>none</em> of the Django caching backends should be used for
permanent storage – they’re all intended to be solutions for caching, not
storage – but we point this out here because memory-based caching is
particularly temporary.</p>
<div class="versionchanged">
<span class="title">Changed in Django 3.2:</span> <p>The <code class="docutils literal notranslate"><span class="pre">PyMemcacheCache</span></code> backend was added.</p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 3.2: </span>The <code class="docutils literal notranslate"><span class="pre">MemcachedCache</span></code> backend is deprecated as <code class="docutils literal notranslate"><span class="pre">python-memcached</span></code> has
some problems and seems to be unmaintained. Use <code class="docutils literal notranslate"><span class="pre">PyMemcacheCache</span></code> or
<code class="docutils literal notranslate"><span class="pre">PyLibMCCache</span></code> instead.</p>
</div>
</div>
<div class="section" id="s-redis">
<span id="s-id4"></span><span id="redis"></span><span id="id4"></span><h3>Redis<a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 4.0.</span> </div>
<p><a class="reference external" href="https://redis.io/">Redis</a> is an in-memory database that can be used for caching. To begin you’ll
need a Redis server running either locally or on a remote machine.</p>
<p>After setting up the Redis server, you’ll need to install Python bindings for
Redis. <a class="reference external" href="https://pypi.org/project/redis/">redis-py</a> is the binding supported natively by Django. Installing the
additional <a class="reference external" href="https://pypi.org/project/hiredis/">hiredis-py</a> package is also recommended.</p>
<p>To use Redis as your cache backend with Django:</p>
<ul class="simple">
<li>Set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> to
<code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.redis.RedisCache</span></code>.</li>
<li>Set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a> to the URL pointing to your Redis
instance, using the appropriate scheme. See the <code class="docutils literal notranslate"><span class="pre">redis-py</span></code> docs for
<a class="reference external" href="https://redis-py.readthedocs.io/en/stable/connections.html#redis.connection.ConnectionPool.from_url">details on the available schemes</a>.</li>
</ul>
<p>For example, if Redis is running on localhost (127.0.0.1) port 6379:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.redis.RedisCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;redis://127.0.0.1:6379&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Often Redis servers are protected with authentication. In order to supply a
username and password, add them in the <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code> along with the URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.redis.RedisCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;redis://username:password@127.0.0.1:6379&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you have multiple Redis servers set up in the replication mode, you can
specify the servers either as a semicolon or comma delimited string, or as a
list. While using multiple servers, write operations are performed on the first
server (leader). Read operations are performed on the other servers (replicas)
chosen at random:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.redis.RedisCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;redis://127.0.0.1:6379&#39;</span><span class="p">,</span> <span class="c1"># leader</span>
            <span class="s1">&#39;redis://127.0.0.1:6378&#39;</span><span class="p">,</span> <span class="c1"># read-replica 1</span>
            <span class="s1">&#39;redis://127.0.0.1:6377&#39;</span><span class="p">,</span> <span class="c1"># read-replica 2</span>
        <span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="s-database-caching">
<span id="s-id6"></span><span id="database-caching"></span><span id="id6"></span><h3>Database caching<a class="headerlink" href="#database-caching" title="Permalink to this headline">¶</a></h3>
<p>Django can store its cached data in your database. This works best if you’ve
got a fast, well-indexed database server.</p>
<p>To use a database table as your cache backend:</p>
<ul class="simple">
<li>Set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> to
<code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.db.DatabaseCache</span></code></li>
<li>Set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a> to <code class="docutils literal notranslate"><span class="pre">tablename</span></code>, the name of the
database table. This name can be whatever you want, as long as it’s a valid
table name that’s not already being used in your database.</li>
</ul>
<p>In this example, the cache table’s name is <code class="docutils literal notranslate"><span class="pre">my_cache_table</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.db.DatabaseCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;my_cache_table&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Unlike other cache backends, the database cache does not support automatic
culling of expired entries at the database level. Instead, expired cache
entries are culled each time <code class="docutils literal notranslate"><span class="pre">add()</span></code>, <code class="docutils literal notranslate"><span class="pre">set()</span></code>, or <code class="docutils literal notranslate"><span class="pre">touch()</span></code> is called.</p>
<div class="section" id="s-creating-the-cache-table">
<span id="creating-the-cache-table"></span><h4>Creating the cache table<a class="headerlink" href="#creating-the-cache-table" title="Permalink to this headline">¶</a></h4>
<p>Before using the database cache, you must create the cache table with this
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createcachetable</span>
</pre></div>
</div>
<p>This creates a table in your database that is in the proper format that
Django’s database-cache system expects. The name of the table is taken from
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a>.</p>
<p>If you are using multiple database caches, <a class="reference internal" href="../../ref/django-admin/#django-admin-createcachetable"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">createcachetable</span></code></a> creates
one table for each cache.</p>
<p>If you are using multiple databases, <a class="reference internal" href="../../ref/django-admin/#django-admin-createcachetable"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">createcachetable</span></code></a> observes the
<code class="docutils literal notranslate"><span class="pre">allow_migrate()</span></code> method of your database routers (see below).</p>
<p>Like <a class="reference internal" href="../../ref/django-admin/#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a>, <a class="reference internal" href="../../ref/django-admin/#django-admin-createcachetable"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">createcachetable</span></code></a> won’t touch an existing
table. It will only create missing tables.</p>
<p>To print the SQL that would be run, rather than run it, use the
<a class="reference internal" href="../../ref/django-admin/#cmdoption-createcachetable-dry-run"><code class="xref std std-option docutils literal notranslate"><span class="pre">createcachetable</span> <span class="pre">--dry-run</span></code></a> option.</p>
</div>
<div class="section" id="s-multiple-databases">
<span id="multiple-databases"></span><h4>Multiple databases<a class="headerlink" href="#multiple-databases" title="Permalink to this headline">¶</a></h4>
<p>If you use database caching with multiple databases, you’ll also need
to set up routing instructions for your database cache table. For the
purposes of routing, the database cache table appears as a model named
<code class="docutils literal notranslate"><span class="pre">CacheEntry</span></code>, in an application named <code class="docutils literal notranslate"><span class="pre">django_cache</span></code>. This model
won’t appear in the models cache, but the model details can be used
for routing purposes.</p>
<p>For example, the following router would direct all cache read
operations to <code class="docutils literal notranslate"><span class="pre">cache_replica</span></code>, and all write operations to
<code class="docutils literal notranslate"><span class="pre">cache_primary</span></code>. The cache table will only be synchronized onto
<code class="docutils literal notranslate"><span class="pre">cache_primary</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CacheRouter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A router to control all database cache operations&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">db_for_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
        <span class="s2">&quot;All cache read operations go to the replica&quot;</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="o">==</span> <span class="s1">&#39;django_cache&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;cache_replica&#39;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
        <span class="s2">&quot;All cache write operations go to primary&quot;</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="o">==</span> <span class="s1">&#39;django_cache&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;cache_primary&#39;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">allow_migrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">hints</span><span class="p">):</span>
        <span class="s2">&quot;Only install the cache model on primary&quot;</span>
        <span class="k">if</span> <span class="n">app_label</span> <span class="o">==</span> <span class="s1">&#39;django_cache&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">db</span> <span class="o">==</span> <span class="s1">&#39;cache_primary&#39;</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
<p>If you don’t specify routing directions for the database cache model,
the cache backend will use the <code class="docutils literal notranslate"><span class="pre">default</span></code> database.</p>
<p>And if you don’t use the database cache backend, you don’t need to worry about
providing routing instructions for the database cache model.</p>
</div>
</div>
<div class="section" id="s-filesystem-caching">
<span id="filesystem-caching"></span><h3>Filesystem caching<a class="headerlink" href="#filesystem-caching" title="Permalink to this headline">¶</a></h3>
<p>The file-based backend serializes and stores each cache value as a separate
file. To use this backend set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> to
<code class="docutils literal notranslate"><span class="pre">&quot;django.core.cache.backends.filebased.FileBasedCache&quot;</span></code> and
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a> to a suitable directory. For example,
to store cached data in <code class="docutils literal notranslate"><span class="pre">/var/tmp/django_cache</span></code>, use this setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.filebased.FileBasedCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/tmp/django_cache&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you’re on Windows, put the drive letter at the beginning of the path,
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.filebased.FileBasedCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;c:/foo/bar&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The directory path should be absolute – that is, it should start at the root
of your filesystem. It doesn’t matter whether you put a slash at the end of the
setting.</p>
<p>Make sure the directory pointed-to by this setting either exists and is
readable and writable, or that it can be created by the system user under which
your web server runs. Continuing the above example, if your server runs as the
user <code class="docutils literal notranslate"><span class="pre">apache</span></code>, make sure the directory <code class="docutils literal notranslate"><span class="pre">/var/tmp/django_cache</span></code> exists and
is readable and writable by the user <code class="docutils literal notranslate"><span class="pre">apache</span></code>, or that it can be created by
the user <code class="docutils literal notranslate"><span class="pre">apache</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When the cache <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a> is contained within
<a class="reference internal" href="../../ref/settings/#std-setting-MEDIA_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code></a>, <a class="reference internal" href="../../ref/settings/#std-setting-STATIC_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_ROOT</span></code></a>, or
<a class="reference internal" href="../../ref/settings/#std-setting-STATICFILES_FINDERS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATICFILES_FINDERS</span></code></a>, sensitive data may be exposed.</p>
<p class="last">An attacker who gains access to the cache file can not only falsify HTML
content, which your site will trust, but also remotely execute arbitrary
code, as the data is serialized using <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(in Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a>.</p>
</div>
</div>
<div class="section" id="s-local-memory-caching">
<span id="s-id7"></span><span id="local-memory-caching"></span><span id="id7"></span><h3>Local-memory caching<a class="headerlink" href="#local-memory-caching" title="Permalink to this headline">¶</a></h3>
<p>This is the default cache if another is not specified in your settings file. If
you want the speed advantages of in-memory caching but don’t have the capability
of running Memcached, consider the local-memory cache backend. This cache is
per-process (see below) and thread-safe. To use it, set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> to <code class="docutils literal notranslate"><span class="pre">&quot;django.core.cache.backends.locmem.LocMemCache&quot;</span></code>. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.locmem.LocMemCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;unique-snowflake&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The cache <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a> is used to identify individual
memory stores. If you only have one <code class="docutils literal notranslate"><span class="pre">locmem</span></code> cache, you can omit the
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES-LOCATION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">LOCATION</span></code></a>; however, if you have more than one local
memory cache, you will need to assign a name to at least one of them in
order to keep them separate.</p>
<p>The cache uses a least-recently-used (LRU) culling strategy.</p>
<p>Note that each process will have its own private cache instance, which means no
cross-process caching is possible. This also means the local memory cache isn’t
particularly memory-efficient, so it’s probably not a good choice for
production environments. It’s nice for development.</p>
</div>
<div class="section" id="s-dummy-caching-for-development">
<span id="dummy-caching-for-development"></span><h3>Dummy caching (for development)<a class="headerlink" href="#dummy-caching-for-development" title="Permalink to this headline">¶</a></h3>
<p>Finally, Django comes with a “dummy” cache that doesn’t actually cache – it
just implements the cache interface without doing anything.</p>
<p>This is useful if you have a production site that uses heavy-duty caching in
various places but a development/test environment where you don’t want to cache
and don’t want to have to change your code to special-case the latter. To
activate dummy caching, set <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.dummy.DummyCache&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="s-using-a-custom-cache-backend">
<span id="using-a-custom-cache-backend"></span><h3>Using a custom cache backend<a class="headerlink" href="#using-a-custom-cache-backend" title="Permalink to this headline">¶</a></h3>
<p>While Django includes support for a number of cache backends out-of-the-box,
sometimes you might want to use a customized cache backend. To use an external
cache backend with Django, use the Python import path as the
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES-BACKEND"><code class="xref std std-setting docutils literal notranslate"><span class="pre">BACKEND</span></code></a> of the <a class="reference internal" href="../../ref/settings/#std-setting-CACHES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CACHES</span></code></a> setting, like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;path.to.backend&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you’re building your own backend, you can use the standard cache backends
as reference implementations. You’ll find the code in the
<code class="docutils literal notranslate"><span class="pre">django/core/cache/backends/</span></code> directory of the Django source.</p>
<p>Note: Without a really compelling reason, such as a host that doesn’t support
them, you should stick to the cache backends included with Django. They’ve
been well-tested and are well-documented.</p>
</div>
<div class="section" id="s-cache-arguments">
<span id="s-id8"></span><span id="cache-arguments"></span><span id="id8"></span><h3>Cache arguments<a class="headerlink" href="#cache-arguments" title="Permalink to this headline">¶</a></h3>
<p>Each cache backend can be given additional arguments to control caching
behavior. These arguments are provided as additional keys in the
<a class="reference internal" href="../../ref/settings/#std-setting-CACHES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CACHES</span></code></a> setting. Valid arguments are as follows:</p>
<ul>
<li><p class="first"><a class="reference internal" href="../../ref/settings/#std-setting-CACHES-TIMEOUT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIMEOUT</span></code></a>: The default timeout, in
seconds, to use for the cache. This argument defaults to <code class="docutils literal notranslate"><span class="pre">300</span></code> seconds (5 minutes).
You can set <code class="docutils literal notranslate"><span class="pre">TIMEOUT</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> so that, by default, cache keys never
expire. A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> causes keys to immediately expire (effectively
“don’t cache”).</p>
</li>
<li><p class="first"><a class="reference internal" href="../../ref/settings/#std-setting-CACHES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>: Any options that should be
passed to the cache backend. The list of valid options will vary
with each backend, and cache backends backed by a third-party library
will pass their options directly to the underlying cache library.</p>
<p>Cache backends that implement their own culling strategy (i.e.,
the <code class="docutils literal notranslate"><span class="pre">locmem</span></code>, <code class="docutils literal notranslate"><span class="pre">filesystem</span></code> and <code class="docutils literal notranslate"><span class="pre">database</span></code> backends) will
honor the following options:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">MAX_ENTRIES</span></code>: The maximum number of entries allowed in
the cache before old values are deleted. This argument
defaults to <code class="docutils literal notranslate"><span class="pre">300</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">CULL_FREQUENCY</span></code>: The fraction of entries that are culled
when <code class="docutils literal notranslate"><span class="pre">MAX_ENTRIES</span></code> is reached. The actual ratio is
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">/</span> <span class="pre">CULL_FREQUENCY</span></code>, so set <code class="docutils literal notranslate"><span class="pre">CULL_FREQUENCY</span></code> to <code class="docutils literal notranslate"><span class="pre">2</span></code> to
cull half the entries when <code class="docutils literal notranslate"><span class="pre">MAX_ENTRIES</span></code> is reached. This argument
should be an integer and defaults to <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
<p>A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> for <code class="docutils literal notranslate"><span class="pre">CULL_FREQUENCY</span></code> means that the
entire cache will be dumped when <code class="docutils literal notranslate"><span class="pre">MAX_ENTRIES</span></code> is reached.
On some backends (<code class="docutils literal notranslate"><span class="pre">database</span></code> in particular) this makes culling <em>much</em>
faster at the expense of more cache misses.</p>
</li>
</ul>
<p>The Memcached and Redis backends pass the contents of <a class="reference internal" href="../../ref/settings/#std-setting-CACHES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> as keyword arguments to the client constructors, allowing
for more advanced control of client behavior. For example usage, see below.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../ref/settings/#std-setting-CACHES-KEY_PREFIX"><code class="xref std std-setting docutils literal notranslate"><span class="pre">KEY_PREFIX</span></code></a>: A string that will be
automatically included (prepended by default) to all cache keys
used by the Django server.</p>
<p>See the <a class="reference internal" href="#cache-key-prefixing"><span class="std std-ref">cache documentation</span></a> for
more information.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../ref/settings/#std-setting-CACHES-VERSION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">VERSION</span></code></a>: The default version number
for cache keys generated by the Django server.</p>
<p>See the <a class="reference internal" href="#cache-versioning"><span class="std std-ref">cache documentation</span></a> for more
information.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../ref/settings/#std-setting-CACHES-KEY_FUNCTION"><code class="xref std std-setting docutils literal notranslate"><span class="pre">KEY_FUNCTION</span></code></a>
A string containing a dotted path to a function that defines how
to compose a prefix, version and key into a final cache key.</p>
<p>See the <a class="reference internal" href="#cache-key-transformation"><span class="std std-ref">cache documentation</span></a>
for more information.</p>
</li>
</ul>
<p>In this example, a filesystem backend is being configured with a timeout
of 60 seconds, and a maximum capacity of 1000 items:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.filebased.FileBasedCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/tmp/django_cache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TIMEOUT&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;MAX_ENTRIES&#39;</span><span class="p">:</span> <span class="mi">1000</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here’s an example configuration for a <code class="docutils literal notranslate"><span class="pre">pylibmc</span></code> based backend that enables
the binary protocol, SASL authentication, and the <code class="docutils literal notranslate"><span class="pre">ketama</span></code> behavior mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.memcached.PyLibMCCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1:11211&#39;</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;binary&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span>
            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;pass&#39;</span><span class="p">,</span>
            <span class="s1">&#39;behaviors&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;ketama&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here’s an example configuration for a <code class="docutils literal notranslate"><span class="pre">pymemcache</span></code> based backend that enables
client pooling (which may improve performance by keeping clients connected),
treats memcache/network errors as cache misses, and sets the <code class="docutils literal notranslate"><span class="pre">TCP_NODELAY</span></code>
flag on the connection’s socket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.memcached.PyMemcacheCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1:11211&#39;</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;no_delay&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;ignore_exc&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;max_pool_size&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;use_pooling&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here’s an example configuration for a <code class="docutils literal notranslate"><span class="pre">redis</span></code> based backend that selects
database <code class="docutils literal notranslate"><span class="pre">10</span></code> (by default Redis ships with 16 logical databases), specifies a
<a class="reference external" href="https://github.com/redis/redis-py#parsers">parser class</a> (<code class="docutils literal notranslate"><span class="pre">redis.connection.HiredisParser</span></code> will be used by default if
the <code class="docutils literal notranslate"><span class="pre">hiredis-py</span></code> package is installed), and sets a custom <a class="reference external" href="https://github.com/redis/redis-py#connection-pools">connection pool
class</a> (<code class="docutils literal notranslate"><span class="pre">redis.ConnectionPool</span></code> is used by default):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.redis.RedisCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;redis://127.0.0.1:6379&#39;</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
            <span class="s1">&#39;parser_class&#39;</span><span class="p">:</span> <span class="s1">&#39;redis.connection.PythonParser&#39;</span><span class="p">,</span>
            <span class="s1">&#39;pool_class&#39;</span><span class="p">:</span> <span class="s1">&#39;redis.BlockingConnectionPool&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-the-per-site-cache">
<span id="s-id9"></span><span id="the-per-site-cache"></span><span id="id9"></span><h2>The per-site cache<a class="headerlink" href="#the-per-site-cache" title="Permalink to this headline">¶</a></h2>
<p>Once the cache is set up, the simplest way to use caching is to cache your
entire site. You’ll need to add
<code class="docutils literal notranslate"><span class="pre">'django.middleware.cache.UpdateCacheMiddleware'</span></code> and
<code class="docutils literal notranslate"><span class="pre">'django.middleware.cache.FetchFromCacheMiddleware'</span></code> to your
<a class="reference internal" href="../../ref/settings/#std-setting-MIDDLEWARE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MIDDLEWARE</span></code></a> setting, as in this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;django.middleware.cache.UpdateCacheMiddleware&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.middleware.cache.FetchFromCacheMiddleware&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No, that’s not a typo: the “update” middleware must be first in the list,
and the “fetch” middleware must be last. The details are a bit obscure, but
see <a class="reference internal" href="#order-of-middleware">Order of MIDDLEWARE</a> below if you’d like the full story.</p>
</div>
<p>Then, add the following required settings to your Django settings file:</p>
<ul class="simple">

      </ul>
    </div>
  </div>



    
      <h3>Contents</h3>
      
        <ul>




</ul>
</li>





</ul>
</li>


</ul>
</li>







</ul>
</li>





</ul>
</li>
</ul>

      
    

    
      
    

    
      <nav aria-labelledby="breadcrumbs-header">
        <h3 id="breadcrumbs-header">You are here:</h3>
        <ul>
          
            
            
            
            
            
            
          </ul>
        </div>

        <div class="col-get-involved">
          <h3>Get Involved</h3>
          <ul>
            
            
            
            
            
          </ul>
        </div>

        <div class="col-get-help">
          <h3>Get Help</h3>
          <ul>
            
            
            
          </ul>
        </div>

        <div class="col-follow-us">
          <h3>Follow Us</h3>
          <ul>
            
            
            
            
          </ul>
        </div>

        <div class="col-support-us">
          <h3>Support Us</h3>
          <ul>
            
            
            
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="footer-logo">
        <a class="logo" href="https://www.djangoproject.com/">Django</a>
      </div>
      <ul class="thanks">
        <li>
          <span>Hosting by</span> <a class="in-kind-donors" href="https://www.djangoproject.com/fundraising/#in-kind-donors">In-kind
            donors</a>
        </li>
        <li class="design"><span>Design by</span> <a class="threespot" href="https://www.threespot.com">Threespot</a>
          <span class="ampersand">&amp;</span> <a class="andrevv" href="http://andrevv.com/">andrevv</a></li>
      </ul>
      <p class="copyright">&copy; 2005-2025
        <a href="https://www.djangoproject.com/foundation/"> Django Software
          Foundation</a> and individual contributors. Django is a
        <a href="https://www.djangoproject.com/trademarks/">registered
          trademark</a> of the Django Software Foundation.
      </p>
    </div>
  </div>

</footer>

    

    
    
    
    
  
    <div id="outdated-warning" class="doc-floating-warning">
      This document is for an insecure version of Django that is no longer supported. Please upgrade to a newer release!
    </div>
  

    
  </body>
</html>
