<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 33.7. The Fast-Path Interface</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/libpq-fastpath.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="33.7. The Fast-Path Interface" />
  <meta property="og:description" content="33.7.&amp;nbsp;The Fast-Path Interface PostgreSQL provides a fast-path interface to send simple function calls to the server. Tip This interface is …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/libpq-fastpath.html" title="PostgreSQL 17 - 33.7. The Fast-Path Interface" >Current</a>
                          (<a href="/docs/17/libpq-fastpath.html" title="PostgreSQL 17 - 33.7. The Fast-Path Interface" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/libpq-fastpath.html" title="PostgreSQL 16 - 33.7. The Fast-Path Interface" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/libpq-fastpath.html" title="PostgreSQL 15 - 33.7. The Fast-Path Interface" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/libpq-fastpath.html" title="PostgreSQL 14 - 33.7. The Fast-Path Interface" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/libpq-fastpath.html" title="PostgreSQL 13 - 33.7. The Fast-Path Interface" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/libpq-fastpath.html" title="PostgreSQL devel - 33.7. The Fast-Path Interface"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/libpq-fastpath.html" title="PostgreSQL 12 - 33.7. The Fast-Path Interface"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/libpq-fastpath.html" title="PostgreSQL 11 - 33.7. The Fast-Path Interface"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/libpq-fastpath.html" title="PostgreSQL 10 - 33.7. The Fast-Path Interface"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/libpq-fastpath.html" title="PostgreSQL 9.6 - 33.7. The Fast-Path Interface"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/libpq-fastpath.html" title="PostgreSQL 9.5 - 33.7. The Fast-Path Interface"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/libpq-fastpath.html" title="PostgreSQL 9.4 - 33.7. The Fast-Path Interface"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/libpq-fastpath.html" title="PostgreSQL 9.3 - 33.7. The Fast-Path Interface"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/libpq-fastpath.html" title="PostgreSQL 9.2 - 33.7. The Fast-Path Interface"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/libpq-fastpath.html" title="PostgreSQL 9.1 - 33.7. The Fast-Path Interface"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/libpq-fastpath.html" title="PostgreSQL 9.0 - 33.7. The Fast-Path Interface"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/libpq-fastpath.html" title="PostgreSQL 8.4 - 33.7. The Fast-Path Interface"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/libpq-fastpath.html" title="PostgreSQL 8.3 - 33.7. The Fast-Path Interface"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/libpq-fastpath.html" title="PostgreSQL 8.2 - 33.7. The Fast-Path Interface"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/libpq-fastpath.html" title="PostgreSQL 8.1 - 33.7. The Fast-Path Interface"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/libpq-fastpath.html" title="PostgreSQL 8.0 - 33.7. The Fast-Path Interface"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/libpq-fastpath.html" title="PostgreSQL 7.4 - 33.7. The Fast-Path Interface"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/libpq-fastpath.html" title="PostgreSQL 7.3 - 33.7. The Fast-Path Interface"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/libpq-fastpath.html" title="PostgreSQL 7.2 - 33.7. The Fast-Path Interface"  rel="nofollow">7.2</a>
                    
                       / 
                      <a href="/docs/7.1/libpq-fastpath.html" title="PostgreSQL 7.1 - 33.7. The Fast-Path Interface"  rel="nofollow">7.1</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">33.7.&nbsp;The Fast-Path Interface</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="libpq-cancel.html" title="33.6.&nbsp;Canceling Queries in Progress">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="libpq.html" title="Chapter&nbsp;33.&nbsp;libpq — C Library">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;33.&nbsp;<span xmlns="http://www.w3.org/1999/xhtml" class="application">libpq</span> — C Library</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="libpq-notify.html" title="33.8.&nbsp;Asynchronous Notification">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="LIBPQ-FASTPATH">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">33.7.&nbsp;The Fast-Path Interface</h2>
      </div>
    </div>
  </div><a id="id-1.7.3.14.2" class="indexterm" name="id-1.7.3.14.2"></a>
  <p><span class="productname">PostgreSQL</span> provides a fast-path interface to send simple function calls to the server.</p>
  <div class="tip">
    <h3 class="title">Tip</h3>
    <p>This interface is somewhat obsolete, as one can achieve similar performance and greater functionality by setting up a prepared statement to define the function call. Then, executing the statement with binary transmission of parameters and results substitutes for a fast-path function call.</p>
  </div>
  <p>The function <code class="function" id="LIBPQ-PQFN">PQfn</code><a id="id-1.7.3.14.5.2" class="indexterm" name="id-1.7.3.14.5.2"></a> requests execution of a server function via the fast-path interface:</p>
  <pre class="synopsis">
PGresult *PQfn(PGconn *conn,
               int fnid,
               int *result_buf,
               int *result_len,
               int result_is_int,
               const PQArgBlock *args,
               int nargs);

typedef struct
{
    int len;
    int isint;
    union
    {
        int *ptr;
        int integer;
    } u;
} PQArgBlock;
</pre>
  <p>The <em class="parameter"><code>fnid</code></em> argument is the OID of the function to be executed. <em class="parameter"><code>args</code></em> and <em class="parameter"><code>nargs</code></em> define the parameters to be passed to the function; they must match the declared function argument list. When the <em class="parameter"><code>isint</code></em> field of a parameter structure is true, the <em class="parameter"><code>u.integer</code></em> value is sent to the server as an integer of the indicated length (this must be 2 or 4 bytes); proper byte-swapping occurs. When <em class="parameter"><code>isint</code></em> is false, the indicated number of bytes at <em class="parameter"><code>*u.ptr</code></em> are sent with no processing; the data must be in the format expected by the server for binary transmission of the function's argument data type. (The declaration of <em class="parameter"><code>u.ptr</code></em> as being of type <code class="type">int *</code> is historical; it would be better to consider it <code class="type">void *</code>.) <em class="parameter"><code>result_buf</code></em> points to the buffer in which to place the function's return value. The caller must have allocated sufficient space to store the return value. (There is no check!) The actual result length in bytes will be returned in the integer pointed to by <em class="parameter"><code>result_len</code></em>. If a 2- or 4-byte integer result is expected, set <em class="parameter"><code>result_is_int</code></em> to 1, otherwise set it to 0. Setting <em class="parameter"><code>result_is_int</code></em> to 1 causes <span class="application">libpq</span> to byte-swap the value if necessary, so that it is delivered as a proper <code class="type">int</code> value for the client machine; note that a 4-byte integer is delivered into <em class="parameter"><code>*result_buf</code></em> for either allowed result size. When <em class="parameter"><code>result_is_int</code></em> is 0, the binary-format byte string sent by the server is returned unmodified. (In this case it's better to consider <em class="parameter"><code>result_buf</code></em> as being of type <code class="type">void *</code>.)</p>
  <p><code class="function">PQfn</code> always returns a valid <code class="structname">PGresult</code> pointer, with status <code class="literal">PGRES_COMMAND_OK</code> for success or <code class="literal">PGRES_FATAL_ERROR</code> if some problem was encountered. The result status should be checked before the result is used. The caller is responsible for freeing the <code class="structname">PGresult</code> with <a class="xref" href="libpq-exec.html#LIBPQ-PQCLEAR"><code class="function">PQclear</code></a> when it is no longer needed.</p>
  <p>To pass a NULL argument to the function, set the <em class="parameter"><code>len</code></em> field of that parameter structure to <code class="literal">-1</code>; the <em class="parameter"><code>isint</code></em> and <em class="parameter"><code>u</code></em> fields are then irrelevant. (But this works only in protocol 3.0 and later connections.)</p>
  <p>If the function returns NULL, <em class="parameter"><code>*result_len</code></em> is set to <code class="literal">-1</code>, and <em class="parameter"><code>*result_buf</code></em> is not modified. (This works only in protocol 3.0 and later connections; in protocol 2.0, neither <em class="parameter"><code>*result_len</code></em> nor <em class="parameter"><code>*result_buf</code></em> are modified.)</p>
  <p>Note that it is not possible to handle set-valued results when using this interface. Also, the function must be a plain function, not an aggregate, window function, or procedure.</p>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="libpq-cancel.html" title="33.6.&nbsp;Canceling Queries in Progress">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="libpq.html" title="Chapter&nbsp;33.&nbsp;libpq — C Library">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="libpq-notify.html" title="33.8.&nbsp;Asynchronous Notification">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">33.6.&nbsp;Canceling Queries in Progress&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;33.8.&nbsp;Asynchronous Notification</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/libpq-fastpath.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
