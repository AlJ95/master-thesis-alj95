<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: SPI_modifytuple</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/spi-spi-modifytuple.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="SPI_modifytuple" />
  <meta property="og:description" content="SPI_modifytuple SPI_modifytuple — create a row by replacing selected fields of a given row Synopsis HeapTuple SPI_modifytuple(Relation rel, HeapTuple row, …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/spi-spi-modifytuple.html" title="PostgreSQL 17 - SPI_modifytuple" >Current</a>
                          (<a href="/docs/17/spi-spi-modifytuple.html" title="PostgreSQL 17 - SPI_modifytuple" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/spi-spi-modifytuple.html" title="PostgreSQL 16 - SPI_modifytuple" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/spi-spi-modifytuple.html" title="PostgreSQL 15 - SPI_modifytuple" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/spi-spi-modifytuple.html" title="PostgreSQL 14 - SPI_modifytuple" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/spi-spi-modifytuple.html" title="PostgreSQL 13 - SPI_modifytuple" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/spi-spi-modifytuple.html" title="PostgreSQL devel - SPI_modifytuple"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/spi-spi-modifytuple.html" title="PostgreSQL 12 - SPI_modifytuple"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/spi-spi-modifytuple.html" title="PostgreSQL 11 - SPI_modifytuple"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/spi-spi-modifytuple.html" title="PostgreSQL 10 - SPI_modifytuple"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/spi-spi-modifytuple.html" title="PostgreSQL 9.6 - SPI_modifytuple"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/spi-spi-modifytuple.html" title="PostgreSQL 9.5 - SPI_modifytuple"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/spi-spi-modifytuple.html" title="PostgreSQL 9.4 - SPI_modifytuple"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/spi-spi-modifytuple.html" title="PostgreSQL 9.3 - SPI_modifytuple"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/spi-spi-modifytuple.html" title="PostgreSQL 9.2 - SPI_modifytuple"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/spi-spi-modifytuple.html" title="PostgreSQL 9.1 - SPI_modifytuple"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/spi-spi-modifytuple.html" title="PostgreSQL 9.0 - SPI_modifytuple"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/spi-spi-modifytuple.html" title="PostgreSQL 8.4 - SPI_modifytuple"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/spi-spi-modifytuple.html" title="PostgreSQL 8.3 - SPI_modifytuple"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/spi-spi-modifytuple.html" title="PostgreSQL 8.2 - SPI_modifytuple"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/spi-spi-modifytuple.html" title="PostgreSQL 8.1 - SPI_modifytuple"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/spi-spi-modifytuple.html" title="PostgreSQL 8.0 - SPI_modifytuple"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/spi-spi-modifytuple.html" title="PostgreSQL 7.4 - SPI_modifytuple"  rel="nofollow">7.4</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">SPI_modifytuple</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="spi-spi-returntuple.html" title="SPI_returntuple">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="spi-memory.html" title="46.3.&nbsp;Memory Management">Up</a></td>
      <th width="60%" align="center">46.3.&nbsp;Memory Management</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="spi-spi-freetuple.html" title="SPI_freetuple">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SPI-SPI-MODIFYTUPLE">
  <div class="titlepage"></div><a id="id-1.8.12.10.11.1" class="indexterm" name="id-1.8.12.10.11.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">SPI_modifytuple</span></h2>
    <p>SPI_modifytuple — create a row by replacing selected fields of a given row</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
HeapTuple SPI_modifytuple(Relation <em class="parameter"><code>rel</code></em>, HeapTuple <em class="parameter"><code>row</code></em>, int <em class="parameter"><code>ncols</code></em>,
                          int * <em class="parameter"><code>colnum</code></em>, Datum * <em class="parameter"><code>values</code></em>, const char * <em class="parameter"><code>nulls</code></em>)
</pre>
  </div>
  <div class="refsect1" id="id-1.8.12.10.11.5">
    <h2>Description</h2>
    <p><code class="function">SPI_modifytuple</code> creates a new row by substituting new values for selected columns, copying the original row's columns at other positions. The input row is not modified. The new row is returned in the upper executor context.</p>
    <p>This function can only be used while connected to SPI. Otherwise, it returns NULL and sets <code class="varname">SPI_result</code> to <code class="symbol">SPI_ERROR_UNCONNECTED</code>.</p>
  </div>
  <div class="refsect1" id="id-1.8.12.10.11.6">
    <h2>Arguments</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><code class="literal">Relation <em class="parameter"><code>rel</code></em></code></span></dt>
        <dd>
          <p>Used only as the source of the row descriptor for the row. (Passing a relation rather than a row descriptor is a misfeature.)</p>
        </dd>
        <dt><span class="term"><code class="literal">HeapTuple <em class="parameter"><code>row</code></em></code></span></dt>
        <dd>
          <p>row to be modified</p>
        </dd>
        <dt><span class="term"><code class="literal">int <em class="parameter"><code>ncols</code></em></code></span></dt>
        <dd>
          <p>number of columns to be changed</p>
        </dd>
        <dt><span class="term"><code class="literal">int * <em class="parameter"><code>colnum</code></em></code></span></dt>
        <dd>
          <p>an array of length <em class="parameter"><code>ncols</code></em>, containing the numbers of the columns that are to be changed (column numbers start at 1)</p>
        </dd>
        <dt><span class="term"><code class="literal">Datum * <em class="parameter"><code>values</code></em></code></span></dt>
        <dd>
          <p>an array of length <em class="parameter"><code>ncols</code></em>, containing the new values for the specified columns</p>
        </dd>
        <dt><span class="term"><code class="literal">const char * <em class="parameter"><code>nulls</code></em></code></span></dt>
        <dd>
          <p>an array of length <em class="parameter"><code>ncols</code></em>, describing which new values are null</p>
          <p>If <em class="parameter"><code>nulls</code></em> is <code class="symbol">NULL</code> then <code class="function">SPI_modifytuple</code> assumes that no new values are null. Otherwise, each entry of the <em class="parameter"><code>nulls</code></em> array should be <code class="literal">'&nbsp;'</code> if the corresponding new value is non-null, or <code class="literal">'n'</code> if the corresponding new value is null. (In the latter case, the actual value in the corresponding <em class="parameter"><code>values</code></em> entry doesn't matter.) Note that <em class="parameter"><code>nulls</code></em> is not a text string, just an array: it does not need a <code class="literal">'\0'</code> terminator.</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.8.12.10.11.7">
    <h2>Return Value</h2>
    <p>new row with modifications, allocated in the upper executor context, or <code class="symbol">NULL</code> on error (see <code class="varname">SPI_result</code> for an error indication)</p>
    <p>On error, <code class="varname">SPI_result</code> is set as follows:</p>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><code class="symbol">SPI_ERROR_ARGUMENT</code></span></dt>
        <dd>
          <p>if <em class="parameter"><code>rel</code></em> is <code class="symbol">NULL</code>, or if <em class="parameter"><code>row</code></em> is <code class="symbol">NULL</code>, or if <em class="parameter"><code>ncols</code></em> is less than or equal to 0, or if <em class="parameter"><code>colnum</code></em> is <code class="symbol">NULL</code>, or if <em class="parameter"><code>values</code></em> is <code class="symbol">NULL</code>.</p>
        </dd>
        <dt><span class="term"><code class="symbol">SPI_ERROR_NOATTRIBUTE</code></span></dt>
        <dd>
          <p>if <em class="parameter"><code>colnum</code></em> contains an invalid column number (less than or equal to 0 or greater than the number of columns in <em class="parameter"><code>row</code></em>)</p>
        </dd>
        <dt><span class="term"><code class="symbol">SPI_ERROR_UNCONNECTED</code></span></dt>
        <dd>
          <p>if SPI is not active</p>
        </dd>
      </dl>
    </div>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="spi-spi-returntuple.html" title="SPI_returntuple">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="spi-memory.html" title="46.3.&nbsp;Memory Management">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="spi-spi-freetuple.html" title="SPI_freetuple">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">SPI_returntuple&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;SPI_freetuple</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/spi-spi-modifytuple.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
