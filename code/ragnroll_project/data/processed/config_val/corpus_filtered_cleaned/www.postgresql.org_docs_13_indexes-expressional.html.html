<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 11.7. Indexes on Expressions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/indexes-expressional.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="11.7. Indexes on Expressions" />
  <meta property="og:description" content="11.7.&amp;nbsp;Indexes on Expressions An index column need not be just a column of the underlying table, but can be a …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/indexes-expressional.html" title="PostgreSQL 17 - 11.7. Indexes on Expressions" >Current</a>
                          (<a href="/docs/17/indexes-expressional.html" title="PostgreSQL 17 - 11.7. Indexes on Expressions" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/indexes-expressional.html" title="PostgreSQL 16 - 11.7. Indexes on Expressions" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/indexes-expressional.html" title="PostgreSQL 15 - 11.7. Indexes on Expressions" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/indexes-expressional.html" title="PostgreSQL 14 - 11.7. Indexes on Expressions" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/indexes-expressional.html" title="PostgreSQL 13 - 11.7. Indexes on Expressions" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/indexes-expressional.html" title="PostgreSQL devel - 11.7. Indexes on Expressions"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/indexes-expressional.html" title="PostgreSQL 12 - 11.7. Indexes on Expressions"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/indexes-expressional.html" title="PostgreSQL 11 - 11.7. Indexes on Expressions"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/indexes-expressional.html" title="PostgreSQL 10 - 11.7. Indexes on Expressions"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/indexes-expressional.html" title="PostgreSQL 9.6 - 11.7. Indexes on Expressions"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/indexes-expressional.html" title="PostgreSQL 9.5 - 11.7. Indexes on Expressions"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/indexes-expressional.html" title="PostgreSQL 9.4 - 11.7. Indexes on Expressions"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/indexes-expressional.html" title="PostgreSQL 9.3 - 11.7. Indexes on Expressions"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/indexes-expressional.html" title="PostgreSQL 9.2 - 11.7. Indexes on Expressions"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/indexes-expressional.html" title="PostgreSQL 9.1 - 11.7. Indexes on Expressions"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/indexes-expressional.html" title="PostgreSQL 9.0 - 11.7. Indexes on Expressions"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/indexes-expressional.html" title="PostgreSQL 8.4 - 11.7. Indexes on Expressions"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/indexes-expressional.html" title="PostgreSQL 8.3 - 11.7. Indexes on Expressions"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/indexes-expressional.html" title="PostgreSQL 8.2 - 11.7. Indexes on Expressions"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/indexes-expressional.html" title="PostgreSQL 8.1 - 11.7. Indexes on Expressions"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/indexes-expressional.html" title="PostgreSQL 8.0 - 11.7. Indexes on Expressions"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/indexes-expressional.html" title="PostgreSQL 7.4 - 11.7. Indexes on Expressions"  rel="nofollow">7.4</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">11.7.&nbsp;Indexes on Expressions</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="indexes-unique.html" title="11.6.&nbsp;Unique Indexes">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="indexes.html" title="Chapter&nbsp;11.&nbsp;Indexes">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;11.&nbsp;Indexes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="indexes-partial.html" title="11.8.&nbsp;Partial Indexes">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="INDEXES-EXPRESSIONAL">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">11.7.&nbsp;Indexes on Expressions</h2>
      </div>
    </div>
  </div><a id="id-1.5.10.10.2" class="indexterm" name="id-1.5.10.10.2"></a>
  <p>An index column need not be just a column of the underlying table, but can be a function or scalar expression computed from one or more columns of the table. This feature is useful to obtain fast access to tables based on the results of computations.</p>
  <p>For example, a common way to do case-insensitive comparisons is to use the <code class="function">lower</code> function:</p>
  <pre class="programlisting">
SELECT * FROM test1 WHERE lower(col1) = 'value';
</pre>
  <p>This query can use an index if one has been defined on the result of the <code class="literal">lower(col1)</code> function:</p>
  <pre class="programlisting">
CREATE INDEX test1_lower_col1_idx ON test1 (lower(col1));
</pre>
  <p>If we were to declare this index <code class="literal">UNIQUE</code>, it would prevent creation of rows whose <code class="literal">col1</code> values differ only in case, as well as rows whose <code class="literal">col1</code> values are actually identical. Thus, indexes on expressions can be used to enforce constraints that are not definable as simple unique constraints.</p>
  <p>As another example, if one often does queries like:</p>
  <pre class="programlisting">
SELECT * FROM people WHERE (first_name || ' ' || last_name) = 'John Smith';
</pre>
  <p>then it might be worth creating an index like this:</p>
  <pre class="programlisting">
CREATE INDEX people_names ON people ((first_name || ' ' || last_name));
</pre>
  <p>The syntax of the <code class="command">CREATE INDEX</code> command normally requires writing parentheses around index expressions, as shown in the second example. The parentheses can be omitted when the expression is just a function call, as in the first example.</p>
  <p>Index expressions are relatively expensive to maintain, because the derived expression(s) must be computed for each row insertion and <a class="link" href="storage-hot.html" title="69.7.&nbsp;Heap-Only Tuples (HOT)">non-HOT update.</a> However, the index expressions are <span class="emphasis"><em>not</em></span> recomputed during an indexed search, since they are already stored in the index. In both examples above, the system sees the query as just <code class="literal">WHERE indexedcolumn = 'constant'</code> and so the speed of the search is equivalent to any other simple index query. Thus, indexes on expressions are useful when retrieval speed is more important than insertion and update speed.</p>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="indexes-unique.html" title="11.6.&nbsp;Unique Indexes">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="indexes.html" title="Chapter&nbsp;11.&nbsp;Indexes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="indexes-partial.html" title="11.8.&nbsp;Partial Indexes">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">11.6.&nbsp;Unique Indexes&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;11.8.&nbsp;Partial Indexes</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/indexes-expressional.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
