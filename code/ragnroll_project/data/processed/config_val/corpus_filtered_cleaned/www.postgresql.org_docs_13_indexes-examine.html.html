<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 11.12. Examining Index Usage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/indexes-examine.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="11.12. Examining Index Usage" />
  <meta property="og:description" content="11.12.&amp;nbsp;Examining Index Usage Although indexes in PostgreSQL do not need maintenance or tuning, it is still important to check which …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/indexes-examine.html" title="PostgreSQL 17 - 11.12. Examining Index Usage" >Current</a>
                          (<a href="/docs/17/indexes-examine.html" title="PostgreSQL 17 - 11.12. Examining Index Usage" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/indexes-examine.html" title="PostgreSQL 16 - 11.12. Examining Index Usage" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/indexes-examine.html" title="PostgreSQL 15 - 11.12. Examining Index Usage" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/indexes-examine.html" title="PostgreSQL 14 - 11.12. Examining Index Usage" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/indexes-examine.html" title="PostgreSQL 13 - 11.12. Examining Index Usage" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/indexes-examine.html" title="PostgreSQL devel - 11.12. Examining Index Usage"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/indexes-examine.html" title="PostgreSQL 12 - 11.12. Examining Index Usage"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/indexes-examine.html" title="PostgreSQL 11 - 11.12. Examining Index Usage"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/indexes-examine.html" title="PostgreSQL 10 - 11.12. Examining Index Usage"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/indexes-examine.html" title="PostgreSQL 9.6 - 11.12. Examining Index Usage"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/indexes-examine.html" title="PostgreSQL 9.5 - 11.12. Examining Index Usage"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/indexes-examine.html" title="PostgreSQL 9.4 - 11.12. Examining Index Usage"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/indexes-examine.html" title="PostgreSQL 9.3 - 11.12. Examining Index Usage"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/indexes-examine.html" title="PostgreSQL 9.2 - 11.12. Examining Index Usage"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/indexes-examine.html" title="PostgreSQL 9.1 - 11.12. Examining Index Usage"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/indexes-examine.html" title="PostgreSQL 9.0 - 11.12. Examining Index Usage"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/indexes-examine.html" title="PostgreSQL 8.4 - 11.12. Examining Index Usage"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/indexes-examine.html" title="PostgreSQL 8.3 - 11.12. Examining Index Usage"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/indexes-examine.html" title="PostgreSQL 8.2 - 11.12. Examining Index Usage"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/indexes-examine.html" title="PostgreSQL 8.1 - 11.12. Examining Index Usage"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/indexes-examine.html" title="PostgreSQL 8.0 - 11.12. Examining Index Usage"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/indexes-examine.html" title="PostgreSQL 7.4 - 11.12. Examining Index Usage"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/indexes-examine.html" title="PostgreSQL 7.3 - 11.12. Examining Index Usage"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/indexes-examine.html" title="PostgreSQL 7.2 - 11.12. Examining Index Usage"  rel="nofollow">7.2</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">11.12.&nbsp;Examining Index Usage</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="indexes-collations.html" title="11.11.&nbsp;Indexes and Collations">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="indexes.html" title="Chapter&nbsp;11.&nbsp;Indexes">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;11.&nbsp;Indexes</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="textsearch.html" title="Chapter&nbsp;12.&nbsp;Full Text Search">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="INDEXES-EXAMINE">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">11.12.&nbsp;Examining Index Usage</h2>
      </div>
    </div>
  </div><a id="id-1.5.10.15.2" class="indexterm" name="id-1.5.10.15.2"></a>
  <p>Although indexes in <span class="productname">PostgreSQL</span> do not need maintenance or tuning, it is still important to check which indexes are actually used by the real-life query workload. Examining index usage for an individual query is done with the <a class="xref" href="sql-explain.html" title="EXPLAIN"><span class="refentrytitle">EXPLAIN</span></a> command; its application for this purpose is illustrated in <a class="xref" href="using-explain.html" title="14.1.&nbsp;Using EXPLAIN">Section&nbsp;14.1</a>. It is also possible to gather overall statistics about index usage in a running server, as described in <a class="xref" href="monitoring-stats.html" title="27.2.&nbsp;The Statistics Collector">Section&nbsp;27.2</a>.</p>
  <p>It is difficult to formulate a general procedure for determining which indexes to create. There are a number of typical cases that have been shown in the examples throughout the previous sections. A good deal of experimentation is often necessary. The rest of this section gives some tips for that:</p>
  <div class="itemizedlist">
    <ul class="itemizedlist" style="list-style-type: disc;">
      <li class="listitem">
        <p>Always run <a class="xref" href="sql-analyze.html" title="ANALYZE"><span class="refentrytitle">ANALYZE</span></a> first. This command collects statistics about the distribution of the values in the table. This information is required to estimate the number of rows returned by a query, which is needed by the planner to assign realistic costs to each possible query plan. In absence of any real statistics, some default values are assumed, which are almost certain to be inaccurate. Examining an application's index usage without having run <code class="command">ANALYZE</code> is therefore a lost cause. See <a class="xref" href="routine-vacuuming.html#VACUUM-FOR-STATISTICS" title="24.1.3.&nbsp;Updating Planner Statistics">Section&nbsp;24.1.3</a> and <a class="xref" href="routine-vacuuming.html#AUTOVACUUM" title="24.1.6.&nbsp;The Autovacuum Daemon">Section&nbsp;24.1.6</a> for more information.</p>
      </li>
      <li class="listitem">
        <p>Use real data for experimentation. Using test data for setting up indexes will tell you what indexes you need for the test data, but that is all.</p>
        <p>It is especially fatal to use very small test data sets. While selecting 1000 out of 100000 rows could be a candidate for an index, selecting 1 out of 100 rows will hardly be, because the 100 rows probably fit within a single disk page, and there is no plan that can beat sequentially fetching 1 disk page.</p>
        <p>Also be careful when making up test data, which is often unavoidable when the application is not yet in production. Values that are very similar, completely random, or inserted in sorted order will skew the statistics away from the distribution that real data would have.</p>
      </li>
      <li class="listitem">
        <p>When indexes are not used, it can be useful for testing to force their use. There are run-time parameters that can turn off various plan types (see <a class="xref" href="runtime-config-query.html#RUNTIME-CONFIG-QUERY-ENABLE" title="19.7.1.&nbsp;Planner Method Configuration">Section&nbsp;19.7.1</a>). For instance, turning off sequential scans (<code class="varname">enable_seqscan</code>) and nested-loop joins (<code class="varname">enable_nestloop</code>), which are the most basic plans, will force the system to use a different plan. If the system still chooses a sequential scan or nested-loop join then there is probably a more fundamental reason why the index is not being used; for example, the query condition does not match the index. (What kind of query can use what kind of index is explained in the previous sections.)</p>
      </li>
      <li class="listitem">
        <p>If forcing index usage does use the index, then there are two possibilities: Either the system is right and using the index is indeed not appropriate, or the cost estimates of the query plans are not reflecting reality. So you should time your query with and without indexes. The <code class="command">EXPLAIN ANALYZE</code> command can be useful here.</p>
      </li>
      <li class="listitem">
        <p>If it turns out that the cost estimates are wrong, there are, again, two possibilities. The total cost is computed from the per-row costs of each plan node times the selectivity estimate of the plan node. The costs estimated for the plan nodes can be adjusted via run-time parameters (described in <a class="xref" href="runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS" title="19.7.2.&nbsp;Planner Cost Constants">Section&nbsp;19.7.2</a>). An inaccurate selectivity estimate is due to insufficient statistics. It might be possible to improve this by tuning the statistics-gathering parameters (see <a class="xref" href="sql-altertable.html" title="ALTER TABLE"><span class="refentrytitle">ALTER TABLE</span></a>).</p>
        <p>If you do not succeed in adjusting the costs to be more appropriate, then you might have to resort to forcing index usage explicitly. You might also want to contact the <span class="productname">PostgreSQL</span> developers to examine the issue.</p>
      </li>
    </ul>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="indexes-collations.html" title="11.11.&nbsp;Indexes and Collations">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="indexes.html" title="Chapter&nbsp;11.&nbsp;Indexes">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="textsearch.html" title="Chapter&nbsp;12.&nbsp;Full Text Search">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">11.11.&nbsp;Indexes and Collations&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;12.&nbsp;Full Text Search</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/indexes-examine.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
