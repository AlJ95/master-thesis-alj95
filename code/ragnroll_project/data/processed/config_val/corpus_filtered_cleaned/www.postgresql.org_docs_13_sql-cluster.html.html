<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: CLUSTER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/sql-cluster.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="CLUSTER" />
  <meta property="og:description" content="CLUSTER CLUSTER — cluster a table according to an index Synopsis CLUSTER [VERBOSE] table_name [ USING index_name ] CLUSTER [VERBOSE] …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/sql-cluster.html" title="PostgreSQL 17 - CLUSTER" >Current</a>
                          (<a href="/docs/17/sql-cluster.html" title="PostgreSQL 17 - CLUSTER" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/sql-cluster.html" title="PostgreSQL 16 - CLUSTER" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/sql-cluster.html" title="PostgreSQL 15 - CLUSTER" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/sql-cluster.html" title="PostgreSQL 14 - CLUSTER" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/sql-cluster.html" title="PostgreSQL 13 - CLUSTER" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/sql-cluster.html" title="PostgreSQL devel - CLUSTER"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/sql-cluster.html" title="PostgreSQL 12 - CLUSTER"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/sql-cluster.html" title="PostgreSQL 11 - CLUSTER"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/sql-cluster.html" title="PostgreSQL 10 - CLUSTER"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/sql-cluster.html" title="PostgreSQL 9.6 - CLUSTER"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/sql-cluster.html" title="PostgreSQL 9.5 - CLUSTER"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/sql-cluster.html" title="PostgreSQL 9.4 - CLUSTER"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/sql-cluster.html" title="PostgreSQL 9.3 - CLUSTER"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/sql-cluster.html" title="PostgreSQL 9.2 - CLUSTER"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/sql-cluster.html" title="PostgreSQL 9.1 - CLUSTER"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/sql-cluster.html" title="PostgreSQL 9.0 - CLUSTER"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/sql-cluster.html" title="PostgreSQL 8.4 - CLUSTER"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/sql-cluster.html" title="PostgreSQL 8.3 - CLUSTER"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/sql-cluster.html" title="PostgreSQL 8.2 - CLUSTER"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/sql-cluster.html" title="PostgreSQL 8.1 - CLUSTER"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/sql-cluster.html" title="PostgreSQL 8.0 - CLUSTER"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/sql-cluster.html" title="PostgreSQL 7.4 - CLUSTER"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/sql-cluster.html" title="PostgreSQL 7.3 - CLUSTER"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/sql-cluster.html" title="PostgreSQL 7.2 - CLUSTER"  rel="nofollow">7.2</a>
                    
                       / 
                      <a href="/docs/7.1/sql-cluster.html" title="PostgreSQL 7.1 - CLUSTER"  rel="nofollow">7.1</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">CLUSTER</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="sql-close.html" title="CLOSE">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <th width="60%" align="center">SQL Commands</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="sql-comment.html" title="COMMENT">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SQL-CLUSTER">
  <div class="titlepage"></div><a id="id-1.9.3.51.1" class="indexterm" name="id-1.9.3.51.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">CLUSTER</span></h2>
    <p>CLUSTER — cluster a table according to an index</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
CLUSTER [VERBOSE] <em class="replaceable"><code>table_name</code></em> [ USING <em class="replaceable"><code>index_name</code></em> ]
CLUSTER [VERBOSE]
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.51.5">
    <h2>Description</h2>
    <p><code class="command">CLUSTER</code> instructs <span class="productname">PostgreSQL</span> to cluster the table specified by <em class="replaceable"><code>table_name</code></em> based on the index specified by <em class="replaceable"><code>index_name</code></em>. The index must already have been defined on <em class="replaceable"><code>table_name</code></em>.</p>
    <p>When a table is clustered, it is physically reordered based on the index information. Clustering is a one-time operation: when the table is subsequently updated, the changes are not clustered. That is, no attempt is made to store new or updated rows according to their index order. (If one wishes, one can periodically recluster by issuing the command again. Also, setting the table's <code class="literal">fillfactor</code> storage parameter to less than 100% can aid in preserving cluster ordering during updates, since updated rows are kept on the same page if enough space is available there.)</p>
    <p>When a table is clustered, <span class="productname">PostgreSQL</span> remembers which index it was clustered by. The form <code class="command">CLUSTER <em class="replaceable"><code>table_name</code></em></code> reclusters the table using the same index as before. You can also use the <code class="literal">CLUSTER</code> or <code class="literal">SET WITHOUT CLUSTER</code> forms of <a class="xref" href="sql-altertable.html" title="ALTER TABLE"><span class="refentrytitle">ALTER TABLE</span></a> to set the index to be used for future cluster operations, or to clear any previous setting.</p>
    <p><code class="command">CLUSTER</code> without any parameter reclusters all the previously-clustered tables in the current database that the calling user owns, or all such tables if called by a superuser. This form of <code class="command">CLUSTER</code> cannot be executed inside a transaction block.</p>
    <p>When a table is being clustered, an <code class="literal">ACCESS EXCLUSIVE</code> lock is acquired on it. This prevents any other database operations (both reads and writes) from operating on the table until the <code class="command">CLUSTER</code> is finished.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.51.6">
    <h2>Parameters</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="replaceable"><code>table_name</code></em></span></dt>
        <dd>
          <p>The name (possibly schema-qualified) of a table.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>index_name</code></em></span></dt>
        <dd>
          <p>The name of an index.</p>
        </dd>
        <dt><span class="term"><code class="literal">VERBOSE</code></span></dt>
        <dd>
          <p>Prints a progress report as each table is clustered.</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.9.3.51.7">
    <h2>Notes</h2>
    <p>In cases where you are accessing single rows randomly within a table, the actual order of the data in the table is unimportant. However, if you tend to access some data more than others, and there is an index that groups them together, you will benefit from using <code class="command">CLUSTER</code>. If you are requesting a range of indexed values from a table, or a single indexed value that has multiple rows that match, <code class="command">CLUSTER</code> will help because once the index identifies the table page for the first row that matches, all other rows that match are probably already on the same table page, and so you save disk accesses and speed up the query.</p>
    <p><code class="command">CLUSTER</code> can re-sort the table using either an index scan on the specified index, or (if the index is a b-tree) a sequential scan followed by sorting. It will attempt to choose the method that will be faster, based on planner cost parameters and available statistical information.</p>
    <p>When an index scan is used, a temporary copy of the table is created that contains the table data in the index order. Temporary copies of each index on the table are created as well. Therefore, you need free space on disk at least equal to the sum of the table size and the index sizes.</p>
    <p>When a sequential scan and sort is used, a temporary sort file is also created, so that the peak temporary space requirement is as much as double the table size, plus the index sizes. This method is often faster than the index scan method, but if the disk space requirement is intolerable, you can disable this choice by temporarily setting <a class="xref" href="runtime-config-query.html#GUC-ENABLE-SORT">enable_sort</a> to <code class="literal">off</code>.</p>
    <p>It is advisable to set <a class="xref" href="runtime-config-resource.html#GUC-MAINTENANCE-WORK-MEM">maintenance_work_mem</a> to a reasonably large value (but not more than the amount of RAM you can dedicate to the <code class="command">CLUSTER</code> operation) before clustering.</p>
    <p>Because the planner records statistics about the ordering of tables, it is advisable to run <a class="xref" href="sql-analyze.html" title="ANALYZE"><span class="refentrytitle">ANALYZE</span></a> on the newly clustered table. Otherwise, the planner might make poor choices of query plans.</p>
    <p>Because <code class="command">CLUSTER</code> remembers which indexes are clustered, one can cluster the tables one wants clustered manually the first time, then set up a periodic maintenance script that executes <code class="command">CLUSTER</code> without any parameters, so that the desired tables are periodically reclustered.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.51.8">
    <h2>Examples</h2>
    <p>Cluster the table <code class="literal">employees</code> on the basis of its index <code class="literal">employees_ind</code>:</p>
    <pre class="programlisting">
CLUSTER employees USING employees_ind;
</pre>
    <p>Cluster the <code class="literal">employees</code> table using the same index that was used before:</p>
    <pre class="programlisting">
CLUSTER employees;
</pre>
    <p>Cluster all tables in the database that have previously been clustered:</p>
    <pre class="programlisting">
CLUSTER;
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.51.9">
    <h2>Compatibility</h2>
    <p>There is no <code class="command">CLUSTER</code> statement in the SQL standard.</p>
    <p>The syntax</p>
    <pre class="synopsis">
CLUSTER <em class="replaceable"><code>index_name</code></em> ON <em class="replaceable"><code>table_name</code></em>
</pre>
    <p>is also supported for compatibility with pre-8.3 <span class="productname">PostgreSQL</span> versions.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.51.10">
    <h2>See Also</h2><span class="simplelist"><a class="xref" href="app-clusterdb.html" title="clusterdb"><span class="refentrytitle"><span class="application">clusterdb</span></span></a></span>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="sql-close.html" title="CLOSE">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="sql-comment.html" title="COMMENT">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">CLOSE&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;COMMENT</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/sql-cluster.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
