<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 33.12. Notice Processing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/libpq-notice-processing.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="33.12. Notice Processing" />
  <meta property="og:description" content="33.12.&amp;nbsp;Notice Processing Notice and warning messages generated by the server are not returned by the query execution functions, since they …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/libpq-notice-processing.html" title="PostgreSQL 17 - 33.12. Notice Processing" >Current</a>
                          (<a href="/docs/17/libpq-notice-processing.html" title="PostgreSQL 17 - 33.12. Notice Processing" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/libpq-notice-processing.html" title="PostgreSQL 16 - 33.12. Notice Processing" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/libpq-notice-processing.html" title="PostgreSQL 15 - 33.12. Notice Processing" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/libpq-notice-processing.html" title="PostgreSQL 14 - 33.12. Notice Processing" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/libpq-notice-processing.html" title="PostgreSQL 13 - 33.12. Notice Processing" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/libpq-notice-processing.html" title="PostgreSQL devel - 33.12. Notice Processing"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/libpq-notice-processing.html" title="PostgreSQL 12 - 33.12. Notice Processing"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/libpq-notice-processing.html" title="PostgreSQL 11 - 33.12. Notice Processing"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/libpq-notice-processing.html" title="PostgreSQL 10 - 33.12. Notice Processing"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/libpq-notice-processing.html" title="PostgreSQL 9.6 - 33.12. Notice Processing"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/libpq-notice-processing.html" title="PostgreSQL 9.5 - 33.12. Notice Processing"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/libpq-notice-processing.html" title="PostgreSQL 9.4 - 33.12. Notice Processing"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/libpq-notice-processing.html" title="PostgreSQL 9.3 - 33.12. Notice Processing"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/libpq-notice-processing.html" title="PostgreSQL 9.2 - 33.12. Notice Processing"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/libpq-notice-processing.html" title="PostgreSQL 9.1 - 33.12. Notice Processing"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/libpq-notice-processing.html" title="PostgreSQL 9.0 - 33.12. Notice Processing"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/libpq-notice-processing.html" title="PostgreSQL 8.4 - 33.12. Notice Processing"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/libpq-notice-processing.html" title="PostgreSQL 8.3 - 33.12. Notice Processing"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/libpq-notice-processing.html" title="PostgreSQL 8.2 - 33.12. Notice Processing"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/libpq-notice-processing.html" title="PostgreSQL 8.1 - 33.12. Notice Processing"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/libpq-notice-processing.html" title="PostgreSQL 8.0 - 33.12. Notice Processing"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/libpq-notice-processing.html" title="PostgreSQL 7.4 - 33.12. Notice Processing"  rel="nofollow">7.4</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">33.12.&nbsp;Notice Processing</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="libpq-misc.html" title="33.11.&nbsp;Miscellaneous Functions">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="libpq.html" title="Chapter&nbsp;33.&nbsp;libpq — C Library">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;33.&nbsp;<span xmlns="http://www.w3.org/1999/xhtml" class="application">libpq</span> — C Library</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="libpq-events.html" title="33.13.&nbsp;Event System">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="LIBPQ-NOTICE-PROCESSING">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">33.12.&nbsp;Notice Processing</h2>
      </div>
    </div>
  </div><a id="id-1.7.3.19.2" class="indexterm" name="id-1.7.3.19.2"></a>
  <p>Notice and warning messages generated by the server are not returned by the query execution functions, since they do not imply failure of the query. Instead they are passed to a notice handling function, and execution continues normally after the handler returns. The default notice handling function prints the message on <code class="filename">stderr</code>, but the application can override this behavior by supplying its own handling function.</p>
  <p>For historical reasons, there are two levels of notice handling, called the notice receiver and notice processor. The default behavior is for the notice receiver to format the notice and pass a string to the notice processor for printing. However, an application that chooses to provide its own notice receiver will typically ignore the notice processor layer and just do all the work in the notice receiver.</p>
  <p>The function <code class="function" id="LIBPQ-PQSETNOTICERECEIVER">PQsetNoticeReceiver</code> <a id="id-1.7.3.19.5.2" class="indexterm" name="id-1.7.3.19.5.2"></a> <a id="id-1.7.3.19.5.3" class="indexterm" name="id-1.7.3.19.5.3"></a> sets or examines the current notice receiver for a connection object. Similarly, <code class="function" id="LIBPQ-PQSETNOTICEPROCESSOR">PQsetNoticeProcessor</code> <a id="id-1.7.3.19.5.5" class="indexterm" name="id-1.7.3.19.5.5"></a> <a id="id-1.7.3.19.5.6" class="indexterm" name="id-1.7.3.19.5.6"></a> sets or examines the current notice processor.</p>
  <pre class="synopsis">
typedef void (*PQnoticeReceiver) (void *arg, const PGresult *res);

PQnoticeReceiver
PQsetNoticeReceiver(PGconn *conn,
                    PQnoticeReceiver proc,
                    void *arg);

typedef void (*PQnoticeProcessor) (void *arg, const char *message);

PQnoticeProcessor
PQsetNoticeProcessor(PGconn *conn,
                     PQnoticeProcessor proc,
                     void *arg);
</pre>
  <p>Each of these functions returns the previous notice receiver or processor function pointer, and sets the new value. If you supply a null function pointer, no action is taken, but the current pointer is returned.</p>
  <p>When a notice or warning message is received from the server, or generated internally by <span class="application">libpq</span>, the notice receiver function is called. It is passed the message in the form of a <code class="symbol">PGRES_NONFATAL_ERROR</code> <code class="structname">PGresult</code>. (This allows the receiver to extract individual fields using <a class="xref" href="libpq-exec.html#LIBPQ-PQRESULTERRORFIELD"><code class="function">PQresultErrorField</code></a>, or obtain a complete preformatted message using <a class="xref" href="libpq-exec.html#LIBPQ-PQRESULTERRORMESSAGE"><code class="function">PQresultErrorMessage</code></a> or <a class="xref" href="libpq-exec.html#LIBPQ-PQRESULTVERBOSEERRORMESSAGE"><code class="function">PQresultVerboseErrorMessage</code></a>.) The same void pointer passed to <code class="function">PQsetNoticeReceiver</code> is also passed. (This pointer can be used to access application-specific state if needed.)</p>
  <p>The default notice receiver simply extracts the message (using <a class="xref" href="libpq-exec.html#LIBPQ-PQRESULTERRORMESSAGE"><code class="function">PQresultErrorMessage</code></a>) and passes it to the notice processor.</p>
  <p>The notice processor is responsible for handling a notice or warning message given in text form. It is passed the string text of the message (including a trailing newline), plus a void pointer that is the same one passed to <code class="function">PQsetNoticeProcessor</code>. (This pointer can be used to access application-specific state if needed.)</p>
  <p>The default notice processor is simply:</p>
  <pre class="programlisting">
static void
defaultNoticeProcessor(void *arg, const char *message)
{
    fprintf(stderr, "%s", message);
}
</pre>
  <p>Once you have set a notice receiver or processor, you should expect that that function could be called as long as either the <code class="structname">PGconn</code> object or <code class="structname">PGresult</code> objects made from it exist. At creation of a <code class="structname">PGresult</code>, the <code class="structname">PGconn</code>'s current notice handling pointers are copied into the <code class="structname">PGresult</code> for possible use by functions like <a class="xref" href="libpq-exec.html#LIBPQ-PQGETVALUE"><code class="function">PQgetvalue</code></a>.</p>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="libpq-misc.html" title="33.11.&nbsp;Miscellaneous Functions">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="libpq.html" title="Chapter&nbsp;33.&nbsp;libpq — C Library">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="libpq-events.html" title="33.13.&nbsp;Event System">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">33.11.&nbsp;Miscellaneous Functions&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;33.13.&nbsp;Event System</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/libpq-notice-processing.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
