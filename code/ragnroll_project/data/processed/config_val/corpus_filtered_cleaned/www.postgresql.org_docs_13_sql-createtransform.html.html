<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: CREATE TRANSFORM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/sql-createtransform.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="CREATE TRANSFORM" />
  <meta property="og:description" content="CREATE TRANSFORM CREATE TRANSFORM — define a new transform Synopsis CREATE [ OR REPLACE ] TRANSFORM FOR type_name LANGUAGE lang_name …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/sql-createtransform.html" title="PostgreSQL 17 - CREATE TRANSFORM" >Current</a>
                          (<a href="/docs/17/sql-createtransform.html" title="PostgreSQL 17 - CREATE TRANSFORM" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/sql-createtransform.html" title="PostgreSQL 16 - CREATE TRANSFORM" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/sql-createtransform.html" title="PostgreSQL 15 - CREATE TRANSFORM" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/sql-createtransform.html" title="PostgreSQL 14 - CREATE TRANSFORM" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/sql-createtransform.html" title="PostgreSQL 13 - CREATE TRANSFORM" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/sql-createtransform.html" title="PostgreSQL devel - CREATE TRANSFORM"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/sql-createtransform.html" title="PostgreSQL 12 - CREATE TRANSFORM"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/sql-createtransform.html" title="PostgreSQL 11 - CREATE TRANSFORM"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/sql-createtransform.html" title="PostgreSQL 10 - CREATE TRANSFORM"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/sql-createtransform.html" title="PostgreSQL 9.6 - CREATE TRANSFORM"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/sql-createtransform.html" title="PostgreSQL 9.5 - CREATE TRANSFORM"  rel="nofollow">9.5</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">CREATE TRANSFORM</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="sql-createtstemplate.html" title="CREATE TEXT SEARCH TEMPLATE">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <th width="60%" align="center">SQL Commands</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="sql-createtrigger.html" title="CREATE TRIGGER">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SQL-CREATETRANSFORM">
  <div class="titlepage"></div><a id="id-1.9.3.92.1" class="indexterm" name="id-1.9.3.92.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">CREATE TRANSFORM</span></h2>
    <p>CREATE TRANSFORM — define a new transform</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
CREATE [ OR REPLACE ] TRANSFORM FOR <em class="replaceable"><code>type_name</code></em> LANGUAGE <em class="replaceable"><code>lang_name</code></em> (
    FROM SQL WITH FUNCTION <em class="replaceable"><code>from_sql_function_name</code></em> [ (<em class="replaceable"><code>argument_type</code></em> [, ...]) ],
    TO SQL WITH FUNCTION <em class="replaceable"><code>to_sql_function_name</code></em> [ (<em class="replaceable"><code>argument_type</code></em> [, ...]) ]
);
</pre>
  </div>
  <div class="refsect1" id="SQL-CREATETRANSFORM-DESCRIPTION">
    <h2>Description</h2>
    <p><code class="command">CREATE TRANSFORM</code> defines a new transform. <code class="command">CREATE OR REPLACE TRANSFORM</code> will either create a new transform, or replace an existing definition.</p>
    <p>A transform specifies how to adapt a data type to a procedural language. For example, when writing a function in PL/Python using the <code class="type">hstore</code> type, PL/Python has no prior knowledge how to present <code class="type">hstore</code> values in the Python environment. Language implementations usually default to using the text representation, but that is inconvenient when, for example, an associative array or a list would be more appropriate.</p>
    <p>A transform specifies two functions:</p>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>A <span class="quote">“<span class="quote">from SQL</span>”</span> function that converts the type from the SQL environment to the language. This function will be invoked on the arguments of a function written in the language.</p>
        </li>
        <li class="listitem">
          <p>A <span class="quote">“<span class="quote">to SQL</span>”</span> function that converts the type from the language to the SQL environment. This function will be invoked on the return value of a function written in the language.</p>
        </li>
      </ul>
    </div>
    <p>It is not necessary to provide both of these functions. If one is not specified, the language-specific default behavior will be used if necessary. (To prevent a transformation in a certain direction from happening at all, you could also write a transform function that always errors out.)</p>
    <p>To be able to create a transform, you must own and have <code class="literal">USAGE</code> privilege on the type, have <code class="literal">USAGE</code> privilege on the language, and own and have <code class="literal">EXECUTE</code> privilege on the from-SQL and to-SQL functions, if specified.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.92.6">
    <h2>Parameters</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="replaceable"><code>type_name</code></em></span></dt>
        <dd>
          <p>The name of the data type of the transform.</p>
        </dd>
        <dt><span class="term"><em class="replaceable"><code>lang_name</code></em></span></dt>
        <dd>
          <p>The name of the language of the transform.</p>
        </dd>
        <dt><span class="term"><code class="literal"><em class="replaceable"><code>from_sql_function_name</code></em>[(<em class="replaceable"><code>argument_type</code></em> [, ...])]</code></span></dt>
        <dd>
          <p>The name of the function for converting the type from the SQL environment to the language. It must take one argument of type <code class="type">internal</code> and return type <code class="type">internal</code>. The actual argument will be of the type for the transform, and the function should be coded as if it were. (But it is not allowed to declare an SQL-level function returning <code class="type">internal</code> without at least one argument of type <code class="type">internal</code>.) The actual return value will be something specific to the language implementation. If no argument list is specified, the function name must be unique in its schema.</p>
        </dd>
        <dt><span class="term"><code class="literal"><em class="replaceable"><code>to_sql_function_name</code></em>[(<em class="replaceable"><code>argument_type</code></em> [, ...])]</code></span></dt>
        <dd>
          <p>The name of the function for converting the type from the language to the SQL environment. It must take one argument of type <code class="type">internal</code> and return the type that is the type for the transform. The actual argument value will be something specific to the language implementation. If no argument list is specified, the function name must be unique in its schema.</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="SQL-CREATETRANSFORM-NOTES">
    <h2>Notes</h2>
    <p>Use <a class="xref" href="sql-droptransform.html" title="DROP TRANSFORM"><span class="refentrytitle">DROP TRANSFORM</span></a> to remove transforms.</p>
  </div>
  <div class="refsect1" id="SQL-CREATETRANSFORM-EXAMPLES">
    <h2>Examples</h2>
    <p>To create a transform for type <code class="type">hstore</code> and language <code class="literal">plpythonu</code>, first set up the type and the language:</p>
    <pre class="programlisting">
CREATE TYPE hstore ...;

CREATE EXTENSION plpythonu;
</pre>
    <p>Then create the necessary functions:</p>
    <pre class="programlisting">
CREATE FUNCTION hstore_to_plpython(val internal) RETURNS internal
LANGUAGE C STRICT IMMUTABLE
AS ...;

CREATE FUNCTION plpython_to_hstore(val internal) RETURNS hstore
LANGUAGE C STRICT IMMUTABLE
AS ...;
</pre>
    <p>And finally create the transform to connect them all together:</p>
    <pre class="programlisting">
CREATE TRANSFORM FOR hstore LANGUAGE plpythonu (
    FROM SQL WITH FUNCTION hstore_to_plpython(internal),
    TO SQL WITH FUNCTION plpython_to_hstore(internal)
);
</pre>
    <p>In practice, these commands would be wrapped up in an extension.</p>
    <p>The <code class="filename">contrib</code> section contains a number of extensions that provide transforms, which can serve as real-world examples.</p>
  </div>
  <div class="refsect1" id="SQL-CREATETRANSFORM-COMPAT">
    <h2>Compatibility</h2>
    <p>This form of <code class="command">CREATE TRANSFORM</code> is a <span class="productname">PostgreSQL</span> extension. There is a <code class="command">CREATE TRANSFORM</code> command in the <acronym class="acronym">SQL</acronym> standard, but it is for adapting data types to client languages. That usage is not supported by <span class="productname">PostgreSQL</span>.</p>
  </div>
  <div class="refsect1" id="SQL-CREATETRANSFORM-SEEALSO">
    <h2>See Also</h2>
    <p><a class="xref" href="sql-createfunction.html" title="CREATE FUNCTION"><span class="refentrytitle">CREATE FUNCTION</span></a>, <a class="xref" href="sql-createlanguage.html" title="CREATE LANGUAGE"><span class="refentrytitle">CREATE LANGUAGE</span></a>, <a class="xref" href="sql-createtype.html" title="CREATE TYPE"><span class="refentrytitle">CREATE TYPE</span></a>, <a class="xref" href="sql-droptransform.html" title="DROP TRANSFORM"><span class="refentrytitle">DROP TRANSFORM</span></a></p>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="sql-createtstemplate.html" title="CREATE TEXT SEARCH TEMPLATE">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="sql-createtrigger.html" title="CREATE TRIGGER">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">CREATE TEXT SEARCH TEMPLATE&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;CREATE TRIGGER</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/sql-createtransform.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
