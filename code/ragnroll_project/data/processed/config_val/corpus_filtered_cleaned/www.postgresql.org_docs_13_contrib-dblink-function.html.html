<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: dblink</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/contrib-dblink-function.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="dblink" />
  <meta property="og:description" content="dblink dblink — executes a query in a remote database Synopsis dblink(text connname, text sql [, bool fail_on_error]) returns setof …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/contrib-dblink-function.html" title="PostgreSQL 17 - dblink" >Current</a>
                          (<a href="/docs/17/contrib-dblink-function.html" title="PostgreSQL 17 - dblink" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/contrib-dblink-function.html" title="PostgreSQL 16 - dblink" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/contrib-dblink-function.html" title="PostgreSQL 15 - dblink" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/contrib-dblink-function.html" title="PostgreSQL 14 - dblink" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/contrib-dblink-function.html" title="PostgreSQL 13 - dblink" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/contrib-dblink-function.html" title="PostgreSQL devel - dblink"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/contrib-dblink-function.html" title="PostgreSQL 12 - dblink"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/contrib-dblink-function.html" title="PostgreSQL 11 - dblink"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/contrib-dblink-function.html" title="PostgreSQL 10 - dblink"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/contrib-dblink-function.html" title="PostgreSQL 9.6 - dblink"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/contrib-dblink-function.html" title="PostgreSQL 9.5 - dblink"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/contrib-dblink-function.html" title="PostgreSQL 9.4 - dblink"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/contrib-dblink-function.html" title="PostgreSQL 9.3 - dblink"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/contrib-dblink-function.html" title="PostgreSQL 9.2 - dblink"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/contrib-dblink-function.html" title="PostgreSQL 9.1 - dblink"  rel="nofollow">9.1</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">dblink</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="contrib-dblink-disconnect.html" title="dblink_disconnect">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="dblink.html" title="F.10.&nbsp;dblink">Up</a></td>
      <th width="60%" align="center">F.10.&nbsp;dblink</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="contrib-dblink-exec.html" title="dblink_exec">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="CONTRIB-DBLINK-FUNCTION">
  <div class="titlepage"></div><a id="id-1.11.7.19.8.1" class="indexterm" name="id-1.11.7.19.8.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">dblink</span></h2>
    <p>dblink — executes a query in a remote database</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
dblink(text connname, text sql [, bool fail_on_error]) returns setof record
dblink(text connstr, text sql [, bool fail_on_error]) returns setof record
dblink(text sql [, bool fail_on_error]) returns setof record
</pre>
  </div>
  <div class="refsect1" id="id-1.11.7.19.8.5">
    <h2>Description</h2>
    <p><code class="function">dblink</code> executes a query (usually a <code class="command">SELECT</code>, but it can be any SQL statement that returns rows) in a remote database.</p>
    <p>When two <code class="type">text</code> arguments are given, the first one is first looked up as a persistent connection's name; if found, the command is executed on that connection. If not found, the first argument is treated as a connection info string as for <code class="function">dblink_connect</code>, and the indicated connection is made just for the duration of this command.</p>
  </div>
  <div class="refsect1" id="id-1.11.7.19.8.6">
    <h2>Arguments</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="parameter"><code>connname</code></em></span></dt>
        <dd>
          <p>Name of the connection to use; omit this parameter to use the unnamed connection.</p>
        </dd>
        <dt><span class="term"><em class="parameter"><code>connstr</code></em></span></dt>
        <dd>
          <p>A connection info string, as previously described for <code class="function">dblink_connect</code>.</p>
        </dd>
        <dt><span class="term"><em class="parameter"><code>sql</code></em></span></dt>
        <dd>
          <p>The SQL query that you wish to execute in the remote database, for example <code class="literal">select * from foo</code>.</p>
        </dd>
        <dt><span class="term"><em class="parameter"><code>fail_on_error</code></em></span></dt>
        <dd>
          <p>If true (the default when omitted) then an error thrown on the remote side of the connection causes an error to also be thrown locally. If false, the remote error is locally reported as a NOTICE, and the function returns no rows.</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.11.7.19.8.7">
    <h2>Return Value</h2>
    <p>The function returns the row(s) produced by the query. Since <code class="function">dblink</code> can be used with any query, it is declared to return <code class="type">record</code>, rather than specifying any particular set of columns. This means that you must specify the expected set of columns in the calling query — otherwise <span class="productname">PostgreSQL</span> would not know what to expect. Here is an example:</p>
    <pre class="programlisting">
SELECT *
    FROM dblink('dbname=mydb options=-csearch_path=',
                'select proname, prosrc from pg_proc')
      AS t1(proname name, prosrc text)
    WHERE proname LIKE 'bytea%';
</pre>
    <p>The <span class="quote">“<span class="quote">alias</span>”</span> part of the <code class="literal">FROM</code> clause must specify the column names and types that the function will return. (Specifying column names in an alias is actually standard SQL syntax, but specifying column types is a <span class="productname">PostgreSQL</span> extension.) This allows the system to understand what <code class="literal">*</code> should expand to, and what <code class="structname">proname</code> in the <code class="literal">WHERE</code> clause refers to, in advance of trying to execute the function. At run time, an error will be thrown if the actual query result from the remote database does not have the same number of columns shown in the <code class="literal">FROM</code> clause. The column names need not match, however, and <code class="function">dblink</code> does not insist on exact type matches either. It will succeed so long as the returned data strings are valid input for the column type declared in the <code class="literal">FROM</code> clause.</p>
  </div>
  <div class="refsect1" id="id-1.11.7.19.8.8">
    <h2>Notes</h2>
    <p>A convenient way to use <code class="function">dblink</code> with predetermined queries is to create a view. This allows the column type information to be buried in the view, instead of having to spell it out in every query. For example,</p>
    <pre class="programlisting">
CREATE VIEW myremote_pg_proc AS
  SELECT *
    FROM dblink('dbname=postgres options=-csearch_path=',
                'select proname, prosrc from pg_proc')
    AS t1(proname name, prosrc text);

SELECT * FROM myremote_pg_proc WHERE proname LIKE 'bytea%';
</pre>
  </div>
  <div class="refsect1" id="id-1.11.7.19.8.9">
    <h2>Examples</h2>
    <pre class="screen">
SELECT * FROM dblink('dbname=postgres options=-csearch_path=',
                     'select proname, prosrc from pg_proc')
  AS t1(proname name, prosrc text) WHERE proname LIKE 'bytea%';
  proname   |   prosrc
------------+------------
 byteacat   | byteacat
 byteaeq    | byteaeq
 bytealt    | bytealt
 byteale    | byteale
 byteagt    | byteagt
 byteage    | byteage
 byteane    | byteane
 byteacmp   | byteacmp
 bytealike  | bytealike
 byteanlike | byteanlike
 byteain    | byteain
 byteaout   | byteaout
(12 rows)

SELECT dblink_connect('dbname=postgres options=-csearch_path=');
 dblink_connect
----------------
 OK
(1 row)

SELECT * FROM dblink('select proname, prosrc from pg_proc')
  AS t1(proname name, prosrc text) WHERE proname LIKE 'bytea%';
  proname   |   prosrc
------------+------------
 byteacat   | byteacat
 byteaeq    | byteaeq
 bytealt    | bytealt
 byteale    | byteale
 byteagt    | byteagt
 byteage    | byteage
 byteane    | byteane
 byteacmp   | byteacmp
 bytealike  | bytealike
 byteanlike | byteanlike
 byteain    | byteain
 byteaout   | byteaout
(12 rows)

SELECT dblink_connect('myconn', 'dbname=regression options=-csearch_path=');
 dblink_connect
----------------
 OK
(1 row)

SELECT * FROM dblink('myconn', 'select proname, prosrc from pg_proc')
  AS t1(proname name, prosrc text) WHERE proname LIKE 'bytea%';
  proname   |   prosrc
------------+------------
 bytearecv  | bytearecv
 byteasend  | byteasend
 byteale    | byteale
 byteagt    | byteagt
 byteage    | byteage
 byteane    | byteane
 byteacmp   | byteacmp
 bytealike  | bytealike
 byteanlike | byteanlike
 byteacat   | byteacat
 byteaeq    | byteaeq
 bytealt    | bytealt
 byteain    | byteain
 byteaout   | byteaout
(14 rows)
</pre>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="contrib-dblink-disconnect.html" title="dblink_disconnect">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="dblink.html" title="F.10.&nbsp;dblink">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="contrib-dblink-exec.html" title="dblink_exec">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">dblink_disconnect&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;dblink_exec</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/contrib-dblink-function.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
