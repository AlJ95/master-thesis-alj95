<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: LISTEN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/sql-listen.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="LISTEN" />
  <meta property="og:description" content="LISTEN LISTEN — listen for a notification Synopsis LISTEN channel Description LISTEN registers the current session as a listener on …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/sql-listen.html" title="PostgreSQL 17 - LISTEN" >Current</a>
                          (<a href="/docs/17/sql-listen.html" title="PostgreSQL 17 - LISTEN" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/sql-listen.html" title="PostgreSQL 16 - LISTEN" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/sql-listen.html" title="PostgreSQL 15 - LISTEN" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/sql-listen.html" title="PostgreSQL 14 - LISTEN" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/sql-listen.html" title="PostgreSQL 13 - LISTEN" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/sql-listen.html" title="PostgreSQL devel - LISTEN"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/sql-listen.html" title="PostgreSQL 12 - LISTEN"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/sql-listen.html" title="PostgreSQL 11 - LISTEN"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/sql-listen.html" title="PostgreSQL 10 - LISTEN"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/sql-listen.html" title="PostgreSQL 9.6 - LISTEN"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/sql-listen.html" title="PostgreSQL 9.5 - LISTEN"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/sql-listen.html" title="PostgreSQL 9.4 - LISTEN"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/sql-listen.html" title="PostgreSQL 9.3 - LISTEN"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/sql-listen.html" title="PostgreSQL 9.2 - LISTEN"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/sql-listen.html" title="PostgreSQL 9.1 - LISTEN"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/sql-listen.html" title="PostgreSQL 9.0 - LISTEN"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/sql-listen.html" title="PostgreSQL 8.4 - LISTEN"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/sql-listen.html" title="PostgreSQL 8.3 - LISTEN"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/sql-listen.html" title="PostgreSQL 8.2 - LISTEN"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/sql-listen.html" title="PostgreSQL 8.1 - LISTEN"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/sql-listen.html" title="PostgreSQL 8.0 - LISTEN"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/sql-listen.html" title="PostgreSQL 7.4 - LISTEN"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/sql-listen.html" title="PostgreSQL 7.3 - LISTEN"  rel="nofollow">7.3</a>
                    
                       / 
                      <a href="/docs/7.2/sql-listen.html" title="PostgreSQL 7.2 - LISTEN"  rel="nofollow">7.2</a>
                    
                       / 
                      <a href="/docs/7.1/sql-listen.html" title="PostgreSQL 7.1 - LISTEN"  rel="nofollow">7.1</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">LISTEN</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="sql-insert.html" title="INSERT">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <th width="60%" align="center">SQL Commands</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="sql-load.html" title="LOAD">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="refentry" id="SQL-LISTEN">
  <div class="titlepage"></div><a id="id-1.9.3.153.1" class="indexterm" name="id-1.9.3.153.1"></a>
  <div class="refnamediv">
    <h2><span class="refentrytitle">LISTEN</span></h2>
    <p>LISTEN — listen for a notification</p>
  </div>
  <div class="refsynopsisdiv">
    <h2>Synopsis</h2>
    <pre class="synopsis">
LISTEN <em class="replaceable"><code>channel</code></em>
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.153.5">
    <h2>Description</h2>
    <p><code class="command">LISTEN</code> registers the current session as a listener on the notification channel named <em class="replaceable"><code>channel</code></em>. If the current session is already registered as a listener for this notification channel, nothing is done.</p>
    <p>Whenever the command <code class="command">NOTIFY <em class="replaceable"><code>channel</code></em></code> is invoked, either by this session or another one connected to the same database, all the sessions currently listening on that notification channel are notified, and each will in turn notify its connected client application.</p>
    <p>A session can be unregistered for a given notification channel with the <code class="command">UNLISTEN</code> command. A session's listen registrations are automatically cleared when the session ends.</p>
    <p>The method a client application must use to detect notification events depends on which <span class="productname">PostgreSQL</span> application programming interface it uses. With the <span class="application">libpq</span> library, the application issues <code class="command">LISTEN</code> as an ordinary SQL command, and then must periodically call the function <code class="function">PQnotifies</code> to find out whether any notification events have been received. Other interfaces such as <span class="application">libpgtcl</span> provide higher-level methods for handling notify events; indeed, with <span class="application">libpgtcl</span> the application programmer should not even issue <code class="command">LISTEN</code> or <code class="command">UNLISTEN</code> directly. See the documentation for the interface you are using for more details.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.153.6">
    <h2>Parameters</h2>
    <div class="variablelist">
      <dl class="variablelist">
        <dt><span class="term"><em class="replaceable"><code>channel</code></em></span></dt>
        <dd>
          <p>Name of a notification channel (any identifier).</p>
        </dd>
      </dl>
    </div>
  </div>
  <div class="refsect1" id="id-1.9.3.153.7">
    <h2>Notes</h2>
    <p><code class="command">LISTEN</code> takes effect at transaction commit. If <code class="command">LISTEN</code> or <code class="command">UNLISTEN</code> is executed within a transaction that later rolls back, the set of notification channels being listened to is unchanged.</p>
    <p>A transaction that has executed <code class="command">LISTEN</code> cannot be prepared for two-phase commit.</p>
    <p>There is a race condition when first setting up a listening session: if concurrently-committing transactions are sending notify events, exactly which of those will the newly listening session receive? The answer is that the session will receive all events committed after an instant during the transaction's commit step. But that is slightly later than any database state that the transaction could have observed in queries. This leads to the following rule for using <code class="command">LISTEN</code>: first execute (and commit!) that command, then in a new transaction inspect the database state as needed by the application logic, then rely on notifications to find out about subsequent changes to the database state. The first few received notifications might refer to updates already observed in the initial database inspection, but this is usually harmless.</p>
    <p><a class="xref" href="sql-notify.html" title="NOTIFY"><span class="refentrytitle">NOTIFY</span></a> contains a more extensive discussion of the use of <code class="command">LISTEN</code> and <code class="command">NOTIFY</code>.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.153.8">
    <h2>Examples</h2>
    <p>Configure and execute a listen/notify sequence from <span class="application">psql</span>:</p>
    <pre class="programlisting">
LISTEN virtual;
NOTIFY virtual;
Asynchronous notification "virtual" received from server process with PID 8448.
</pre>
  </div>
  <div class="refsect1" id="id-1.9.3.153.9">
    <h2>Compatibility</h2>
    <p>There is no <code class="command">LISTEN</code> statement in the SQL standard.</p>
  </div>
  <div class="refsect1" id="id-1.9.3.153.10">
    <h2>See Also</h2><span class="simplelist"><a class="xref" href="sql-notify.html" title="NOTIFY"><span class="refentrytitle">NOTIFY</span></a>, <a class="xref" href="sql-unlisten.html" title="UNLISTEN"><span class="refentrytitle">UNLISTEN</span></a></span>
  </div>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="sql-insert.html" title="INSERT">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="sql-commands.html" title="SQL Commands">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="sql-load.html" title="LOAD">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">INSERT&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;LOAD</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/sql-listen.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
