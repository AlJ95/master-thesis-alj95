<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 45.10. Utility Functions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/plpython-util.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="45.10. Utility Functions" />
  <meta property="og:description" content="45.10.&amp;nbsp;Utility Functions The plpy module also provides the functions plpy.debug(msg, **kwargs) plpy.log(msg, **kwargs) plpy.info(msg, **kwargs) plpy.notice(msg, **kwargs) plpy.warning(msg, **kwargs) plpy.error(msg, …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/plpython-util.html" title="PostgreSQL 17 - 45.10. Utility Functions" >Current</a>
                          (<a href="/docs/17/plpython-util.html" title="PostgreSQL 17 - 45.10. Utility Functions" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/plpython-util.html" title="PostgreSQL 16 - 45.10. Utility Functions" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/plpython-util.html" title="PostgreSQL 15 - 45.10. Utility Functions" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/plpython-util.html" title="PostgreSQL 14 - 45.10. Utility Functions" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/plpython-util.html" title="PostgreSQL 13 - 45.10. Utility Functions" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/plpython-util.html" title="PostgreSQL devel - 45.10. Utility Functions"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/plpython-util.html" title="PostgreSQL 12 - 45.10. Utility Functions"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/plpython-util.html" title="PostgreSQL 11 - 45.10. Utility Functions"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/plpython-util.html" title="PostgreSQL 10 - 45.10. Utility Functions"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/plpython-util.html" title="PostgreSQL 9.6 - 45.10. Utility Functions"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/plpython-util.html" title="PostgreSQL 9.5 - 45.10. Utility Functions"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/plpython-util.html" title="PostgreSQL 9.4 - 45.10. Utility Functions"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/plpython-util.html" title="PostgreSQL 9.3 - 45.10. Utility Functions"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/plpython-util.html" title="PostgreSQL 9.2 - 45.10. Utility Functions"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/plpython-util.html" title="PostgreSQL 9.1 - 45.10. Utility Functions"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/plpython-util.html" title="PostgreSQL 9.0 - 45.10. Utility Functions"  rel="nofollow">9.0</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">45.10.&nbsp;Utility Functions</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="plpython-transactions.html" title="45.9.&nbsp;Transaction Management">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="plpython.html" title="Chapter&nbsp;45.&nbsp;PL/Python — Python Procedural Language">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;45.&nbsp;PL/Python — Python Procedural Language</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="plpython-envar.html" title="45.11.&nbsp;Environment Variables">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="PLPYTHON-UTIL">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">45.10.&nbsp;Utility Functions</h2>
      </div>
    </div>
  </div>
  <p>The <code class="literal">plpy</code> module also provides the functions</p>
  <table border="0" summary="Simple list" class="simplelist">
    <tr>
      <td><code class="literal">plpy.debug(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
    <tr>
      <td><code class="literal">plpy.log(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
    <tr>
      <td><code class="literal">plpy.info(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
    <tr>
      <td><code class="literal">plpy.notice(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
    <tr>
      <td><code class="literal">plpy.warning(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
    <tr>
      <td><code class="literal">plpy.error(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
    <tr>
      <td><code class="literal">plpy.fatal(<em class="replaceable"><code>msg, **kwargs</code></em>)</code></td>
    </tr>
  </table>
  <p><a id="id-1.8.11.18.2.3" class="indexterm" name="id-1.8.11.18.2.3"></a> <code class="function">plpy.error</code> and <code class="function">plpy.fatal</code> actually raise a Python exception which, if uncaught, propagates out to the calling query, causing the current transaction or subtransaction to be aborted. <code class="literal">raise plpy.Error(<em class="replaceable"><code>msg</code></em>)</code> and <code class="literal">raise plpy.Fatal(<em class="replaceable"><code>msg</code></em>)</code> are equivalent to calling <code class="literal">plpy.error(<em class="replaceable"><code>msg</code></em>)</code> and <code class="literal">plpy.fatal(<em class="replaceable"><code>msg</code></em>)</code>, respectively but the <code class="literal">raise</code> form does not allow passing keyword arguments. The other functions only generate messages of different priority levels. Whether messages of a particular priority are reported to the client, written to the server log, or both is controlled by the <a class="xref" href="runtime-config-logging.html#GUC-LOG-MIN-MESSAGES">log_min_messages</a> and <a class="xref" href="runtime-config-client.html#GUC-CLIENT-MIN-MESSAGES">client_min_messages</a> configuration variables. See <a class="xref" href="runtime-config.html" title="Chapter&nbsp;19.&nbsp;Server Configuration">Chapter&nbsp;19</a> for more information.</p>
  <p>The <em class="replaceable"><code>msg</code></em> argument is given as a positional argument. For backward compatibility, more than one positional argument can be given. In that case, the string representation of the tuple of positional arguments becomes the message reported to the client.</p>
  <p>The following keyword-only arguments are accepted:</p>
  <table border="0" summary="Simple list" class="simplelist">
    <tr>
      <td><code class="literal">detail</code></td>
    </tr>
    <tr>
      <td><code class="literal">hint</code></td>
    </tr>
    <tr>
      <td><code class="literal">sqlstate</code></td>
    </tr>
    <tr>
      <td><code class="literal">schema_name</code></td>
    </tr>
    <tr>
      <td><code class="literal">table_name</code></td>
    </tr>
    <tr>
      <td><code class="literal">column_name</code></td>
    </tr>
    <tr>
      <td><code class="literal">datatype_name</code></td>
    </tr>
    <tr>
      <td><code class="literal">constraint_name</code></td>
    </tr>
  </table>
  <p>The string representation of the objects passed as keyword-only arguments is used to enrich the messages reported to the client. For example:</p>
  <pre class="programlisting">
CREATE FUNCTION raise_custom_exception() RETURNS void AS $$
plpy.error("custom exception message",
           detail="some info about exception",
           hint="hint for users")
$$ LANGUAGE plpythonu;

=# SELECT raise_custom_exception();
ERROR:  plpy.Error: custom exception message
DETAIL:  some info about exception
HINT:  hint for users
CONTEXT:  Traceback (most recent call last):
  PL/Python function "raise_custom_exception", line 4, in &lt;module&gt;
    hint="hint for users")
PL/Python function "raise_custom_exception"
</pre>
  <p>Another set of utility functions are <code class="literal">plpy.quote_literal(<em class="replaceable"><code>string</code></em>)</code>, <code class="literal">plpy.quote_nullable(<em class="replaceable"><code>string</code></em>)</code>, and <code class="literal">plpy.quote_ident(<em class="replaceable"><code>string</code></em>)</code>. They are equivalent to the built-in quoting functions described in <a class="xref" href="functions-string.html" title="9.4.&nbsp;String Functions and Operators">Section&nbsp;9.4</a>. They are useful when constructing ad-hoc queries. A PL/Python equivalent of dynamic SQL from <a class="xref" href="plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE" title="Example&nbsp;42.1.&nbsp;Quoting Values in Dynamic Queries">Example&nbsp;42.1</a> would be:</p>
  <pre class="programlisting">
plpy.execute("UPDATE tbl SET %s = %s WHERE key = %s" % (
    plpy.quote_ident(colname),
    plpy.quote_nullable(newvalue),
    plpy.quote_literal(keyvalue)))
</pre>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="plpython-transactions.html" title="45.9.&nbsp;Transaction Management">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="plpython.html" title="Chapter&nbsp;45.&nbsp;PL/Python — Python Procedural Language">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="plpython-envar.html" title="45.11.&nbsp;Environment Variables">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">45.9.&nbsp;Transaction Management&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;45.11.&nbsp;Environment Variables</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/plpython-util.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
