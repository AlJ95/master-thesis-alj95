<!doctype html>
<html lang="en">
 <head>
  <title>PostgreSQL: Documentation: 13: 5.14. Dependency Tracking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
   
  <meta name="theme-color" content="#336791"/>
  <meta name="copyright" content="The PostgreSQL Global Development Group" />
  <meta property="og:url" content="https://www.postgresql.org/docs/13/ddl-depend.html" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-02-20T14:13:26" />
  <meta property="og:image" content="https://www.postgresql.org/media/img/about/press/elephant.png" />
  <meta property="og:title" content="5.14. Dependency Tracking" />
  <meta property="og:description" content="5.14.&amp;nbsp;Dependency Tracking When you create complex database structures involving many tables with foreign key constraints, views, triggers, functions, etc. you …" />
  <meta property="og:site_name" content="PostgreSQL Documentation" />


  

  
  
  
  
  

  

  
  </head>
  <body>
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col">
          
          
        </div>
      </div>
      <div class="row justify-content-center pg-shout-box">
        <div class="col text-white text-center">February 20, 2025: <a href="/about/news/postgresql-174-168-1512-1417-and-1320-released-3018/">
  PostgreSQL 17.4, 16.8, 15.12, 14.17, and 13.20 Released!
</a>

</div>
      </div>
    </div>
    <div class="container-fluid margin">
      <div class="row">
        <div id="pgContentWrap" class="col-11">
          <div class="row">
            <div class="col-md-6 mb-2">
              <div class="row">
                <div class="col">
                  <div>
                    <a href="/docs/" title="Documentation">Documentation</a> &rarr; <a href="/docs/13/index.html">PostgreSQL 13</a>
                  </div>
                </div>
              </div>
              
                <div class="row">
                  <div class="col">
                    Supported Versions:
                      
                        
                        
                          <a href="/docs/current/ddl-depend.html" title="PostgreSQL 17 - 5.14. Dependency Tracking" >Current</a>
                          (<a href="/docs/17/ddl-depend.html" title="PostgreSQL 17 - 5.14. Dependency Tracking" >17</a>)
                        
                      
                         / 
                        
                          <a href="/docs/16/ddl-depend.html" title="PostgreSQL 16 - 5.14. Dependency Tracking" >16</a>
                        
                      
                         / 
                        
                          <a href="/docs/15/ddl-depend.html" title="PostgreSQL 15 - 5.14. Dependency Tracking" >15</a>
                        
                      
                         / 
                        
                          <a href="/docs/14/ddl-depend.html" title="PostgreSQL 14 - 5.14. Dependency Tracking" >14</a>
                        
                      
                         / 
                        
                          <a href="/docs/13/ddl-depend.html" title="PostgreSQL 13 - 5.14. Dependency Tracking" class="docs-version-selected">13</a>
                        
                      
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col">
                    Development Versions:
                    
                      
                      <a href="/docs/devel/ddl-depend.html" title="PostgreSQL devel - 5.14. Dependency Tracking"  rel="nofollow">devel</a>
                    
                  </div>
                </div>
              
              
                <div class="row">
                  <div class="col-12">
                    Unsupported versions:
                    
                      
                      <a href="/docs/12/ddl-depend.html" title="PostgreSQL 12 - 5.14. Dependency Tracking"  rel="nofollow">12</a>
                    
                       / 
                      <a href="/docs/11/ddl-depend.html" title="PostgreSQL 11 - 5.14. Dependency Tracking"  rel="nofollow">11</a>
                    
                       / 
                      <a href="/docs/10/ddl-depend.html" title="PostgreSQL 10 - 5.14. Dependency Tracking"  rel="nofollow">10</a>
                    
                       / 
                      <a href="/docs/9.6/ddl-depend.html" title="PostgreSQL 9.6 - 5.14. Dependency Tracking"  rel="nofollow">9.6</a>
                    
                       / 
                      <a href="/docs/9.5/ddl-depend.html" title="PostgreSQL 9.5 - 5.14. Dependency Tracking"  rel="nofollow">9.5</a>
                    
                       / 
                      <a href="/docs/9.4/ddl-depend.html" title="PostgreSQL 9.4 - 5.14. Dependency Tracking"  rel="nofollow">9.4</a>
                    
                       / 
                      <a href="/docs/9.3/ddl-depend.html" title="PostgreSQL 9.3 - 5.14. Dependency Tracking"  rel="nofollow">9.3</a>
                    
                       / 
                      <a href="/docs/9.2/ddl-depend.html" title="PostgreSQL 9.2 - 5.14. Dependency Tracking"  rel="nofollow">9.2</a>
                    
                       / 
                      <a href="/docs/9.1/ddl-depend.html" title="PostgreSQL 9.1 - 5.14. Dependency Tracking"  rel="nofollow">9.1</a>
                    
                       / 
                      <a href="/docs/9.0/ddl-depend.html" title="PostgreSQL 9.0 - 5.14. Dependency Tracking"  rel="nofollow">9.0</a>
                    
                       / 
                      <a href="/docs/8.4/ddl-depend.html" title="PostgreSQL 8.4 - 5.14. Dependency Tracking"  rel="nofollow">8.4</a>
                    
                       / 
                      <a href="/docs/8.3/ddl-depend.html" title="PostgreSQL 8.3 - 5.14. Dependency Tracking"  rel="nofollow">8.3</a>
                    
                       / 
                      <a href="/docs/8.2/ddl-depend.html" title="PostgreSQL 8.2 - 5.14. Dependency Tracking"  rel="nofollow">8.2</a>
                    
                       / 
                      <a href="/docs/8.1/ddl-depend.html" title="PostgreSQL 8.1 - 5.14. Dependency Tracking"  rel="nofollow">8.1</a>
                    
                       / 
                      <a href="/docs/8.0/ddl-depend.html" title="PostgreSQL 8.0 - 5.14. Dependency Tracking"  rel="nofollow">8.0</a>
                    
                       / 
                      <a href="/docs/7.4/ddl-depend.html" title="PostgreSQL 7.4 - 5.14. Dependency Tracking"  rel="nofollow">7.4</a>
                    
                       / 
                      <a href="/docs/7.3/ddl-depend.html" title="PostgreSQL 7.3 - 5.14. Dependency Tracking"  rel="nofollow">7.3</a>
                    
                  </div>
                </div>
              
            </div>
            <div class="col-md-6 col-lg-5 offset-lg-1">
              <form id="docSearchForm" role="search" method="get" action="/search/">
                <input type="hidden" name="u" value="/docs/13/" />
                <div class="input-group">
                  <input type="text" id="q" name="q" class="form-control" placeholder="Search the documentation for..."/>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                  </span>
                </div>
              </form>
            </div>
          </div>

          <div id="docContent">
            <div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader">
  <table width="100%" summary="Navigation header">
    <tr>
      <th colspan="5" align="center">5.14.&nbsp;Dependency Tracking</th>
    </tr>
    <tr>
      <td width="10%" align="left"><a accesskey="p" href="ddl-others.html" title="5.13.&nbsp;Other Database Objects">Prev</a>&nbsp;</td>
      <td width="10%" align="left"><a accesskey="u" href="ddl.html" title="Chapter&nbsp;5.&nbsp;Data Definition">Up</a></td>
      <th width="60%" align="center">Chapter&nbsp;5.&nbsp;Data Definition</th>
      <td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="10%" align="right">&nbsp;<a accesskey="n" href="dml.html" title="Chapter&nbsp;6.&nbsp;Data Manipulation">Next</a></td>
    </tr>
  </table>
  <hr />
</div>
<div class="sect1" id="DDL-DEPEND">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">5.14.&nbsp;Dependency Tracking</h2>
      </div>
    </div>
  </div><a id="id-1.5.4.16.2" class="indexterm" name="id-1.5.4.16.2"></a><a id="id-1.5.4.16.3" class="indexterm" name="id-1.5.4.16.3"></a>
  <p>When you create complex database structures involving many tables with foreign key constraints, views, triggers, functions, etc. you implicitly create a net of dependencies between the objects. For instance, a table with a foreign key constraint depends on the table it references.</p>
  <p>To ensure the integrity of the entire database structure, <span class="productname">PostgreSQL</span> makes sure that you cannot drop objects that other objects still depend on. For example, attempting to drop the products table we considered in <a class="xref" href="ddl-constraints.html#DDL-CONSTRAINTS-FK" title="5.4.5.&nbsp;Foreign Keys">Section&nbsp;5.4.5</a>, with the orders table depending on it, would result in an error message like this:</p>
  <pre class="screen">
DROP TABLE products;

ERROR:  cannot drop table products because other objects depend on it
DETAIL:  constraint orders_product_no_fkey on table orders depends on table products
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
</pre>
  <p>The error message contains a useful hint: if you do not want to bother deleting all the dependent objects individually, you can run:</p>
  <pre class="screen">
DROP TABLE products CASCADE;
</pre>
  <p>and all the dependent objects will be removed, as will any objects that depend on them, recursively. In this case, it doesn't remove the orders table, it only removes the foreign key constraint. It stops there because nothing depends on the foreign key constraint. (If you want to check what <code class="command">DROP ... CASCADE</code> will do, run <code class="command">DROP</code> without <code class="literal">CASCADE</code> and read the <code class="literal">DETAIL</code> output.)</p>
  <p>Almost all <code class="command">DROP</code> commands in <span class="productname">PostgreSQL</span> support specifying <code class="literal">CASCADE</code>. Of course, the nature of the possible dependencies varies with the type of the object. You can also write <code class="literal">RESTRICT</code> instead of <code class="literal">CASCADE</code> to get the default behavior, which is to prevent dropping objects that any other objects depend on.</p>
  <div class="note">
    <h3 class="title">Note</h3>
    <p>According to the SQL standard, specifying either <code class="literal">RESTRICT</code> or <code class="literal">CASCADE</code> is required in a <code class="command">DROP</code> command. No database system actually enforces that rule, but whether the default behavior is <code class="literal">RESTRICT</code> or <code class="literal">CASCADE</code> varies across systems.</p>
  </div>
  <p>If a <code class="command">DROP</code> command lists multiple objects, <code class="literal">CASCADE</code> is only required when there are dependencies outside the specified group. For example, when saying <code class="literal">DROP TABLE tab1, tab2</code> the existence of a foreign key referencing <code class="literal">tab1</code> from <code class="literal">tab2</code> would not mean that <code class="literal">CASCADE</code> is needed to succeed.</p>
  <p>For user-defined functions, <span class="productname">PostgreSQL</span> tracks dependencies associated with a function's externally-visible properties, such as its argument and result types, but <span class="emphasis"><em>not</em></span> dependencies that could only be known by examining the function body. As an example, consider this situation:</p>
  <pre class="programlisting">
CREATE TYPE rainbow AS ENUM ('red', 'orange', 'yellow',
                             'green', 'blue', 'purple');

CREATE TABLE my_colors (color rainbow, note text);

CREATE FUNCTION get_color_note (rainbow) RETURNS text AS
  'SELECT note FROM my_colors WHERE color = $1'
  LANGUAGE SQL;
</pre>
  <p>(See <a class="xref" href="xfunc-sql.html" title="37.5.&nbsp;Query Language (SQL) Functions">Section&nbsp;37.5</a> for an explanation of SQL-language functions.) <span class="productname">PostgreSQL</span> will be aware that the <code class="function">get_color_note</code> function depends on the <code class="type">rainbow</code> type: dropping the type would force dropping the function, because its argument type would no longer be defined. But <span class="productname">PostgreSQL</span> will not consider <code class="function">get_color_note</code> to depend on the <code class="structname">my_colors</code> table, and so will not drop the function if the table is dropped. While there are disadvantages to this approach, there are also benefits. The function is still valid in some sense if the table is missing, though executing it would cause an error; creating a new table of the same name would allow the function to work again.</p>
</div>
<div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter">
  <hr />
  <table width="100%" summary="Navigation footer">
    <tr>
      <td width="40%" align="left"><a accesskey="p" href="ddl-others.html" title="5.13.&nbsp;Other Database Objects">Prev</a>&nbsp;</td>
      <td width="20%" align="center"><a accesskey="u" href="ddl.html" title="Chapter&nbsp;5.&nbsp;Data Definition">Up</a></td>
      <td width="40%" align="right">&nbsp;<a accesskey="n" href="dml.html" title="Chapter&nbsp;6.&nbsp;Data Manipulation">Next</a></td>
    </tr>
    <tr>
      <td width="40%" align="left" valign="top">5.13.&nbsp;Other Database Objects&nbsp;</td>
      <td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 13.20 Documentation">Home</a></td>
      <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Data Manipulation</td>
    </tr>
  </table>
</div>

          </div>
          
            <div id="docComments">
              <h2>Submit correction</h2>
              <p>
              If you see anything in the documentation that is not correct, does not match
              your experience with the particular feature or requires further clarification,
              please use
              <a href="/account/comments/new/13/ddl-depend.html/" rel="nofollow">this form</a>
              to report a documentation issue.
              </p>
            </div>
          
        </div> 
      </div>
    </div>
    
    
    
    
    
    
  </body>
</html>
